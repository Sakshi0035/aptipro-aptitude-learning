function YS(t,e){for(var i=0;i<e.length;i++){const s=e[i];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=i(o);fetch(o.href,l)}})();function Rd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function JS(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(i,s,o.get?o:{enumerable:!0,get:function(){return t[s]}})}),i}var Lc={exports:{}},to={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig;function KS(){if(ig)return to;ig=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var f in o)f!=="key"&&(l[f]=o[f])}else l=o;return o=l.ref,{$$typeof:t,type:s,key:c,ref:o!==void 0?o:null,props:l}}return to.Fragment=e,to.jsx=i,to.jsxs=i,to}var rg;function WS(){return rg||(rg=1,Lc.exports=KS()),Lc.exports}var _=WS(),qc={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function XS(){if(sg)return ve;sg=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=S&&D[S]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function k(D,Y,ne){this.props=D,this.context=Y,this.refs=A,this.updater=ne||x}k.prototype.isReactComponent={},k.prototype.setState=function(D,Y){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,Y,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function P(){}P.prototype=k.prototype;function R(D,Y,ne){this.props=D,this.context=Y,this.refs=A,this.updater=ne||x}var O=R.prototype=new P;O.constructor=R,C(O,k.prototype),O.isPureReactComponent=!0;var H=Array.isArray;function F(){}var j={H:null,A:null,T:null,S:null},de=Object.prototype.hasOwnProperty;function K(D,Y,ne){var ee=ne.ref;return{$$typeof:t,type:D,key:Y,ref:ee!==void 0?ee:null,props:ne}}function W(D,Y){return K(D.type,Y,D.props)}function Q(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Z(D){var Y={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ne){return Y[ne]})}var ge=/\/+/g;function we(D,Y){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):Y.toString(36)}function ke(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(F,F):(D.status="pending",D.then(function(Y){D.status==="pending"&&(D.status="fulfilled",D.value=Y)},function(Y){D.status==="pending"&&(D.status="rejected",D.reason=Y)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function G(D,Y,ne,ee,ue){var pe=typeof D;(pe==="undefined"||pe==="boolean")&&(D=null);var te=!1;if(D===null)te=!0;else switch(pe){case"bigint":case"string":case"number":te=!0;break;case"object":switch(D.$$typeof){case t:case e:te=!0;break;case v:return te=D._init,G(te(D._payload),Y,ne,ee,ue)}}if(te)return ue=ue(D),te=ee===""?"."+we(D,0):ee,H(ue)?(ne="",te!=null&&(ne=te.replace(ge,"$&/")+"/"),G(ue,Y,ne,"",function(at){return at})):ue!=null&&(Q(ue)&&(ue=W(ue,ne+(ue.key==null||D&&D.key===ue.key?"":(""+ue.key).replace(ge,"$&/")+"/")+te)),Y.push(ue)),1;te=0;var oe=ee===""?".":ee+":";if(H(D))for(var ae=0;ae<D.length;ae++)ee=D[ae],pe=oe+we(ee,ae),te+=G(ee,Y,ne,pe,ue);else if(ae=w(D),typeof ae=="function")for(D=ae.call(D),ae=0;!(ee=D.next()).done;)ee=ee.value,pe=oe+we(ee,ae++),te+=G(ee,Y,ne,pe,ue);else if(pe==="object"){if(typeof D.then=="function")return G(ke(D),Y,ne,ee,ue);throw Y=String(D),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return te}function X(D,Y,ne){if(D==null)return D;var ee=[],ue=0;return G(D,ee,"","",function(pe){return Y.call(ne,pe,ue++)}),ee}function re(D){if(D._status===-1){var Y=D._result;Y=Y(),Y.then(function(ne){(D._status===0||D._status===-1)&&(D._status=1,D._result=ne)},function(ne){(D._status===0||D._status===-1)&&(D._status=2,D._result=ne)}),D._status===-1&&(D._status=0,D._result=Y)}if(D._status===1)return D._result.default;throw D._result}var Ce=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},Re={map:X,forEach:function(D,Y,ne){X(D,function(){Y.apply(this,arguments)},ne)},count:function(D){var Y=0;return X(D,function(){Y++}),Y},toArray:function(D){return X(D,function(Y){return Y})||[]},only:function(D){if(!Q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ve.Activity=E,ve.Children=Re,ve.Component=k,ve.Fragment=i,ve.Profiler=o,ve.PureComponent=R,ve.StrictMode=s,ve.Suspense=h,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,ve.__COMPILER_RUNTIME={__proto__:null,c:function(D){return j.H.useMemoCache(D)}},ve.cache=function(D){return function(){return D.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(D,Y,ne){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=C({},D.props),ue=D.key;if(Y!=null)for(pe in Y.key!==void 0&&(ue=""+Y.key),Y)!de.call(Y,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&Y.ref===void 0||(ee[pe]=Y[pe]);var pe=arguments.length-2;if(pe===1)ee.children=ne;else if(1<pe){for(var te=Array(pe),oe=0;oe<pe;oe++)te[oe]=arguments[oe+2];ee.children=te}return K(D.type,ue,ee)},ve.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},ve.createElement=function(D,Y,ne){var ee,ue={},pe=null;if(Y!=null)for(ee in Y.key!==void 0&&(pe=""+Y.key),Y)de.call(Y,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ue[ee]=Y[ee]);var te=arguments.length-2;if(te===1)ue.children=ne;else if(1<te){for(var oe=Array(te),ae=0;ae<te;ae++)oe[ae]=arguments[ae+2];ue.children=oe}if(D&&D.defaultProps)for(ee in te=D.defaultProps,te)ue[ee]===void 0&&(ue[ee]=te[ee]);return K(D,pe,ue)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(D){return{$$typeof:f,render:D}},ve.isValidElement=Q,ve.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:re}},ve.memo=function(D,Y){return{$$typeof:p,type:D,compare:Y===void 0?null:Y}},ve.startTransition=function(D){var Y=j.T,ne={};j.T=ne;try{var ee=D(),ue=j.S;ue!==null&&ue(ne,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(F,Ce)}catch(pe){Ce(pe)}finally{Y!==null&&ne.types!==null&&(Y.types=ne.types),j.T=Y}},ve.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},ve.use=function(D){return j.H.use(D)},ve.useActionState=function(D,Y,ne){return j.H.useActionState(D,Y,ne)},ve.useCallback=function(D,Y){return j.H.useCallback(D,Y)},ve.useContext=function(D){return j.H.useContext(D)},ve.useDebugValue=function(){},ve.useDeferredValue=function(D,Y){return j.H.useDeferredValue(D,Y)},ve.useEffect=function(D,Y){return j.H.useEffect(D,Y)},ve.useEffectEvent=function(D){return j.H.useEffectEvent(D)},ve.useId=function(){return j.H.useId()},ve.useImperativeHandle=function(D,Y,ne){return j.H.useImperativeHandle(D,Y,ne)},ve.useInsertionEffect=function(D,Y){return j.H.useInsertionEffect(D,Y)},ve.useLayoutEffect=function(D,Y){return j.H.useLayoutEffect(D,Y)},ve.useMemo=function(D,Y){return j.H.useMemo(D,Y)},ve.useOptimistic=function(D,Y){return j.H.useOptimistic(D,Y)},ve.useReducer=function(D,Y,ne){return j.H.useReducer(D,Y,ne)},ve.useRef=function(D){return j.H.useRef(D)},ve.useState=function(D){return j.H.useState(D)},ve.useSyncExternalStore=function(D,Y,ne){return j.H.useSyncExternalStore(D,Y,ne)},ve.useTransition=function(){return j.H.useTransition()},ve.version="19.2.0",ve}var og;function Nd(){return og||(og=1,qc.exports=XS()),qc.exports}var M=Nd();const A0=Rd(M);var Bc={exports:{}},no={},Hc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function QS(){return ag||(ag=1,(function(t){function e(G,X){var re=G.length;G.push(X);e:for(;0<re;){var Ce=re-1>>>1,Re=G[Ce];if(0<o(Re,X))G[Ce]=X,G[re]=Re,re=Ce;else break e}}function i(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var X=G[0],re=G.pop();if(re!==X){G[0]=re;e:for(var Ce=0,Re=G.length,D=Re>>>1;Ce<D;){var Y=2*(Ce+1)-1,ne=G[Y],ee=Y+1,ue=G[ee];if(0>o(ne,re))ee<Re&&0>o(ue,ne)?(G[Ce]=ue,G[ee]=re,Ce=ee):(G[Ce]=ne,G[Y]=re,Ce=Y);else if(ee<Re&&0>o(ue,re))G[Ce]=ue,G[ee]=re,Ce=ee;else break e}}return X}function o(G,X){var re=G.sortIndex-X.sortIndex;return re!==0?re:G.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var h=[],p=[],v=1,E=null,S=3,w=!1,x=!1,C=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(G){for(var X=i(p);X!==null;){if(X.callback===null)s(p);else if(X.startTime<=G)s(p),X.sortIndex=X.expirationTime,e(h,X);else break;X=i(p)}}function H(G){if(C=!1,O(G),!x)if(i(h)!==null)x=!0,F||(F=!0,Z());else{var X=i(p);X!==null&&ke(H,X.startTime-G)}}var F=!1,j=-1,de=5,K=-1;function W(){return A?!0:!(t.unstable_now()-K<de)}function Q(){if(A=!1,F){var G=t.unstable_now();K=G;var X=!0;try{e:{x=!1,C&&(C=!1,P(j),j=-1),w=!0;var re=S;try{t:{for(O(G),E=i(h);E!==null&&!(E.expirationTime>G&&W());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,S=E.priorityLevel;var Re=Ce(E.expirationTime<=G);if(G=t.unstable_now(),typeof Re=="function"){E.callback=Re,O(G),X=!0;break t}E===i(h)&&s(h),O(G)}else s(h);E=i(h)}if(E!==null)X=!0;else{var D=i(p);D!==null&&ke(H,D.startTime-G),X=!1}}break e}finally{E=null,S=re,w=!1}X=void 0}}finally{X?Z():F=!1}}}var Z;if(typeof R=="function")Z=function(){R(Q)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,we=ge.port2;ge.port1.onmessage=Q,Z=function(){we.postMessage(null)}}else Z=function(){k(Q,0)};function ke(G,X){j=k(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_next=function(G){switch(S){case 1:case 2:case 3:var X=3;break;default:X=S}var re=S;S=X;try{return G()}finally{S=re}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=S;S=G;try{return X()}finally{S=re}},t.unstable_scheduleCallback=function(G,X,re){var Ce=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Ce+re:Ce):re=Ce,G){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=re+Re,G={id:v++,callback:X,priorityLevel:G,startTime:re,expirationTime:Re,sortIndex:-1},re>Ce?(G.sortIndex=re,e(p,G),i(h)===null&&G===i(p)&&(C?(P(j),j=-1):C=!0,ke(H,re-Ce))):(G.sortIndex=Re,e(h,G),x||w||(x=!0,F||(F=!0,Z()))),G},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(G){var X=S;return function(){var re=S;S=X;try{return G.apply(this,arguments)}finally{S=re}}}})(Gc)),Gc}var lg;function ZS(){return lg||(lg=1,Hc.exports=QS()),Hc.exports}var Vc={exports:{}},vt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function eT(){if(ug)return vt;ug=1;var t=Nd();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(h,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:h,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return vt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vt.createPortal=function(h,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(h,p,null,v)},vt.flushSync=function(h){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=v,s.d.f()}},vt.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},vt.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},vt.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:w}):v==="script"&&s.d.X(h,{crossOrigin:E,integrity:S,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},vt.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=f(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},vt.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=f(v,p.crossOrigin);s.d.L(h,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},vt.preloadModule=function(h,p){if(typeof h=="string")if(p){var v=f(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},vt.requestFormReset=function(h){s.d.r(h)},vt.unstable_batchedUpdates=function(h,p){return h(p)},vt.useFormState=function(h,p,v){return c.H.useFormState(h,p,v)},vt.useFormStatus=function(){return c.H.useHostTransitionStatus()},vt.version="19.2.0",vt}var cg;function tT(){if(cg)return Vc.exports;cg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Vc.exports=eT(),Vc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function nT(){if(dg)return no;dg=1;var t=ZS(),e=Nd(),i=tT();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(l(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,u=r;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return h(g),n;if(y===u)return h(g),r;y=y.sibling}throw Error(s(188))}if(a.return!==u.return)a=g,u=y;else{for(var T=!1,b=g.child;b;){if(b===a){T=!0,a=g,u=y;break}if(b===u){T=!0,u=g,a=y;break}b=b.sibling}if(!T){for(b=y.child;b;){if(b===a){T=!0,a=y,u=g;break}if(b===u){T=!0,u=y,a=g;break}b=b.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==u)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function v(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=v(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=Q&&n[Q]||n["@@iterator"],typeof n=="function"?n:null)}var ge=Symbol.for("react.client.reference");function we(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ge?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case k:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case F:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case R:return n.displayName||"Context";case P:return(n._context.displayName||"Context")+".Consumer";case O:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return r=n.displayName||null,r!==null?r:we(n.type)||"Memo";case de:r=n._payload,n=n._init;try{return we(n(r))}catch{}}return null}var ke=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},Ce=[],Re=-1;function D(n){return{current:n}}function Y(n){0>Re||(n.current=Ce[Re],Ce[Re]=null,Re--)}function ne(n,r){Re++,Ce[Re]=n.current,n.current=r}var ee=D(null),ue=D(null),pe=D(null),te=D(null);function oe(n,r){switch(ne(pe,r),ne(ue,n),ne(ee,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Cm(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Cm(r),n=Am(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(ee),ne(ee,n)}function ae(){Y(ee),Y(ue),Y(pe)}function at(n){n.memoizedState!==null&&ne(te,n);var r=ee.current,a=Am(r,n.type);r!==a&&(ne(ue,n),ne(ee,a))}function Qe(n){ue.current===n&&(Y(ee),Y(ue)),te.current===n&&(Y(te),Xs._currentValue=re)}var rn,Nt;function Mt(n){if(rn===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);rn=r&&r[1]||"",Nt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rn+n+Nt}var tr=!1;function sn(n,r){if(!n||tr)return"";tr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(V){var B=V}Reflect.construct(n,[],J)}else{try{J.call()}catch(V){B=V}n.call(J.prototype)}}else{try{throw Error()}catch(V){B=V}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(V){if(V&&B&&typeof V.stack=="string")return[V.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),T=y[0],b=y[1];if(T&&b){var N=T.split(`
`),q=b.split(`
`);for(g=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;if(u===N.length||g===q.length)for(u=N.length-1,g=q.length-1;1<=u&&0<=g&&N[u]!==q[g];)g--;for(;1<=u&&0<=g;u--,g--)if(N[u]!==q[g]){if(u!==1||g!==1)do if(u--,g--,0>g||N[u]!==q[g]){var z=`
`+N[u].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=u&&0<=g);break}}}finally{tr=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Mt(a):""}function Yn(n,r){switch(n.tag){case 26:case 27:case 5:return Mt(n.type);case 16:return Mt("Lazy");case 13:return n.child!==r&&r!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return sn(n.type,!1);case 11:return sn(n.type.render,!1);case 1:return sn(n.type,!0);case 31:return Mt("Activity");default:return""}}function tt(n){try{var r="",a=null;do r+=Yn(n,a),a=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var gn=Object.prototype.hasOwnProperty,wl=t.unstable_scheduleCallback,bl=t.unstable_cancelCallback,x_=t.unstable_shouldYield,C_=t.unstable_requestPaint,It=t.unstable_now,A_=t.unstable_getCurrentPriorityLevel,rf=t.unstable_ImmediatePriority,sf=t.unstable_UserBlockingPriority,So=t.unstable_NormalPriority,R_=t.unstable_LowPriority,of=t.unstable_IdlePriority,N_=t.log,M_=t.unstable_setDisableYieldValue,us=null,kt=null;function Jn(n){if(typeof N_=="function"&&M_(n),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(us,n)}catch{}}var Dt=Math.clz32?Math.clz32:D_,I_=Math.log,k_=Math.LN2;function D_(n){return n>>>=0,n===0?32:31-(I_(n)/k_|0)|0}var To=256,wo=262144,bo=4194304;function xi(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xo(n,r,a){var u=n.pendingLanes;if(u===0)return 0;var g=0,y=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var b=u&134217727;return b!==0?(u=b&~y,u!==0?g=xi(u):(T&=b,T!==0?g=xi(T):a||(a=b&~n,a!==0&&(g=xi(a))))):(b=u&~y,b!==0?g=xi(b):T!==0?g=xi(T):a||(a=u&~n,a!==0&&(g=xi(a)))),g===0?0:r!==0&&r!==g&&(r&y)===0&&(y=g&-g,a=r&-r,y>=a||y===32&&(a&4194048)!==0)?r:g}function cs(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function U_(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function af(){var n=bo;return bo<<=1,(bo&62914560)===0&&(bo=4194304),n}function xl(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function ds(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function P_(n,r,a,u,g,y){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var b=n.entanglements,N=n.expirationTimes,q=n.hiddenUpdates;for(a=T&~a;0<a;){var z=31-Dt(a),J=1<<z;b[z]=0,N[z]=-1;var B=q[z];if(B!==null)for(q[z]=null,z=0;z<B.length;z++){var V=B[z];V!==null&&(V.lane&=-536870913)}a&=~J}u!==0&&lf(n,u,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(T&~r))}function lf(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-Dt(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|a&261930}function uf(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var u=31-Dt(a),g=1<<u;g&r|n[u]&r&&(n[u]|=r),a&=~g}}function cf(n,r){var a=r&-r;return a=(a&42)!==0?1:Cl(a),(a&(n.suspendedLanes|r))!==0?0:a}function Cl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Al(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function df(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:Wm(n.type))}function ff(n,r){var a=X.p;try{return X.p=n,r()}finally{X.p=a}}var Kn=Math.random().toString(36).slice(2),ft="__reactFiber$"+Kn,Tt="__reactProps$"+Kn,nr="__reactContainer$"+Kn,Rl="__reactEvents$"+Kn,O_="__reactListeners$"+Kn,L_="__reactHandles$"+Kn,hf="__reactResources$"+Kn,fs="__reactMarker$"+Kn;function Nl(n){delete n[ft],delete n[Tt],delete n[Rl],delete n[O_],delete n[L_]}function ir(n){var r=n[ft];if(r)return r;for(var a=n.parentNode;a;){if(r=a[nr]||a[ft]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Um(n);n!==null;){if(a=n[ft])return a;n=Um(n)}return r}n=a,a=n.parentNode}return null}function rr(n){if(n=n[ft]||n[nr]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function hs(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function sr(n){var r=n[hf];return r||(r=n[hf]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ct(n){n[fs]=!0}var pf=new Set,mf={};function Ci(n,r){or(n,r),or(n+"Capture",r)}function or(n,r){for(mf[n]=r,n=0;n<r.length;n++)pf.add(r[n])}var q_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gf={},yf={};function B_(n){return gn.call(yf,n)?!0:gn.call(gf,n)?!1:q_.test(n)?yf[n]=!0:(gf[n]=!0,!1)}function Co(n,r,a){if(B_(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function Ao(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Tn(n,r,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+u)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vf(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function H_(n,r,a){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(T){a=""+T,y.call(this,T)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(T){a=""+T},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ml(n){if(!n._valueTracker){var r=vf(n)?"checked":"value";n._valueTracker=H_(n,r,""+n[r])}}function _f(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return n&&(u=vf(n)?n.checked?"true":"false":n.value),n=u,n!==a?(r.setValue(n),!0):!1}function Ro(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var G_=/[\n"\\]/g;function jt(n){return n.replace(G_,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Il(n,r,a,u,g,y,T,b){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),r!=null?T==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Ft(r)):n.value!==""+Ft(r)&&(n.value=""+Ft(r)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),r!=null?kl(n,T,Ft(r)):a!=null?kl(n,T,Ft(a)):u!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.name=""+Ft(b):n.removeAttribute("name")}function Ef(n,r,a,u,g,y,T,b){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),r!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||r!=null)){Ml(n);return}a=a!=null?""+Ft(a):"",r=r!=null?""+Ft(r):a,b||r===n.value||(n.value=r),n.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=b?n.checked:!!u,n.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),Ml(n)}function kl(n,r,a){r==="number"&&Ro(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ar(n,r,a,u){if(n=n.options,r){r={};for(var g=0;g<a.length;g++)r["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=r.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&u&&(n[a].defaultSelected=!0)}else{for(a=""+Ft(a),r=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function Sf(n,r,a){if(r!=null&&(r=""+Ft(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+Ft(a):""}function Tf(n,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(s(92));if(ke(u)){if(1<u.length)throw Error(s(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=Ft(r),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u),Ml(n)}function lr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var V_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wf(n,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,a):typeof a!="number"||a===0||V_.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function bf(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&a[g]!==u&&wf(n,g,u)}else for(var y in r)r.hasOwnProperty(y)&&wf(n,y,r[y])}function Dl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),F_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(n){return F_.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function wn(){}var Ul=null;function Pl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ur=null,cr=null;function xf(n){var r=rr(n);if(r&&(n=r.stateNode)){var a=n[Tt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Il(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+jt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==n&&u.form===n.form){var g=u[Tt]||null;if(!g)throw Error(s(90));Il(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===n.form&&_f(u)}break e;case"textarea":Sf(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ar(n,!!a.multiple,r,!1)}}}var Ol=!1;function Cf(n,r,a){if(Ol)return n(r,a);Ol=!0;try{var u=n(r);return u}finally{if(Ol=!1,(ur!==null||cr!==null)&&(ga(),ur&&(r=ur,n=cr,cr=ur=null,xf(r),n)))for(r=0;r<n.length;r++)xf(n[r])}}function ps(n,r){var a=n.stateNode;if(a===null)return null;var u=a[Tt]||null;if(u===null)return null;a=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=!1;if(bn)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Ll=!1}var Wn=null,ql=null,Mo=null;function Af(){if(Mo)return Mo;var n,r=ql,a=r.length,u,g="value"in Wn?Wn.value:Wn.textContent,y=g.length;for(n=0;n<a&&r[n]===g[n];n++);var T=a-n;for(u=1;u<=T&&r[a-u]===g[y-u];u++);return Mo=g.slice(n,1<u?1-u:void 0)}function Io(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ko(){return!0}function Rf(){return!1}function wt(n){function r(a,u,g,y,T){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var b in n)n.hasOwnProperty(b)&&(a=n[b],this[b]=a?a(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ko:Rf,this.isPropagationStopped=Rf,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ko)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ko)},persist:function(){},isPersistent:ko}),r}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Do=wt(Ai),gs=E({},Ai,{view:0,detail:0}),j_=wt(gs),Bl,Hl,ys,Uo=E({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ys&&(ys&&n.type==="mousemove"?(Bl=n.screenX-ys.screenX,Hl=n.screenY-ys.screenY):Hl=Bl=0,ys=n),Bl)},movementY:function(n){return"movementY"in n?n.movementY:Hl}}),Nf=wt(Uo),$_=E({},Uo,{dataTransfer:0}),Y_=wt($_),J_=E({},gs,{relatedTarget:0}),Gl=wt(J_),K_=E({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),W_=wt(K_),X_=E({},Ai,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Q_=wt(X_),Z_=E({},Ai,{data:0}),Mf=wt(Z_),eE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iE(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=nE[n])?!!r[n]:!1}function Vl(){return iE}var rE=E({},gs,{key:function(n){if(n.key){var r=eE[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vl,charCode:function(n){return n.type==="keypress"?Io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sE=wt(rE),oE=E({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),If=wt(oE),aE=E({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vl}),lE=wt(aE),uE=E({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),cE=wt(uE),dE=E({},Uo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fE=wt(dE),hE=E({},Ai,{newState:0,oldState:0}),pE=wt(hE),mE=[9,13,27,32],zl=bn&&"CompositionEvent"in window,vs=null;bn&&"documentMode"in document&&(vs=document.documentMode);var gE=bn&&"TextEvent"in window&&!vs,kf=bn&&(!zl||vs&&8<vs&&11>=vs),Df=" ",Uf=!1;function Pf(n,r){switch(n){case"keyup":return mE.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Of(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var dr=!1;function yE(n,r){switch(n){case"compositionend":return Of(r);case"keypress":return r.which!==32?null:(Uf=!0,Df);case"textInput":return n=r.data,n===Df&&Uf?null:n;default:return null}}function vE(n,r){if(dr)return n==="compositionend"||!zl&&Pf(n,r)?(n=Af(),Mo=ql=Wn=null,dr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return kf&&r.locale!=="ko"?null:r.data;default:return null}}var _E={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_E[n.type]:r==="textarea"}function qf(n,r,a,u){ur?cr?cr.push(u):cr=[u]:ur=u,r=wa(r,"onChange"),0<r.length&&(a=new Do("onChange","change",null,a,u),n.push({event:a,listeners:r}))}var _s=null,Es=null;function EE(n){Em(n,0)}function Po(n){var r=hs(n);if(_f(r))return n}function Bf(n,r){if(n==="change")return r}var Hf=!1;if(bn){var Fl;if(bn){var jl="oninput"in document;if(!jl){var Gf=document.createElement("div");Gf.setAttribute("oninput","return;"),jl=typeof Gf.oninput=="function"}Fl=jl}else Fl=!1;Hf=Fl&&(!document.documentMode||9<document.documentMode)}function Vf(){_s&&(_s.detachEvent("onpropertychange",zf),Es=_s=null)}function zf(n){if(n.propertyName==="value"&&Po(Es)){var r=[];qf(r,Es,n,Pl(n)),Cf(EE,r)}}function SE(n,r,a){n==="focusin"?(Vf(),_s=r,Es=a,_s.attachEvent("onpropertychange",zf)):n==="focusout"&&Vf()}function TE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Po(Es)}function wE(n,r){if(n==="click")return Po(r)}function bE(n,r){if(n==="input"||n==="change")return Po(r)}function xE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ut=typeof Object.is=="function"?Object.is:xE;function Ss(n,r){if(Ut(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!gn.call(r,g)||!Ut(n[g],r[g]))return!1}return!0}function Ff(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jf(n,r){var a=Ff(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=r&&u>=r)return{node:a,offset:r-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ff(a)}}function $f(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?$f(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Yf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ro(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ro(n.document)}return r}function $l(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var CE=bn&&"documentMode"in document&&11>=document.documentMode,fr=null,Yl=null,Ts=null,Jl=!1;function Jf(n,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Jl||fr==null||fr!==Ro(u)||(u=fr,"selectionStart"in u&&$l(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ts&&Ss(Ts,u)||(Ts=u,u=wa(Yl,"onSelect"),0<u.length&&(r=new Do("onSelect","select",null,r,a),n.push({event:r,listeners:u}),r.target=fr)))}function Ri(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var hr={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionrun:Ri("Transition","TransitionRun"),transitionstart:Ri("Transition","TransitionStart"),transitioncancel:Ri("Transition","TransitionCancel"),transitionend:Ri("Transition","TransitionEnd")},Kl={},Kf={};bn&&(Kf=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);function Ni(n){if(Kl[n])return Kl[n];if(!hr[n])return n;var r=hr[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kf)return Kl[n]=r[a];return n}var Wf=Ni("animationend"),Xf=Ni("animationiteration"),Qf=Ni("animationstart"),AE=Ni("transitionrun"),RE=Ni("transitionstart"),NE=Ni("transitioncancel"),Zf=Ni("transitionend"),eh=new Map,Wl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wl.push("scrollEnd");function on(n,r){eh.set(n,r),Ci(r,[n])}var Oo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$t=[],pr=0,Xl=0;function Lo(){for(var n=pr,r=Xl=pr=0;r<n;){var a=$t[r];$t[r++]=null;var u=$t[r];$t[r++]=null;var g=$t[r];$t[r++]=null;var y=$t[r];if($t[r++]=null,u!==null&&g!==null){var T=u.pending;T===null?g.next=g:(g.next=T.next,T.next=g),u.pending=g}y!==0&&th(a,g,y)}}function qo(n,r,a,u){$t[pr++]=n,$t[pr++]=r,$t[pr++]=a,$t[pr++]=u,Xl|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ql(n,r,a,u){return qo(n,r,a,u),Bo(n)}function Mi(n,r){return qo(n,null,null,r),Bo(n)}function th(n,r,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var g=!1,y=n.return;y!==null;)y.childLanes|=a,u=y.alternate,u!==null&&(u.childLanes|=a),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&r!==null&&(g=31-Dt(a),n=y.hiddenUpdates,u=n[g],u===null?n[g]=[r]:u.push(r),r.lane=a|536870912),y):null}function Bo(n){if(50<Fs)throw Fs=0,ac=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var mr={};function ME(n,r,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(n,r,a,u){return new ME(n,r,a,u)}function Zl(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xn(n,r){var a=n.alternate;return a===null?(a=Pt(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function nh(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ho(n,r,a,u,g,y){var T=0;if(u=n,typeof n=="function")Zl(n)&&(T=1);else if(typeof n=="string")T=PS(n,a,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case K:return n=Pt(31,a,r,g),n.elementType=K,n.lanes=y,n;case C:return Ii(a.children,g,y,r);case A:T=8,g|=24;break;case k:return n=Pt(12,a,r,g|2),n.elementType=k,n.lanes=y,n;case H:return n=Pt(13,a,r,g),n.elementType=H,n.lanes=y,n;case F:return n=Pt(19,a,r,g),n.elementType=F,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:T=10;break e;case P:T=9;break e;case O:T=11;break e;case j:T=14;break e;case de:T=16,u=null;break e}T=29,a=Error(s(130,n===null?"null":typeof n,"")),u=null}return r=Pt(T,a,r,g),r.elementType=n,r.type=u,r.lanes=y,r}function Ii(n,r,a,u){return n=Pt(7,n,u,r),n.lanes=a,n}function eu(n,r,a){return n=Pt(6,n,null,r),n.lanes=a,n}function ih(n){var r=Pt(18,null,null,0);return r.stateNode=n,r}function tu(n,r,a){return r=Pt(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var rh=new WeakMap;function Yt(n,r){if(typeof n=="object"&&n!==null){var a=rh.get(n);return a!==void 0?a:(r={value:n,source:r,stack:tt(r)},rh.set(n,r),r)}return{value:n,source:r,stack:tt(r)}}var gr=[],yr=0,Go=null,ws=0,Jt=[],Kt=0,Xn=null,yn=1,vn="";function Cn(n,r){gr[yr++]=ws,gr[yr++]=Go,Go=n,ws=r}function sh(n,r,a){Jt[Kt++]=yn,Jt[Kt++]=vn,Jt[Kt++]=Xn,Xn=n;var u=yn;n=vn;var g=32-Dt(u)-1;u&=~(1<<g),a+=1;var y=32-Dt(r)+g;if(30<y){var T=g-g%5;y=(u&(1<<T)-1).toString(32),u>>=T,g-=T,yn=1<<32-Dt(r)+g|a<<g|u,vn=y+n}else yn=1<<y|a<<g|u,vn=n}function nu(n){n.return!==null&&(Cn(n,1),sh(n,1,0))}function iu(n){for(;n===Go;)Go=gr[--yr],gr[yr]=null,ws=gr[--yr],gr[yr]=null;for(;n===Xn;)Xn=Jt[--Kt],Jt[Kt]=null,vn=Jt[--Kt],Jt[Kt]=null,yn=Jt[--Kt],Jt[Kt]=null}function oh(n,r){Jt[Kt++]=yn,Jt[Kt++]=vn,Jt[Kt++]=Xn,yn=r.id,vn=r.overflow,Xn=n}var ht=null,Ve=null,Ae=!1,Qn=null,Wt=!1,ru=Error(s(519));function Zn(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bs(Yt(r,n)),ru}function ah(n){var r=n.stateNode,a=n.type,u=n.memoizedProps;switch(r[ft]=n,r[Tt]=u,a){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(a=0;a<$s.length;a++)Te($s[a],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":Te("invalid",r),Ef(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Te("invalid",r);break;case"textarea":Te("invalid",r),Tf(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||bm(r.textContent,a)?(u.popover!=null&&(Te("beforetoggle",r),Te("toggle",r)),u.onScroll!=null&&Te("scroll",r),u.onScrollEnd!=null&&Te("scrollend",r),u.onClick!=null&&(r.onclick=wn),r=!0):r=!1,r||Zn(n,!0)}function lh(n){for(ht=n.return;ht;)switch(ht.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:ht=ht.return}}function vr(n){if(n!==ht)return!1;if(!Ae)return lh(n),Ae=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Tc(n.type,n.memoizedProps)),a=!a),a&&Ve&&Zn(n),lh(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ve=Dm(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ve=Dm(n)}else r===27?(r=Ve,hi(n.type)?(n=Ac,Ac=null,Ve=n):Ve=r):Ve=ht?Qt(n.stateNode.nextSibling):null;return!0}function ki(){Ve=ht=null,Ae=!1}function su(){var n=Qn;return n!==null&&(At===null?At=n:At.push.apply(At,n),Qn=null),n}function bs(n){Qn===null?Qn=[n]:Qn.push(n)}var ou=D(null),Di=null,An=null;function ei(n,r,a){ne(ou,r._currentValue),r._currentValue=a}function Rn(n){n._currentValue=ou.current,Y(ou)}function au(n,r,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===a)break;n=n.return}}function lu(n,r,a,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;e:for(;y!==null;){var b=y;y=g;for(var N=0;N<r.length;N++)if(b.context===r[N]){y.lanes|=a,b=y.alternate,b!==null&&(b.lanes|=a),au(y.return,a,n),u||(T=null);break e}y=b.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(s(341));T.lanes|=a,y=T.alternate,y!==null&&(y.lanes|=a),au(T,a,n),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===n){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function _r(n,r,a,u){n=null;for(var g=r,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var b=g.type;Ut(g.pendingProps.value,T.value)||(n!==null?n.push(b):n=[b])}}else if(g===te.current){if(T=g.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(Xs):n=[Xs])}g=g.return}n!==null&&lu(r,n,a,u),r.flags|=262144}function Vo(n){for(n=n.firstContext;n!==null;){if(!Ut(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ui(n){Di=n,An=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function pt(n){return uh(Di,n)}function zo(n,r){return Di===null&&Ui(n),uh(n,r)}function uh(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},An===null){if(n===null)throw Error(s(308));An=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else An=An.next=r;return a}var IE=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},kE=t.unstable_scheduleCallback,DE=t.unstable_NormalPriority,nt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uu(){return{controller:new IE,data:new Map,refCount:0}}function xs(n){n.refCount--,n.refCount===0&&kE(DE,function(){n.controller.abort()})}var Cs=null,cu=0,Er=0,Sr=null;function UE(n,r){if(Cs===null){var a=Cs=[];cu=0,Er=hc(),Sr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return cu++,r.then(ch,ch),r}function ch(){if(--cu===0&&Cs!==null){Sr!==null&&(Sr.status="fulfilled");var n=Cs;Cs=null,Er=0,Sr=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function PE(n,r){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<a.length;g++)(0,a[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var dh=G.S;G.S=function(n,r){Jp=It(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&UE(n,r),dh!==null&&dh(n,r)};var Pi=D(null);function du(){var n=Pi.current;return n!==null?n:He.pooledCache}function Fo(n,r){r===null?ne(Pi,Pi.current):ne(Pi,r.pool)}function fh(){var n=du();return n===null?null:{parent:nt._currentValue,pool:n}}var Tr=Error(s(460)),fu=Error(s(474)),jo=Error(s(542)),$o={then:function(){}};function hh(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ph(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(wn,wn),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,gh(n),n;default:if(typeof r.status=="string")r.then(wn,wn);else{if(n=He,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,gh(n),n}throw Li=r,Tr}}function Oi(n){try{var r=n._init;return r(n._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Li=a,Tr):a}}var Li=null;function mh(){if(Li===null)throw Error(s(459));var n=Li;return Li=null,n}function gh(n){if(n===Tr||n===jo)throw Error(s(483))}var wr=null,As=0;function Yo(n){var r=As;return As+=1,wr===null&&(wr=[]),ph(wr,n,r)}function Rs(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Jo(n,r){throw r.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function yh(n){function r(U,I){if(n){var L=U.deletions;L===null?(U.deletions=[I],U.flags|=16):L.push(I)}}function a(U,I){if(!n)return null;for(;I!==null;)r(U,I),I=I.sibling;return null}function u(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function g(U,I){return U=xn(U,I),U.index=0,U.sibling=null,U}function y(U,I,L){return U.index=L,n?(L=U.alternate,L!==null?(L=L.index,L<I?(U.flags|=67108866,I):L):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function T(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function b(U,I,L,$){return I===null||I.tag!==6?(I=eu(L,U.mode,$),I.return=U,I):(I=g(I,L),I.return=U,I)}function N(U,I,L,$){var he=L.type;return he===C?z(U,I,L.props.children,$,L.key):I!==null&&(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===de&&Oi(he)===I.type)?(I=g(I,L.props),Rs(I,L),I.return=U,I):(I=Ho(L.type,L.key,L.props,null,U.mode,$),Rs(I,L),I.return=U,I)}function q(U,I,L,$){return I===null||I.tag!==4||I.stateNode.containerInfo!==L.containerInfo||I.stateNode.implementation!==L.implementation?(I=tu(L,U.mode,$),I.return=U,I):(I=g(I,L.children||[]),I.return=U,I)}function z(U,I,L,$,he){return I===null||I.tag!==7?(I=Ii(L,U.mode,$,he),I.return=U,I):(I=g(I,L),I.return=U,I)}function J(U,I,L){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=eu(""+I,U.mode,L),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case w:return L=Ho(I.type,I.key,I.props,null,U.mode,L),Rs(L,I),L.return=U,L;case x:return I=tu(I,U.mode,L),I.return=U,I;case de:return I=Oi(I),J(U,I,L)}if(ke(I)||Z(I))return I=Ii(I,U.mode,L,null),I.return=U,I;if(typeof I.then=="function")return J(U,Yo(I),L);if(I.$$typeof===R)return J(U,zo(U,I),L);Jo(U,I)}return null}function B(U,I,L,$){var he=I!==null?I.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return he!==null?null:b(U,I,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return L.key===he?N(U,I,L,$):null;case x:return L.key===he?q(U,I,L,$):null;case de:return L=Oi(L),B(U,I,L,$)}if(ke(L)||Z(L))return he!==null?null:z(U,I,L,$,null);if(typeof L.then=="function")return B(U,I,Yo(L),$);if(L.$$typeof===R)return B(U,I,zo(U,L),$);Jo(U,L)}return null}function V(U,I,L,$,he){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(L)||null,b(I,U,""+$,he);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return U=U.get($.key===null?L:$.key)||null,N(I,U,$,he);case x:return U=U.get($.key===null?L:$.key)||null,q(I,U,$,he);case de:return $=Oi($),V(U,I,L,$,he)}if(ke($)||Z($))return U=U.get(L)||null,z(I,U,$,he,null);if(typeof $.then=="function")return V(U,I,L,Yo($),he);if($.$$typeof===R)return V(U,I,L,zo(I,$),he);Jo(I,$)}return null}function se(U,I,L,$){for(var he=null,Ne=null,le=I,Ee=I=0,xe=null;le!==null&&Ee<L.length;Ee++){le.index>Ee?(xe=le,le=null):xe=le.sibling;var Me=B(U,le,L[Ee],$);if(Me===null){le===null&&(le=xe);break}n&&le&&Me.alternate===null&&r(U,le),I=y(Me,I,Ee),Ne===null?he=Me:Ne.sibling=Me,Ne=Me,le=xe}if(Ee===L.length)return a(U,le),Ae&&Cn(U,Ee),he;if(le===null){for(;Ee<L.length;Ee++)le=J(U,L[Ee],$),le!==null&&(I=y(le,I,Ee),Ne===null?he=le:Ne.sibling=le,Ne=le);return Ae&&Cn(U,Ee),he}for(le=u(le);Ee<L.length;Ee++)xe=V(le,U,Ee,L[Ee],$),xe!==null&&(n&&xe.alternate!==null&&le.delete(xe.key===null?Ee:xe.key),I=y(xe,I,Ee),Ne===null?he=xe:Ne.sibling=xe,Ne=xe);return n&&le.forEach(function(vi){return r(U,vi)}),Ae&&Cn(U,Ee),he}function me(U,I,L,$){if(L==null)throw Error(s(151));for(var he=null,Ne=null,le=I,Ee=I=0,xe=null,Me=L.next();le!==null&&!Me.done;Ee++,Me=L.next()){le.index>Ee?(xe=le,le=null):xe=le.sibling;var vi=B(U,le,Me.value,$);if(vi===null){le===null&&(le=xe);break}n&&le&&vi.alternate===null&&r(U,le),I=y(vi,I,Ee),Ne===null?he=vi:Ne.sibling=vi,Ne=vi,le=xe}if(Me.done)return a(U,le),Ae&&Cn(U,Ee),he;if(le===null){for(;!Me.done;Ee++,Me=L.next())Me=J(U,Me.value,$),Me!==null&&(I=y(Me,I,Ee),Ne===null?he=Me:Ne.sibling=Me,Ne=Me);return Ae&&Cn(U,Ee),he}for(le=u(le);!Me.done;Ee++,Me=L.next())Me=V(le,U,Ee,Me.value,$),Me!==null&&(n&&Me.alternate!==null&&le.delete(Me.key===null?Ee:Me.key),I=y(Me,I,Ee),Ne===null?he=Me:Ne.sibling=Me,Ne=Me);return n&&le.forEach(function($S){return r(U,$S)}),Ae&&Cn(U,Ee),he}function Be(U,I,L,$){if(typeof L=="object"&&L!==null&&L.type===C&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case w:e:{for(var he=L.key;I!==null;){if(I.key===he){if(he=L.type,he===C){if(I.tag===7){a(U,I.sibling),$=g(I,L.props.children),$.return=U,U=$;break e}}else if(I.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===de&&Oi(he)===I.type){a(U,I.sibling),$=g(I,L.props),Rs($,L),$.return=U,U=$;break e}a(U,I);break}else r(U,I);I=I.sibling}L.type===C?($=Ii(L.props.children,U.mode,$,L.key),$.return=U,U=$):($=Ho(L.type,L.key,L.props,null,U.mode,$),Rs($,L),$.return=U,U=$)}return T(U);case x:e:{for(he=L.key;I!==null;){if(I.key===he)if(I.tag===4&&I.stateNode.containerInfo===L.containerInfo&&I.stateNode.implementation===L.implementation){a(U,I.sibling),$=g(I,L.children||[]),$.return=U,U=$;break e}else{a(U,I);break}else r(U,I);I=I.sibling}$=tu(L,U.mode,$),$.return=U,U=$}return T(U);case de:return L=Oi(L),Be(U,I,L,$)}if(ke(L))return se(U,I,L,$);if(Z(L)){if(he=Z(L),typeof he!="function")throw Error(s(150));return L=he.call(L),me(U,I,L,$)}if(typeof L.then=="function")return Be(U,I,Yo(L),$);if(L.$$typeof===R)return Be(U,I,zo(U,L),$);Jo(U,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,I!==null&&I.tag===6?(a(U,I.sibling),$=g(I,L),$.return=U,U=$):(a(U,I),$=eu(L,U.mode,$),$.return=U,U=$),T(U)):a(U,I)}return function(U,I,L,$){try{As=0;var he=Be(U,I,L,$);return wr=null,he}catch(le){if(le===Tr||le===jo)throw le;var Ne=Pt(29,le,null,U.mode);return Ne.lanes=$,Ne.return=U,Ne}finally{}}}var qi=yh(!0),vh=yh(!1),ti=!1;function hu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pu(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ni(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ii(n,r,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(De&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Bo(n),th(n,null,a),r}return qo(n,u,r,a),Bo(n)}function Ns(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,a|=u,r.lanes=a,uf(n,a)}}function mu(n,r){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,a=a.next}while(a!==null);y===null?g=y=r:y=y.next=r}else g=y=r;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var gu=!1;function Ms(){if(gu){var n=Sr;if(n!==null)throw n}}function Is(n,r,a,u){gu=!1;var g=n.updateQueue;ti=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var N=b,q=N.next;N.next=null,T===null?y=q:T.next=q,T=N;var z=n.alternate;z!==null&&(z=z.updateQueue,b=z.lastBaseUpdate,b!==T&&(b===null?z.firstBaseUpdate=q:b.next=q,z.lastBaseUpdate=N))}if(y!==null){var J=g.baseState;T=0,z=q=N=null,b=y;do{var B=b.lane&-536870913,V=B!==b.lane;if(V?(be&B)===B:(u&B)===B){B!==0&&B===Er&&(gu=!0),z!==null&&(z=z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var se=n,me=b;B=r;var Be=a;switch(me.tag){case 1:if(se=me.payload,typeof se=="function"){J=se.call(Be,J,B);break e}J=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=me.payload,B=typeof se=="function"?se.call(Be,J,B):se,B==null)break e;J=E({},J,B);break e;case 2:ti=!0}}B=b.callback,B!==null&&(n.flags|=64,V&&(n.flags|=8192),V=g.callbacks,V===null?g.callbacks=[B]:V.push(B))}else V={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},z===null?(q=z=V,N=J):z=z.next=V,T|=B;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;V=b,b=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);z===null&&(N=J),g.baseState=N,g.firstBaseUpdate=q,g.lastBaseUpdate=z,y===null&&(g.shared.lanes=0),li|=T,n.lanes=T,n.memoizedState=J}}function _h(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function Eh(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)_h(a[n],r)}var br=D(null),Ko=D(0);function Sh(n,r){n=Ln,ne(Ko,n),ne(br,r),Ln=n|r.baseLanes}function yu(){ne(Ko,Ln),ne(br,br.current)}function vu(){Ln=Ko.current,Y(br),Y(Ko)}var Ot=D(null),Xt=null;function ri(n){var r=n.alternate;ne(Ze,Ze.current&1),ne(Ot,n),Xt===null&&(r===null||br.current!==null||r.memoizedState!==null)&&(Xt=n)}function _u(n){ne(Ze,Ze.current),ne(Ot,n),Xt===null&&(Xt=n)}function Th(n){n.tag===22?(ne(Ze,Ze.current),ne(Ot,n),Xt===null&&(Xt=n)):si()}function si(){ne(Ze,Ze.current),ne(Ot,Ot.current)}function Lt(n){Y(Ot),Xt===n&&(Xt=null),Y(Ze)}var Ze=D(0);function Wo(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xc(a)||Cc(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Nn=0,_e=null,Le=null,it=null,Xo=!1,xr=!1,Bi=!1,Qo=0,ks=0,Cr=null,OE=0;function Ke(){throw Error(s(321))}function Eu(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Ut(n[a],r[a]))return!1;return!0}function Su(n,r,a,u,g,y){return Nn=y,_e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=n===null||n.memoizedState===null?sp:Ou,Bi=!1,y=a(u,g),Bi=!1,xr&&(y=bh(r,a,u,g)),wh(n),y}function wh(n){G.H=Ps;var r=Le!==null&&Le.next!==null;if(Nn=0,it=Le=_e=null,Xo=!1,ks=0,Cr=null,r)throw Error(s(300));n===null||rt||(n=n.dependencies,n!==null&&Vo(n)&&(rt=!0))}function bh(n,r,a,u){_e=n;var g=0;do{if(xr&&(Cr=null),ks=0,xr=!1,25<=g)throw Error(s(301));if(g+=1,it=Le=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=op,y=r(a,u)}while(xr);return y}function LE(){var n=G.H,r=n.useState()[0];return r=typeof r.then=="function"?Ds(r):r,n=n.useState()[0],(Le!==null?Le.memoizedState:null)!==n&&(_e.flags|=1024),r}function Tu(){var n=Qo!==0;return Qo=0,n}function wu(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function bu(n){if(Xo){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Xo=!1}Nn=0,it=Le=_e=null,xr=!1,ks=Qo=0,Cr=null}function St(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?_e.memoizedState=it=n:it=it.next=n,it}function et(){if(Le===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=Le.next;var r=it===null?_e.memoizedState:it.next;if(r!==null)it=r,Le=n;else{if(n===null)throw _e.alternate===null?Error(s(467)):Error(s(310));Le=n,n={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},it===null?_e.memoizedState=it=n:it=it.next=n}return it}function Zo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ds(n){var r=ks;return ks+=1,Cr===null&&(Cr=[]),n=ph(Cr,n,r),r=_e,(it===null?r.memoizedState:it.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?sp:Ou),n}function ea(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ds(n);if(n.$$typeof===R)return pt(n)}throw Error(s(438,String(n)))}function xu(n){var r=null,a=_e.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zo(),_e.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),u=0;u<n;u++)a[u]=W;return r.index++,a}function Mn(n,r){return typeof r=="function"?r(n):r}function ta(n){var r=et();return Cu(r,Le,n)}function Cu(n,r,a){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var g=n.baseQueue,y=u.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}r.baseQueue=g=y,u.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{r=g.next;var b=T=null,N=null,q=r,z=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(be&J)===J:(Nn&J)===J){var B=q.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===Er&&(z=!0);else if((Nn&B)===B){q=q.next,B===Er&&(z=!0);continue}else J={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=J,T=y):N=N.next=J,_e.lanes|=B,li|=B;J=q.action,Bi&&a(y,J),y=q.hasEagerState?q.eagerState:a(y,J)}else B={lane:J,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},N===null?(b=N=B,T=y):N=N.next=B,_e.lanes|=J,li|=J;q=q.next}while(q!==null&&q!==r);if(N===null?T=y:N.next=b,!Ut(y,n.memoizedState)&&(rt=!0,z&&(a=Sr,a!==null)))throw a;n.memoizedState=y,n.baseState=T,n.baseQueue=N,u.lastRenderedState=y}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Au(n){var r=et(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var u=a.dispatch,g=a.pending,y=r.memoizedState;if(g!==null){a.pending=null;var T=g=g.next;do y=n(y,T.action),T=T.next;while(T!==g);Ut(y,r.memoizedState)||(rt=!0),r.memoizedState=y,r.baseQueue===null&&(r.baseState=y),a.lastRenderedState=y}return[y,u]}function xh(n,r,a){var u=_e,g=et(),y=Ae;if(y){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!Ut((Le||g).memoizedState,a);if(T&&(g.memoizedState=a,rt=!0),g=g.queue,Mu(Rh.bind(null,u,g,n),[n]),g.getSnapshot!==r||T||it!==null&&it.memoizedState.tag&1){if(u.flags|=2048,Ar(9,{destroy:void 0},Ah.bind(null,u,g,a,r),null),He===null)throw Error(s(349));y||(Nn&127)!==0||Ch(u,r,a)}return a}function Ch(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=_e.updateQueue,r===null?(r=Zo(),_e.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Ah(n,r,a,u){r.value=a,r.getSnapshot=u,Nh(r)&&Mh(n)}function Rh(n,r,a){return a(function(){Nh(r)&&Mh(n)})}function Nh(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Ut(n,a)}catch{return!0}}function Mh(n){var r=Mi(n,2);r!==null&&Rt(r,n,2)}function Ru(n){var r=St();if(typeof n=="function"){var a=n;if(n=a(),Bi){Jn(!0);try{a()}finally{Jn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:n},r}function Ih(n,r,a,u){return n.baseState=a,Cu(n,Le,typeof u=="function"?u:Mn)}function qE(n,r,a,u,g){if(ra(n))throw Error(s(485));if(n=r.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};G.T!==null?a(!0):y.isTransition=!1,u(y),a=r.pending,a===null?(y.next=r.pending=y,kh(r,y)):(y.next=a.next,r.pending=a.next=y)}}function kh(n,r){var a=r.action,u=r.payload,g=n.state;if(r.isTransition){var y=G.T,T={};G.T=T;try{var b=a(g,u),N=G.S;N!==null&&N(T,b),Dh(n,r,b)}catch(q){Nu(n,r,q)}finally{y!==null&&T.types!==null&&(y.types=T.types),G.T=y}}else try{y=a(g,u),Dh(n,r,y)}catch(q){Nu(n,r,q)}}function Dh(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Uh(n,r,u)},function(u){return Nu(n,r,u)}):Uh(n,r,a)}function Uh(n,r,a){r.status="fulfilled",r.value=a,Ph(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,kh(n,a)))}function Nu(n,r,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Ph(r),r=r.next;while(r!==u)}n.action=null}function Ph(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Oh(n,r){return r}function Lh(n,r){if(Ae){var a=He.formState;if(a!==null){e:{var u=_e;if(Ae){if(Ve){t:{for(var g=Ve,y=Wt;g.nodeType!==8;){if(!y){g=null;break t}if(g=Qt(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ve=Qt(g.nextSibling),u=g.data==="F!";break e}}Zn(u)}u=!1}u&&(r=a[0])}}return a=St(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oh,lastRenderedState:r},a.queue=u,a=np.bind(null,_e,u),u.dispatch=a,u=Ru(!1),y=Pu.bind(null,_e,!1,u.queue),u=St(),g={state:r,dispatch:null,action:n,pending:null},u.queue=g,a=qE.bind(null,_e,g,y,a),g.dispatch=a,u.memoizedState=n,[r,a,!1]}function qh(n){var r=et();return Bh(r,Le,n)}function Bh(n,r,a){if(r=Cu(n,r,Oh)[0],n=ta(Mn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ds(r)}catch(T){throw T===Tr?jo:T}else u=r;r=et();var g=r.queue,y=g.dispatch;return a!==r.memoizedState&&(_e.flags|=2048,Ar(9,{destroy:void 0},BE.bind(null,g,a),null)),[u,y,n]}function BE(n,r){n.action=r}function Hh(n){var r=et(),a=Le;if(a!==null)return Bh(r,a,n);et(),r=r.memoizedState,a=et();var u=a.queue.dispatch;return a.memoizedState=n,[r,u,!1]}function Ar(n,r,a,u){return n={tag:n,create:a,deps:u,inst:r,next:null},r=_e.updateQueue,r===null&&(r=Zo(),_e.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,r.lastEffect=n),n}function Gh(){return et().memoizedState}function na(n,r,a,u){var g=St();_e.flags|=n,g.memoizedState=Ar(1|r,{destroy:void 0},a,u===void 0?null:u)}function ia(n,r,a,u){var g=et();u=u===void 0?null:u;var y=g.memoizedState.inst;Le!==null&&u!==null&&Eu(u,Le.memoizedState.deps)?g.memoizedState=Ar(r,y,a,u):(_e.flags|=n,g.memoizedState=Ar(1|r,y,a,u))}function Vh(n,r){na(8390656,8,n,r)}function Mu(n,r){ia(2048,8,n,r)}function HE(n){_e.flags|=4;var r=_e.updateQueue;if(r===null)r=Zo(),_e.updateQueue=r,r.events=[n];else{var a=r.events;a===null?r.events=[n]:a.push(n)}}function zh(n){var r=et().memoizedState;return HE({ref:r,nextImpl:n}),function(){if((De&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Fh(n,r){return ia(4,2,n,r)}function jh(n,r){return ia(4,4,n,r)}function $h(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Yh(n,r,a){a=a!=null?a.concat([n]):null,ia(4,4,$h.bind(null,r,n),a)}function Iu(){}function Jh(n,r){var a=et();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Eu(r,u[1])?u[0]:(a.memoizedState=[n,r],n)}function Kh(n,r){var a=et();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Eu(r,u[1]))return u[0];if(u=n(),Bi){Jn(!0);try{n()}finally{Jn(!1)}}return a.memoizedState=[u,r],u}function ku(n,r,a){return a===void 0||(Nn&1073741824)!==0&&(be&261930)===0?n.memoizedState=r:(n.memoizedState=a,n=Wp(),_e.lanes|=n,li|=n,a)}function Wh(n,r,a,u){return Ut(a,r)?a:br.current!==null?(n=ku(n,a,u),Ut(n,r)||(rt=!0),n):(Nn&42)===0||(Nn&1073741824)!==0&&(be&261930)===0?(rt=!0,n.memoizedState=a):(n=Wp(),_e.lanes|=n,li|=n,r)}function Xh(n,r,a,u,g){var y=X.p;X.p=y!==0&&8>y?y:8;var T=G.T,b={};G.T=b,Pu(n,!1,r,a);try{var N=g(),q=G.S;if(q!==null&&q(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var z=PE(N,u);Us(n,r,z,Ht(n))}else Us(n,r,u,Ht(n))}catch(J){Us(n,r,{then:function(){},status:"rejected",reason:J},Ht())}finally{X.p=y,T!==null&&b.types!==null&&(T.types=b.types),G.T=T}}function GE(){}function Du(n,r,a,u){if(n.tag!==5)throw Error(s(476));var g=Qh(n).queue;Xh(n,g,r,re,a===null?GE:function(){return Zh(n),a(u)})}function Qh(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:re},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Zh(n){var r=Qh(n);r.next===null&&(r=n.alternate.memoizedState),Us(n,r.next.queue,{},Ht())}function Uu(){return pt(Xs)}function ep(){return et().memoizedState}function tp(){return et().memoizedState}function VE(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Ht();n=ni(a);var u=ii(r,n,a);u!==null&&(Rt(u,r,a),Ns(u,r,a)),r={cache:uu()},n.payload=r;return}r=r.return}}function zE(n,r,a){var u=Ht();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ra(n)?ip(r,a):(a=Ql(n,r,a,u),a!==null&&(Rt(a,n,u),rp(a,r,u)))}function np(n,r,a){var u=Ht();Us(n,r,a,u)}function Us(n,r,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ra(n))ip(r,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=r.lastRenderedReducer,y!==null))try{var T=r.lastRenderedState,b=y(T,a);if(g.hasEagerState=!0,g.eagerState=b,Ut(b,T))return qo(n,r,g,0),He===null&&Lo(),!1}catch{}finally{}if(a=Ql(n,r,g,u),a!==null)return Rt(a,n,u),rp(a,r,u),!0}return!1}function Pu(n,r,a,u){if(u={lane:2,revertLane:hc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ra(n)){if(r)throw Error(s(479))}else r=Ql(n,a,u,2),r!==null&&Rt(r,n,2)}function ra(n){var r=n.alternate;return n===_e||r!==null&&r===_e}function ip(n,r){xr=Xo=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function rp(n,r,a){if((a&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,a|=u,r.lanes=a,uf(n,a)}}var Ps={readContext:pt,use:ea,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useLayoutEffect:Ke,useInsertionEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useSyncExternalStore:Ke,useId:Ke,useHostTransitionStatus:Ke,useFormState:Ke,useActionState:Ke,useOptimistic:Ke,useMemoCache:Ke,useCacheRefresh:Ke};Ps.useEffectEvent=Ke;var sp={readContext:pt,use:ea,useCallback:function(n,r){return St().memoizedState=[n,r===void 0?null:r],n},useContext:pt,useEffect:Vh,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,na(4194308,4,$h.bind(null,r,n),a)},useLayoutEffect:function(n,r){return na(4194308,4,n,r)},useInsertionEffect:function(n,r){na(4,2,n,r)},useMemo:function(n,r){var a=St();r=r===void 0?null:r;var u=n();if(Bi){Jn(!0);try{n()}finally{Jn(!1)}}return a.memoizedState=[u,r],u},useReducer:function(n,r,a){var u=St();if(a!==void 0){var g=a(r);if(Bi){Jn(!0);try{a(r)}finally{Jn(!1)}}}else g=r;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=zE.bind(null,_e,n),[u.memoizedState,n]},useRef:function(n){var r=St();return n={current:n},r.memoizedState=n},useState:function(n){n=Ru(n);var r=n.queue,a=np.bind(null,_e,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:Iu,useDeferredValue:function(n,r){var a=St();return ku(a,n,r)},useTransition:function(){var n=Ru(!1);return n=Xh.bind(null,_e,n.queue,!0,!1),St().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var u=_e,g=St();if(Ae){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),He===null)throw Error(s(349));(be&127)!==0||Ch(u,r,a)}g.memoizedState=a;var y={value:a,getSnapshot:r};return g.queue=y,Vh(Rh.bind(null,u,y,n),[n]),u.flags|=2048,Ar(9,{destroy:void 0},Ah.bind(null,u,y,a,r),null),a},useId:function(){var n=St(),r=He.identifierPrefix;if(Ae){var a=vn,u=yn;a=(u&~(1<<32-Dt(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Qo++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=OE++,r="_"+r+"r_"+a.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:Uu,useFormState:Lh,useActionState:Lh,useOptimistic:function(n){var r=St();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Pu.bind(null,_e,!0,a),a.dispatch=r,[n,r]},useMemoCache:xu,useCacheRefresh:function(){return St().memoizedState=VE.bind(null,_e)},useEffectEvent:function(n){var r=St(),a={impl:n};return r.memoizedState=a,function(){if((De&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Ou={readContext:pt,use:ea,useCallback:Jh,useContext:pt,useEffect:Mu,useImperativeHandle:Yh,useInsertionEffect:Fh,useLayoutEffect:jh,useMemo:Kh,useReducer:ta,useRef:Gh,useState:function(){return ta(Mn)},useDebugValue:Iu,useDeferredValue:function(n,r){var a=et();return Wh(a,Le.memoizedState,n,r)},useTransition:function(){var n=ta(Mn)[0],r=et().memoizedState;return[typeof n=="boolean"?n:Ds(n),r]},useSyncExternalStore:xh,useId:ep,useHostTransitionStatus:Uu,useFormState:qh,useActionState:qh,useOptimistic:function(n,r){var a=et();return Ih(a,Le,n,r)},useMemoCache:xu,useCacheRefresh:tp};Ou.useEffectEvent=zh;var op={readContext:pt,use:ea,useCallback:Jh,useContext:pt,useEffect:Mu,useImperativeHandle:Yh,useInsertionEffect:Fh,useLayoutEffect:jh,useMemo:Kh,useReducer:Au,useRef:Gh,useState:function(){return Au(Mn)},useDebugValue:Iu,useDeferredValue:function(n,r){var a=et();return Le===null?ku(a,n,r):Wh(a,Le.memoizedState,n,r)},useTransition:function(){var n=Au(Mn)[0],r=et().memoizedState;return[typeof n=="boolean"?n:Ds(n),r]},useSyncExternalStore:xh,useId:ep,useHostTransitionStatus:Uu,useFormState:Hh,useActionState:Hh,useOptimistic:function(n,r){var a=et();return Le!==null?Ih(a,Le,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:xu,useCacheRefresh:tp};op.useEffectEvent=zh;function Lu(n,r,a,u){r=n.memoizedState,a=a(u,r),a=a==null?r:E({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var qu={enqueueSetState:function(n,r,a){n=n._reactInternals;var u=Ht(),g=ni(u);g.payload=r,a!=null&&(g.callback=a),r=ii(n,g,u),r!==null&&(Rt(r,n,u),Ns(r,n,u))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var u=Ht(),g=ni(u);g.tag=1,g.payload=r,a!=null&&(g.callback=a),r=ii(n,g,u),r!==null&&(Rt(r,n,u),Ns(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Ht(),u=ni(a);u.tag=2,r!=null&&(u.callback=r),r=ii(n,u,a),r!==null&&(Rt(r,n,a),Ns(r,n,a))}};function ap(n,r,a,u,g,y,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,T):r.prototype&&r.prototype.isPureReactComponent?!Ss(a,u)||!Ss(g,y):!0}function lp(n,r,a,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==n&&qu.enqueueReplaceState(r,r.state,null)}function Hi(n,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(n=n.defaultProps){a===r&&(a=E({},a));for(var g in n)a[g]===void 0&&(a[g]=n[g])}return a}function up(n){Oo(n)}function cp(n){console.error(n)}function dp(n){Oo(n)}function sa(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function fp(n,r,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Bu(n,r,a){return a=ni(a),a.tag=3,a.payload={element:null},a.callback=function(){sa(n,r)},a}function hp(n){return n=ni(n),n.tag=3,n}function pp(n,r,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var y=u.value;n.payload=function(){return g(y)},n.callback=function(){fp(r,a,u)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){fp(r,a,u),typeof g!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function FE(n,r,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&_r(r,a,g,!0),a=Ot.current,a!==null){switch(a.tag){case 31:case 13:return Xt===null?ya():a.alternate===null&&We===0&&(We=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===$o?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),cc(n,u,g)),!1;case 22:return a.flags|=65536,u===$o?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),cc(n,u,g)),!1}throw Error(s(435,a.tag))}return cc(n,u,g),ya(),!1}if(Ae)return r=Ot.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==ru&&(n=Error(s(422),{cause:u}),bs(Yt(n,a)))):(u!==ru&&(r=Error(s(423),{cause:u}),bs(Yt(r,a))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=Yt(u,a),g=Bu(n.stateNode,u,g),mu(n,g),We!==4&&(We=2)),!1;var y=Error(s(520),{cause:u});if(y=Yt(y,a),zs===null?zs=[y]:zs.push(y),We!==4&&(We=2),r===null)return!0;u=Yt(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=g&-g,a.lanes|=n,n=Bu(a.stateNode,u,n),mu(a,n),!1;case 1:if(r=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ui===null||!ui.has(y))))return a.flags|=65536,g&=-g,a.lanes|=g,g=hp(g),pp(g,n,a,u),mu(a,g),!1}a=a.return}while(a!==null);return!1}var Hu=Error(s(461)),rt=!1;function mt(n,r,a,u){r.child=n===null?vh(r,null,a,u):qi(r,n.child,a,u)}function mp(n,r,a,u,g){a=a.render;var y=r.ref;if("ref"in u){var T={};for(var b in u)b!=="ref"&&(T[b]=u[b])}else T=u;return Ui(r),u=Su(n,r,a,T,y,g),b=Tu(),n!==null&&!rt?(wu(n,r,g),In(n,r,g)):(Ae&&b&&nu(r),r.flags|=1,mt(n,r,u,g),r.child)}function gp(n,r,a,u,g){if(n===null){var y=a.type;return typeof y=="function"&&!Zl(y)&&y.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=y,yp(n,r,y,u,g)):(n=Ho(a.type,null,u,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(y=n.child,!Ju(n,g)){var T=y.memoizedProps;if(a=a.compare,a=a!==null?a:Ss,a(T,u)&&n.ref===r.ref)return In(n,r,g)}return r.flags|=1,n=xn(y,u),n.ref=r.ref,n.return=r,r.child=n}function yp(n,r,a,u,g){if(n!==null){var y=n.memoizedProps;if(Ss(y,u)&&n.ref===r.ref)if(rt=!1,r.pendingProps=u=y,Ju(n,g))(n.flags&131072)!==0&&(rt=!0);else return r.lanes=n.lanes,In(n,r,g)}return Gu(n,r,a,u,g)}function vp(n,r,a,u){var g=u.children,y=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(y=y!==null?y.baseLanes|a:a,n!==null){for(u=r.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~y}else u=0,r.child=null;return _p(n,r,y,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Fo(r,y!==null?y.cachePool:null),y!==null?Sh(r,y):yu(),Th(r);else return u=r.lanes=536870912,_p(n,r,y!==null?y.baseLanes|a:a,a,u)}else y!==null?(Fo(r,y.cachePool),Sh(r,y),si(),r.memoizedState=null):(n!==null&&Fo(r,null),yu(),si());return mt(n,r,g,a),r.child}function Os(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function _p(n,r,a,u,g){var y=du();return y=y===null?null:{parent:nt._currentValue,pool:y},r.memoizedState={baseLanes:a,cachePool:y},n!==null&&Fo(r,null),yu(),Th(r),n!==null&&_r(n,r,u,!0),r.childLanes=g,null}function oa(n,r){return r=la({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Ep(n,r,a){return qi(r,n.child,null,a),n=oa(r,r.pendingProps),n.flags|=2,Lt(r),r.memoizedState=null,n}function jE(n,r,a){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Ae){if(u.mode==="hidden")return n=oa(r,u),r.lanes=536870912,Os(null,n);if(_u(r),(n=Ve)?(n=km(n,Wt),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Xn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},a=ih(n),a.return=r,r.child=a,ht=r,Ve=null)):n=null,n===null)throw Zn(r);return r.lanes=536870912,null}return oa(r,u)}var y=n.memoizedState;if(y!==null){var T=y.dehydrated;if(_u(r),g)if(r.flags&256)r.flags&=-257,r=Ep(n,r,a);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(rt||_r(n,r,a,!1),g=(a&n.childLanes)!==0,rt||g){if(u=He,u!==null&&(T=cf(u,a),T!==0&&T!==y.retryLane))throw y.retryLane=T,Mi(n,T),Rt(u,n,T),Hu;ya(),r=Ep(n,r,a)}else n=y.treeContext,Ve=Qt(T.nextSibling),ht=r,Ae=!0,Qn=null,Wt=!1,n!==null&&oh(r,n),r=oa(r,u),r.flags|=4096;return r}return n=xn(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function aa(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Gu(n,r,a,u,g){return Ui(r),a=Su(n,r,a,u,void 0,g),u=Tu(),n!==null&&!rt?(wu(n,r,g),In(n,r,g)):(Ae&&u&&nu(r),r.flags|=1,mt(n,r,a,g),r.child)}function Sp(n,r,a,u,g,y){return Ui(r),r.updateQueue=null,a=bh(r,u,a,g),wh(n),u=Tu(),n!==null&&!rt?(wu(n,r,y),In(n,r,y)):(Ae&&u&&nu(r),r.flags|=1,mt(n,r,a,y),r.child)}function Tp(n,r,a,u,g){if(Ui(r),r.stateNode===null){var y=mr,T=a.contextType;typeof T=="object"&&T!==null&&(y=pt(T)),y=new a(u,y),r.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=qu,r.stateNode=y,y._reactInternals=r,y=r.stateNode,y.props=u,y.state=r.memoizedState,y.refs={},hu(r),T=a.contextType,y.context=typeof T=="object"&&T!==null?pt(T):mr,y.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Lu(r,a,T,u),y.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&qu.enqueueReplaceState(y,y.state,null),Is(r,u,y,g),Ms(),y.state=r.memoizedState),typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){y=r.stateNode;var b=r.memoizedProps,N=Hi(a,b);y.props=N;var q=y.context,z=a.contextType;T=mr,typeof z=="object"&&z!==null&&(T=pt(z));var J=a.getDerivedStateFromProps;z=typeof J=="function"||typeof y.getSnapshotBeforeUpdate=="function",b=r.pendingProps!==b,z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b||q!==T)&&lp(r,y,u,T),ti=!1;var B=r.memoizedState;y.state=B,Is(r,u,y,g),Ms(),q=r.memoizedState,b||B!==q||ti?(typeof J=="function"&&(Lu(r,a,J,u),q=r.memoizedState),(N=ti||ap(r,a,N,u,B,q,T))?(z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(r.flags|=4194308)):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),y.props=u,y.state=q,y.context=T,u=N):(typeof y.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{y=r.stateNode,pu(n,r),T=r.memoizedProps,z=Hi(a,T),y.props=z,J=r.pendingProps,B=y.context,q=a.contextType,N=mr,typeof q=="object"&&q!==null&&(N=pt(q)),b=a.getDerivedStateFromProps,(q=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==J||B!==N)&&lp(r,y,u,N),ti=!1,B=r.memoizedState,y.state=B,Is(r,u,y,g),Ms();var V=r.memoizedState;T!==J||B!==V||ti||n!==null&&n.dependencies!==null&&Vo(n.dependencies)?(typeof b=="function"&&(Lu(r,a,b,u),V=r.memoizedState),(z=ti||ap(r,a,z,u,B,V,N)||n!==null&&n.dependencies!==null&&Vo(n.dependencies))?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,V,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,V,N)),typeof y.componentDidUpdate=="function"&&(r.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=V),y.props=u,y.state=V,y.context=N,u=z):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&B===n.memoizedState||(r.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&B===n.memoizedState||(r.flags|=1024),u=!1)}return y=u,aa(n,r),u=(r.flags&128)!==0,y||u?(y=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:y.render(),r.flags|=1,n!==null&&u?(r.child=qi(r,n.child,null,g),r.child=qi(r,null,a,g)):mt(n,r,a,g),r.memoizedState=y.state,n=r.child):n=In(n,r,g),n}function wp(n,r,a,u){return ki(),r.flags|=256,mt(n,r,a,u),r.child}var Vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zu(n){return{baseLanes:n,cachePool:fh()}}function Fu(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Bt),n}function bp(n,r,a){var u=r.pendingProps,g=!1,y=(r.flags&128)!==0,T;if((T=y)||(T=n!==null&&n.memoizedState===null?!1:(Ze.current&2)!==0),T&&(g=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,n===null){if(Ae){if(g?ri(r):si(),(n=Ve)?(n=km(n,Wt),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Xn!==null?{id:yn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},a=ih(n),a.return=r,r.child=a,ht=r,Ve=null)):n=null,n===null)throw Zn(r);return Cc(n)?r.lanes=32:r.lanes=536870912,null}var b=u.children;return u=u.fallback,g?(si(),g=r.mode,b=la({mode:"hidden",children:b},g),u=Ii(u,g,a,null),b.return=r,u.return=r,b.sibling=u,r.child=b,u=r.child,u.memoizedState=zu(a),u.childLanes=Fu(n,T,a),r.memoizedState=Vu,Os(null,u)):(ri(r),ju(r,b))}var N=n.memoizedState;if(N!==null&&(b=N.dehydrated,b!==null)){if(y)r.flags&256?(ri(r),r.flags&=-257,r=$u(n,r,a)):r.memoizedState!==null?(si(),r.child=n.child,r.flags|=128,r=null):(si(),b=u.fallback,g=r.mode,u=la({mode:"visible",children:u.children},g),b=Ii(b,g,a,null),b.flags|=2,u.return=r,b.return=r,u.sibling=b,r.child=u,qi(r,n.child,null,a),u=r.child,u.memoizedState=zu(a),u.childLanes=Fu(n,T,a),r.memoizedState=Vu,r=Os(null,u));else if(ri(r),Cc(b)){if(T=b.nextSibling&&b.nextSibling.dataset,T)var q=T.dgst;T=q,u=Error(s(419)),u.stack="",u.digest=T,bs({value:u,source:null,stack:null}),r=$u(n,r,a)}else if(rt||_r(n,r,a,!1),T=(a&n.childLanes)!==0,rt||T){if(T=He,T!==null&&(u=cf(T,a),u!==0&&u!==N.retryLane))throw N.retryLane=u,Mi(n,u),Rt(T,n,u),Hu;xc(b)||ya(),r=$u(n,r,a)}else xc(b)?(r.flags|=192,r.child=n.child,r=null):(n=N.treeContext,Ve=Qt(b.nextSibling),ht=r,Ae=!0,Qn=null,Wt=!1,n!==null&&oh(r,n),r=ju(r,u.children),r.flags|=4096);return r}return g?(si(),b=u.fallback,g=r.mode,N=n.child,q=N.sibling,u=xn(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,q!==null?b=xn(q,b):(b=Ii(b,g,a,null),b.flags|=2),b.return=r,u.return=r,u.sibling=b,r.child=u,Os(null,u),u=r.child,b=n.child.memoizedState,b===null?b=zu(a):(g=b.cachePool,g!==null?(N=nt._currentValue,g=g.parent!==N?{parent:N,pool:N}:g):g=fh(),b={baseLanes:b.baseLanes|a,cachePool:g}),u.memoizedState=b,u.childLanes=Fu(n,T,a),r.memoizedState=Vu,Os(n.child,u)):(ri(r),a=n.child,n=a.sibling,a=xn(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,n!==null&&(T=r.deletions,T===null?(r.deletions=[n],r.flags|=16):T.push(n)),r.child=a,r.memoizedState=null,a)}function ju(n,r){return r=la({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function la(n,r){return n=Pt(22,n,null,r),n.lanes=0,n}function $u(n,r,a){return qi(r,n.child,null,a),n=ju(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function xp(n,r,a){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),au(n.return,r,a)}function Yu(n,r,a,u,g,y){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:y}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=a,T.tailMode=g,T.treeForkCount=y)}function Cp(n,r,a){var u=r.pendingProps,g=u.revealOrder,y=u.tail;u=u.children;var T=Ze.current,b=(T&2)!==0;if(b?(T=T&1|2,r.flags|=128):T&=1,ne(Ze,T),mt(n,r,u,a),u=Ae?ws:0,!b&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&xp(n,a,r);else if(n.tag===19)xp(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(a=r.child,g=null;a!==null;)n=a.alternate,n!==null&&Wo(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=r.child,r.child=null):(g=a.sibling,a.sibling=null),Yu(r,!1,g,a,y,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&Wo(n)===null){r.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Yu(r,!0,a,null,y,u);break;case"together":Yu(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function In(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),li|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(_r(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=xn(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=xn(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Ju(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Vo(n)))}function $E(n,r,a){switch(r.tag){case 3:oe(r,r.stateNode.containerInfo),ei(r,nt,n.memoizedState.cache),ki();break;case 27:case 5:at(r);break;case 4:oe(r,r.stateNode.containerInfo);break;case 10:ei(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,_u(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(ri(r),r.flags|=128,null):(a&r.child.childLanes)!==0?bp(n,r,a):(ri(r),n=In(n,r,a),n!==null?n.sibling:null);ri(r);break;case 19:var g=(n.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(_r(n,r,a,!1),u=(a&r.childLanes)!==0),g){if(u)return Cp(n,r,a);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ne(Ze,Ze.current),u)break;return null;case 22:return r.lanes=0,vp(n,r,a,r.pendingProps);case 24:ei(r,nt,n.memoizedState.cache)}return In(n,r,a)}function Ap(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)rt=!0;else{if(!Ju(n,a)&&(r.flags&128)===0)return rt=!1,$E(n,r,a);rt=(n.flags&131072)!==0}else rt=!1,Ae&&(r.flags&1048576)!==0&&sh(r,ws,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=Oi(r.elementType),r.type=n,typeof n=="function")Zl(n)?(u=Hi(n,u),r.tag=1,r=Tp(null,r,n,u,a)):(r.tag=0,r=Gu(null,r,n,u,a));else{if(n!=null){var g=n.$$typeof;if(g===O){r.tag=11,r=mp(null,r,n,u,a);break e}else if(g===j){r.tag=14,r=gp(null,r,n,u,a);break e}}throw r=we(n)||n,Error(s(306,r,""))}}return r;case 0:return Gu(n,r,r.type,r.pendingProps,a);case 1:return u=r.type,g=Hi(u,r.pendingProps),Tp(n,r,u,g,a);case 3:e:{if(oe(r,r.stateNode.containerInfo),n===null)throw Error(s(387));u=r.pendingProps;var y=r.memoizedState;g=y.element,pu(n,r),Is(r,u,null,a);var T=r.memoizedState;if(u=T.cache,ei(r,nt,u),u!==y.cache&&lu(r,[nt],a,!0),Ms(),u=T.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=y,r.memoizedState=y,r.flags&256){r=wp(n,r,u,a);break e}else if(u!==g){g=Yt(Error(s(424)),r),bs(g),r=wp(n,r,u,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=Qt(n.firstChild),ht=r,Ae=!0,Qn=null,Wt=!0,a=vh(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ki(),u===g){r=In(n,r,a);break e}mt(n,r,u,a)}r=r.child}return r;case 26:return aa(n,r),n===null?(a=qm(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ae||(a=r.type,n=r.pendingProps,u=ba(pe.current).createElement(a),u[ft]=r,u[Tt]=n,gt(u,a,n),ct(u),r.stateNode=u):r.memoizedState=qm(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return at(r),n===null&&Ae&&(u=r.stateNode=Pm(r.type,r.pendingProps,pe.current),ht=r,Wt=!0,g=Ve,hi(r.type)?(Ac=g,Ve=Qt(u.firstChild)):Ve=g),mt(n,r,r.pendingProps.children,a),aa(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Ae&&((g=u=Ve)&&(u=TS(u,r.type,r.pendingProps,Wt),u!==null?(r.stateNode=u,ht=r,Ve=Qt(u.firstChild),Wt=!1,g=!0):g=!1),g||Zn(r)),at(r),g=r.type,y=r.pendingProps,T=n!==null?n.memoizedProps:null,u=y.children,Tc(g,y)?u=null:T!==null&&Tc(g,T)&&(r.flags|=32),r.memoizedState!==null&&(g=Su(n,r,LE,null,null,a),Xs._currentValue=g),aa(n,r),mt(n,r,u,a),r.child;case 6:return n===null&&Ae&&((n=a=Ve)&&(a=wS(a,r.pendingProps,Wt),a!==null?(r.stateNode=a,ht=r,Ve=null,n=!0):n=!1),n||Zn(r)),null;case 13:return bp(n,r,a);case 4:return oe(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=qi(r,null,u,a):mt(n,r,u,a),r.child;case 11:return mp(n,r,r.type,r.pendingProps,a);case 7:return mt(n,r,r.pendingProps,a),r.child;case 8:return mt(n,r,r.pendingProps.children,a),r.child;case 12:return mt(n,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,ei(r,r.type,u.value),mt(n,r,u.children,a),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,Ui(r),g=pt(g),u=u(g),r.flags|=1,mt(n,r,u,a),r.child;case 14:return gp(n,r,r.type,r.pendingProps,a);case 15:return yp(n,r,r.type,r.pendingProps,a);case 19:return Cp(n,r,a);case 31:return jE(n,r,a);case 22:return vp(n,r,a,r.pendingProps);case 24:return Ui(r),u=pt(nt),n===null?(g=du(),g===null&&(g=He,y=uu(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=a),g=y),r.memoizedState={parent:u,cache:g},hu(r),ei(r,nt,g)):((n.lanes&a)!==0&&(pu(n,r),Is(r,null,null,a),Ms()),g=n.memoizedState,y=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ei(r,nt,u)):(u=y.cache,ei(r,nt,u),u!==g.cache&&lu(r,[nt],a,!0))),mt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function kn(n){n.flags|=4}function Ku(n,r,a,u,g){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(em())n.flags|=8192;else throw Li=$o,fu}else n.flags&=-16777217}function Rp(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zm(r))if(em())n.flags|=8192;else throw Li=$o,fu}function ua(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?af():536870912,n.lanes|=r,Ir|=r)}function Ls(n,r){if(!Ae)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ze(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(r)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=a,r}function YE(n,r,a){var u=r.pendingProps;switch(iu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(r),null;case 1:return ze(r),null;case 3:return a=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Rn(nt),ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(vr(r)?kn(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,su())),ze(r),null;case 26:var g=r.type,y=r.memoizedState;return n===null?(kn(r),y!==null?(ze(r),Rp(r,y)):(ze(r),Ku(r,g,null,u,a))):y?y!==n.memoizedState?(kn(r),ze(r),Rp(r,y)):(ze(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&kn(r),ze(r),Ku(r,g,n,u,a)),null;case 27:if(Qe(r),a=pe.current,g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&kn(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ze(r),null}n=ee.current,vr(r)?ah(r):(n=Pm(g,u,a),r.stateNode=n,kn(r))}return ze(r),null;case 5:if(Qe(r),g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&kn(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return ze(r),null}if(y=ee.current,vr(r))ah(r);else{var T=ba(pe.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?T.createElement(g,{is:u.is}):T.createElement(g)}}y[ft]=r,y[Tt]=u;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=y;e:switch(gt(y,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&kn(r)}}return ze(r),Ku(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,a),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&kn(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(n=pe.current,vr(r)){if(n=r.stateNode,a=r.memoizedProps,u=null,g=ht,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[ft]=r,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||bm(n.nodeValue,a)),n||Zn(r,!0)}else n=ba(n).createTextNode(u),n[ft]=r,r.stateNode=n}return ze(r),null;case 31:if(a=r.memoizedState,n===null||n.memoizedState!==null){if(u=vr(r),a!==null){if(n===null){if(!u)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[ft]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ze(r),n=!1}else a=su(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=a),n=!0;if(!n)return r.flags&256?(Lt(r),r):(Lt(r),null);if((r.flags&128)!==0)throw Error(s(558))}return ze(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=vr(r),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[ft]=r}else ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ze(r),g=!1}else g=su(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Lt(r),r):(Lt(r),null)}return Lt(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,n=n!==null&&n.memoizedState!==null,a&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==g&&(u.flags|=2048)),a!==n&&a&&(r.child.flags|=8192),ua(r,r.updateQueue),ze(r),null);case 4:return ae(),n===null&&yc(r.stateNode.containerInfo),ze(r),null;case 10:return Rn(r.type),ze(r),null;case 19:if(Y(Ze),u=r.memoizedState,u===null)return ze(r),null;if(g=(r.flags&128)!==0,y=u.rendering,y===null)if(g)Ls(u,!1);else{if(We!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(y=Wo(n),y!==null){for(r.flags|=128,Ls(u,!1),n=y.updateQueue,r.updateQueue=n,ua(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)nh(a,n),a=a.sibling;return ne(Ze,Ze.current&1|2),Ae&&Cn(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&It()>pa&&(r.flags|=128,g=!0,Ls(u,!1),r.lanes=4194304)}else{if(!g)if(n=Wo(y),n!==null){if(r.flags|=128,g=!0,n=n.updateQueue,r.updateQueue=n,ua(r,n),Ls(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ae)return ze(r),null}else 2*It()-u.renderingStartTime>pa&&a!==536870912&&(r.flags|=128,g=!0,Ls(u,!1),r.lanes=4194304);u.isBackwards?(y.sibling=r.child,r.child=y):(n=u.last,n!==null?n.sibling=y:r.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=It(),n.sibling=null,a=Ze.current,ne(Ze,g?a&1|2:a&1),Ae&&Cn(r,u.treeForkCount),n):(ze(r),null);case 22:case 23:return Lt(r),vu(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ze(r),r.subtreeFlags&6&&(r.flags|=8192)):ze(r),a=r.updateQueue,a!==null&&ua(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),n!==null&&Y(Pi),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Rn(nt),ze(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function JE(n,r){switch(iu(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Rn(nt),ae(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Qe(r),null;case 31:if(r.memoizedState!==null){if(Lt(r),r.alternate===null)throw Error(s(340));ki()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Lt(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ki()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Y(Ze),null;case 4:return ae(),null;case 10:return Rn(r.type),null;case 22:case 23:return Lt(r),vu(),n!==null&&Y(Pi),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Rn(nt),null;case 25:return null;default:return null}}function Np(n,r){switch(iu(r),r.tag){case 3:Rn(nt),ae();break;case 26:case 27:case 5:Qe(r);break;case 4:ae();break;case 31:r.memoizedState!==null&&Lt(r);break;case 13:Lt(r);break;case 19:Y(Ze);break;case 10:Rn(r.type);break;case 22:case 23:Lt(r),vu(),n!==null&&Y(Pi);break;case 24:Rn(nt)}}function qs(n,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&n)===n){u=void 0;var y=a.create,T=a.inst;u=y(),T.destroy=u}a=a.next}while(a!==g)}}catch(b){Pe(r,r.return,b)}}function oi(n,r,a){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var y=g.next;u=y;do{if((u.tag&n)===n){var T=u.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,g=r;var N=a,q=b;try{q()}catch(z){Pe(g,N,z)}}}u=u.next}while(u!==y)}}catch(z){Pe(r,r.return,z)}}function Mp(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{Eh(r,a)}catch(u){Pe(n,n.return,u)}}}function Ip(n,r,a){a.props=Hi(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){Pe(n,r,u)}}function Bs(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(g){Pe(n,r,g)}}function _n(n,r){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Pe(n,r,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Pe(n,r,g)}else a.current=null}function kp(n){var r=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Pe(n,n.return,g)}}function Wu(n,r,a){try{var u=n.stateNode;gS(u,n.type,a,r),u[Tt]=r}catch(g){Pe(n,n.return,g)}}function Dp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&hi(n.type)||n.tag===4}function Xu(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&hi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qu(n,r,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=wn));else if(u!==4&&(u===27&&hi(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Qu(n,r,a),n=n.sibling;n!==null;)Qu(n,r,a),n=n.sibling}function ca(n,r,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(u!==4&&(u===27&&hi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ca(n,r,a),n=n.sibling;n!==null;)ca(n,r,a),n=n.sibling}function Up(n){var r=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);gt(r,u,a),r[ft]=n,r[Tt]=a}catch(y){Pe(n,n.return,y)}}var Dn=!1,st=!1,Zu=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,dt=null;function KE(n,r){if(n=n.containerInfo,Ec=Ia,n=Yf(n),$l(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var T=0,b=-1,N=-1,q=0,z=0,J=n,B=null;t:for(;;){for(var V;J!==a||g!==0&&J.nodeType!==3||(b=T+g),J!==y||u!==0&&J.nodeType!==3||(N=T+u),J.nodeType===3&&(T+=J.nodeValue.length),(V=J.firstChild)!==null;)B=J,J=V;for(;;){if(J===n)break t;if(B===a&&++q===g&&(b=T),B===y&&++z===u&&(N=T),(V=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=V}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Sc={focusedElem:n,selectionRange:a},Ia=!1,dt=r;dt!==null;)if(r=dt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,dt=n;else for(;dt!==null;){switch(r=dt,y=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(a=0;a<n.length;a++)g=n[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,a=r,g=y.memoizedProps,y=y.memoizedState,u=a.stateNode;try{var se=Hi(a.type,g);n=u.getSnapshotBeforeUpdate(se,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(me){Pe(a,a.return,me)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)bc(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":bc(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,dt=n;break}dt=r.return}}function Op(n,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Pn(n,a),u&4&&qs(5,a);break;case 1:if(Pn(n,a),u&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(T){Pe(a,a.return,T)}else{var g=Hi(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(g,r,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Pe(a,a.return,T)}}u&64&&Mp(a),u&512&&Bs(a,a.return);break;case 3:if(Pn(n,a),u&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Eh(n,r)}catch(T){Pe(a,a.return,T)}}break;case 27:r===null&&u&4&&Up(a);case 26:case 5:Pn(n,a),r===null&&u&4&&kp(a),u&512&&Bs(a,a.return);break;case 12:Pn(n,a);break;case 31:Pn(n,a),u&4&&Bp(n,a);break;case 13:Pn(n,a),u&4&&Hp(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=rS.bind(null,a),bS(n,a))));break;case 22:if(u=a.memoizedState!==null||Dn,!u){r=r!==null&&r.memoizedState!==null||st,g=Dn;var y=st;Dn=u,(st=r)&&!y?On(n,a,(a.subtreeFlags&8772)!==0):Pn(n,a),Dn=g,st=y}break;case 30:break;default:Pn(n,a)}}function Lp(n){var r=n.alternate;r!==null&&(n.alternate=null,Lp(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Nl(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var je=null,bt=!1;function Un(n,r,a){for(a=a.child;a!==null;)qp(n,r,a),a=a.sibling}function qp(n,r,a){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(us,a)}catch{}switch(a.tag){case 26:st||_n(a,r),Un(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:st||_n(a,r);var u=je,g=bt;hi(a.type)&&(je=a.stateNode,bt=!1),Un(n,r,a),Js(a.stateNode),je=u,bt=g;break;case 5:st||_n(a,r);case 6:if(u=je,g=bt,je=null,Un(n,r,a),je=u,bt=g,je!==null)if(bt)try{(je.nodeType===9?je.body:je.nodeName==="HTML"?je.ownerDocument.body:je).removeChild(a.stateNode)}catch(y){Pe(a,r,y)}else try{je.removeChild(a.stateNode)}catch(y){Pe(a,r,y)}break;case 18:je!==null&&(bt?(n=je,Mm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Br(n)):Mm(je,a.stateNode));break;case 4:u=je,g=bt,je=a.stateNode.containerInfo,bt=!0,Un(n,r,a),je=u,bt=g;break;case 0:case 11:case 14:case 15:oi(2,a,r),st||oi(4,a,r),Un(n,r,a);break;case 1:st||(_n(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Ip(a,r,u)),Un(n,r,a);break;case 21:Un(n,r,a);break;case 22:st=(u=st)||a.memoizedState!==null,Un(n,r,a),st=u;break;default:Un(n,r,a)}}function Bp(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Br(n)}catch(a){Pe(r,r.return,a)}}}function Hp(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Br(n)}catch(a){Pe(r,r.return,a)}}function WE(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Pp),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Pp),r;default:throw Error(s(435,n.tag))}}function da(n,r){var a=WE(n);r.forEach(function(u){if(!a.has(u)){a.add(u);var g=sS.bind(null,n,u);u.then(g,g)}})}function xt(n,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],y=n,T=r,b=T;e:for(;b!==null;){switch(b.tag){case 27:if(hi(b.type)){je=b.stateNode,bt=!1;break e}break;case 5:je=b.stateNode,bt=!1;break e;case 3:case 4:je=b.stateNode.containerInfo,bt=!0;break e}b=b.return}if(je===null)throw Error(s(160));qp(y,T,g),je=null,bt=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Gp(r,n),r=r.sibling}var an=null;function Gp(n,r){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xt(r,n),Ct(n),u&4&&(oi(3,n,n.return),qs(3,n),oi(5,n,n.return));break;case 1:xt(r,n),Ct(n),u&512&&(st||a===null||_n(a,a.return)),u&64&&Dn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=an;if(xt(r,n),Ct(n),u&512&&(st||a===null||_n(a,a.return)),u&4){var y=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":y=g.getElementsByTagName("title")[0],(!y||y[fs]||y[ft]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(u),g.head.insertBefore(y,g.querySelector("head > title"))),gt(y,u,a),y[ft]=n,ct(y),u=y;break e;case"link":var T=Gm("link","href",g).get(u+(a.href||""));if(T){for(var b=0;b<T.length;b++)if(y=T[b],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(b,1);break t}}y=g.createElement(u),gt(y,u,a),g.head.appendChild(y);break;case"meta":if(T=Gm("meta","content",g).get(u+(a.content||""))){for(b=0;b<T.length;b++)if(y=T[b],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(b,1);break t}}y=g.createElement(u),gt(y,u,a),g.head.appendChild(y);break;default:throw Error(s(468,u))}y[ft]=n,ct(y),u=y}n.stateNode=u}else Vm(g,n.type,n.stateNode);else n.stateNode=Hm(g,u,n.memoizedProps);else y!==u?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,u===null?Vm(g,n.type,n.stateNode):Hm(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Wu(n,n.memoizedProps,a.memoizedProps)}break;case 27:xt(r,n),Ct(n),u&512&&(st||a===null||_n(a,a.return)),a!==null&&u&4&&Wu(n,n.memoizedProps,a.memoizedProps);break;case 5:if(xt(r,n),Ct(n),u&512&&(st||a===null||_n(a,a.return)),n.flags&32){g=n.stateNode;try{lr(g,"")}catch(se){Pe(n,n.return,se)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,Wu(n,g,a!==null?a.memoizedProps:g)),u&1024&&(Zu=!0);break;case 6:if(xt(r,n),Ct(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(se){Pe(n,n.return,se)}}break;case 3:if(Aa=null,g=an,an=xa(r.containerInfo),xt(r,n),an=g,Ct(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Br(r.containerInfo)}catch(se){Pe(n,n.return,se)}Zu&&(Zu=!1,Vp(n));break;case 4:u=an,an=xa(n.stateNode.containerInfo),xt(r,n),Ct(n),an=u;break;case 12:xt(r,n),Ct(n);break;case 31:xt(r,n),Ct(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 13:xt(r,n),Ct(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ha=It()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 22:g=n.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,q=Dn,z=st;if(Dn=q||g,st=z||N,xt(r,n),st=z,Dn=q,Ct(n),u&8192)e:for(r=n.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(a===null||N||Dn||st||Gi(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){N=a=r;try{if(y=N.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{b=N.stateNode;var J=N.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(se){Pe(N,N.return,se)}}}else if(r.tag===6){if(a===null){N=r;try{N.stateNode.nodeValue=g?"":N.memoizedProps}catch(se){Pe(N,N.return,se)}}}else if(r.tag===18){if(a===null){N=r;try{var V=N.stateNode;g?Im(V,!0):Im(N.stateNode,!1)}catch(se){Pe(N,N.return,se)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,da(n,a))));break;case 19:xt(r,n),Ct(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,da(n,u)));break;case 30:break;case 21:break;default:xt(r,n),Ct(n)}}function Ct(n){var r=n.flags;if(r&2){try{for(var a,u=n.return;u!==null;){if(Dp(u)){a=u;break}u=u.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,y=Xu(n);ca(n,y,g);break;case 5:var T=a.stateNode;a.flags&32&&(lr(T,""),a.flags&=-33);var b=Xu(n);ca(n,b,T);break;case 3:case 4:var N=a.stateNode.containerInfo,q=Xu(n);Qu(n,q,N);break;default:throw Error(s(161))}}catch(z){Pe(n,n.return,z)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Vp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Vp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Pn(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Op(n,r.alternate,r),r=r.sibling}function Gi(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:oi(4,r,r.return),Gi(r);break;case 1:_n(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ip(r,r.return,a),Gi(r);break;case 27:Js(r.stateNode);case 26:case 5:_n(r,r.return),Gi(r);break;case 22:r.memoizedState===null&&Gi(r);break;case 30:Gi(r);break;default:Gi(r)}n=n.sibling}}function On(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=n,y=r,T=y.flags;switch(y.tag){case 0:case 11:case 15:On(g,y,a),qs(4,y);break;case 1:if(On(g,y,a),u=y,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(q){Pe(u,u.return,q)}if(u=y,g=u.updateQueue,g!==null){var b=u.stateNode;try{var N=g.shared.hiddenCallbacks;if(N!==null)for(g.shared.hiddenCallbacks=null,g=0;g<N.length;g++)_h(N[g],b)}catch(q){Pe(u,u.return,q)}}a&&T&64&&Mp(y),Bs(y,y.return);break;case 27:Up(y);case 26:case 5:On(g,y,a),a&&u===null&&T&4&&kp(y),Bs(y,y.return);break;case 12:On(g,y,a);break;case 31:On(g,y,a),a&&T&4&&Bp(g,y);break;case 13:On(g,y,a),a&&T&4&&Hp(g,y);break;case 22:y.memoizedState===null&&On(g,y,a),Bs(y,y.return);break;case 30:break;default:On(g,y,a)}r=r.sibling}}function ec(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&xs(a))}function tc(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&xs(n))}function ln(n,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zp(n,r,a,u),r=r.sibling}function zp(n,r,a,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:ln(n,r,a,u),g&2048&&qs(9,r);break;case 1:ln(n,r,a,u);break;case 3:ln(n,r,a,u),g&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&xs(n)));break;case 12:if(g&2048){ln(n,r,a,u),n=r.stateNode;try{var y=r.memoizedProps,T=y.id,b=y.onPostCommit;typeof b=="function"&&b(T,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Pe(r,r.return,N)}}else ln(n,r,a,u);break;case 31:ln(n,r,a,u);break;case 13:ln(n,r,a,u);break;case 23:break;case 22:y=r.stateNode,T=r.alternate,r.memoizedState!==null?y._visibility&2?ln(n,r,a,u):Hs(n,r):y._visibility&2?ln(n,r,a,u):(y._visibility|=2,Rr(n,r,a,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&ec(T,r);break;case 24:ln(n,r,a,u),g&2048&&tc(r.alternate,r);break;default:ln(n,r,a,u)}}function Rr(n,r,a,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var y=n,T=r,b=a,N=u,q=T.flags;switch(T.tag){case 0:case 11:case 15:Rr(y,T,b,N,g),qs(8,T);break;case 23:break;case 22:var z=T.stateNode;T.memoizedState!==null?z._visibility&2?Rr(y,T,b,N,g):Hs(y,T):(z._visibility|=2,Rr(y,T,b,N,g)),g&&q&2048&&ec(T.alternate,T);break;case 24:Rr(y,T,b,N,g),g&&q&2048&&tc(T.alternate,T);break;default:Rr(y,T,b,N,g)}r=r.sibling}}function Hs(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,u=r,g=u.flags;switch(u.tag){case 22:Hs(a,u),g&2048&&ec(u.alternate,u);break;case 24:Hs(a,u),g&2048&&tc(u.alternate,u);break;default:Hs(a,u)}r=r.sibling}}var Gs=8192;function Nr(n,r,a){if(n.subtreeFlags&Gs)for(n=n.child;n!==null;)Fp(n,r,a),n=n.sibling}function Fp(n,r,a){switch(n.tag){case 26:Nr(n,r,a),n.flags&Gs&&n.memoizedState!==null&&OS(a,an,n.memoizedState,n.memoizedProps);break;case 5:Nr(n,r,a);break;case 3:case 4:var u=an;an=xa(n.stateNode.containerInfo),Nr(n,r,a),an=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Gs,Gs=16777216,Nr(n,r,a),Gs=u):Nr(n,r,a));break;default:Nr(n,r,a)}}function jp(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vs(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];dt=u,Yp(u,n)}jp(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$p(n),n=n.sibling}function $p(n){switch(n.tag){case 0:case 11:case 15:Vs(n),n.flags&2048&&oi(9,n,n.return);break;case 3:Vs(n);break;case 12:Vs(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,fa(n)):Vs(n);break;default:Vs(n)}}function fa(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];dt=u,Yp(u,n)}jp(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:oi(8,r,r.return),fa(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,fa(r));break;default:fa(r)}n=n.sibling}}function Yp(n,r){for(;dt!==null;){var a=dt;switch(a.tag){case 0:case 11:case 15:oi(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xs(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,dt=u;else e:for(a=n;dt!==null;){u=dt;var g=u.sibling,y=u.return;if(Lp(u),u===a){dt=null;break e}if(g!==null){g.return=y,dt=g;break e}dt=y}}}var XE={getCacheForType:function(n){var r=pt(nt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a},cacheSignal:function(){return pt(nt).controller.signal}},QE=typeof WeakMap=="function"?WeakMap:Map,De=0,He=null,Se=null,be=0,Ue=0,qt=null,ai=!1,Mr=!1,nc=!1,Ln=0,We=0,li=0,Vi=0,ic=0,Bt=0,Ir=0,zs=null,At=null,rc=!1,ha=0,Jp=0,pa=1/0,ma=null,ui=null,lt=0,ci=null,kr=null,qn=0,sc=0,oc=null,Kp=null,Fs=0,ac=null;function Ht(){return(De&2)!==0&&be!==0?be&-be:G.T!==null?hc():df()}function Wp(){if(Bt===0)if((be&536870912)===0||Ae){var n=wo;wo<<=1,(wo&3932160)===0&&(wo=262144),Bt=n}else Bt=536870912;return n=Ot.current,n!==null&&(n.flags|=32),Bt}function Rt(n,r,a){(n===He&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)&&(Dr(n,0),di(n,be,Bt,!1)),ds(n,a),((De&2)===0||n!==He)&&(n===He&&((De&2)===0&&(Vi|=a),We===4&&di(n,be,Bt,!1)),En(n))}function Xp(n,r,a){if((De&6)!==0)throw Error(s(327));var u=!a&&(r&127)===0&&(r&n.expiredLanes)===0||cs(n,r),g=u?tS(n,r):uc(n,r,!0),y=u;do{if(g===0){Mr&&!u&&di(n,r,0,!1);break}else{if(a=n.current.alternate,y&&!ZE(a)){g=uc(n,r,!1),y=!1;continue}if(g===2){if(y=r,n.errorRecoveryDisabledLanes&y)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var b=n;g=zs;var N=b.current.memoizedState.isDehydrated;if(N&&(Dr(b,T).flags|=256),T=uc(b,T,!1),T!==2){if(nc&&!N){b.errorRecoveryDisabledLanes|=y,Vi|=y,g=4;break e}y=At,At=g,y!==null&&(At===null?At=y:At.push.apply(At,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){Dr(n,0),di(n,r,0,!0);break}e:{switch(u=n,y=g,y){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:di(u,r,Bt,!ai);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=ha+300-It(),10<g)){if(di(u,r,Bt,!ai),xo(u,0,!0)!==0)break e;qn=r,u.timeoutHandle=Rm(Qp.bind(null,u,a,At,ma,rc,r,Bt,Vi,Ir,ai,y,"Throttled",-0,0),g);break e}Qp(u,a,At,ma,rc,r,Bt,Vi,Ir,ai,y,null,-0,0)}}break}while(!0);En(n)}function Qp(n,r,a,u,g,y,T,b,N,q,z,J,B,V){if(n.timeoutHandle=-1,J=r.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wn},Fp(r,y,J);var se=(y&62914560)===y?ha-It():(y&4194048)===y?Jp-It():0;if(se=LS(J,se),se!==null){qn=y,n.cancelPendingCommit=se(om.bind(null,n,r,y,a,u,g,T,b,N,z,J,null,B,V)),di(n,y,T,!q);return}}om(n,r,y,a,u,g,T,b,N)}function ZE(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],y=g.getSnapshot;g=g.value;try{if(!Ut(y(),g))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function di(n,r,a,u){r&=~ic,r&=~Vi,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var g=r;0<g;){var y=31-Dt(g),T=1<<y;u[y]=-1,g&=~T}a!==0&&lf(n,a,r)}function ga(){return(De&6)===0?(js(0),!1):!0}function lc(){if(Se!==null){if(Ue===0)var n=Se.return;else n=Se,An=Di=null,bu(n),wr=null,As=0,n=Se;for(;n!==null;)Np(n.alternate,n),n=n.return;Se=null}}function Dr(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,_S(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),qn=0,lc(),He=n,Se=a=xn(n.current,null),be=r,Ue=0,qt=null,ai=!1,Mr=cs(n,r),nc=!1,Ir=Bt=ic=Vi=li=We=0,At=zs=null,rc=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var g=31-Dt(u),y=1<<g;r|=n[g],u&=~y}return Ln=r,Lo(),a}function Zp(n,r){_e=null,G.H=Ps,r===Tr||r===jo?(r=mh(),Ue=3):r===fu?(r=mh(),Ue=4):Ue=r===Hu?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,qt=r,Se===null&&(We=1,sa(n,Yt(r,n.current)))}function em(){var n=Ot.current;return n===null?!0:(be&4194048)===be?Xt===null:(be&62914560)===be||(be&536870912)!==0?n===Xt:!1}function tm(){var n=G.H;return G.H=Ps,n===null?Ps:n}function nm(){var n=G.A;return G.A=XE,n}function ya(){We=4,ai||(be&4194048)!==be&&Ot.current!==null||(Mr=!0),(li&134217727)===0&&(Vi&134217727)===0||He===null||di(He,be,Bt,!1)}function uc(n,r,a){var u=De;De|=2;var g=tm(),y=nm();(He!==n||be!==r)&&(ma=null,Dr(n,r)),r=!1;var T=We;e:do try{if(Ue!==0&&Se!==null){var b=Se,N=qt;switch(Ue){case 8:lc(),T=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(r=!0);var q=Ue;if(Ue=0,qt=null,Ur(n,b,N,q),a&&Mr){T=0;break e}break;default:q=Ue,Ue=0,qt=null,Ur(n,b,N,q)}}eS(),T=We;break}catch(z){Zp(n,z)}while(!0);return r&&n.shellSuspendCounter++,An=Di=null,De=u,G.H=g,G.A=y,Se===null&&(He=null,be=0,Lo()),T}function eS(){for(;Se!==null;)im(Se)}function tS(n,r){var a=De;De|=2;var u=tm(),g=nm();He!==n||be!==r?(ma=null,pa=It()+500,Dr(n,r)):Mr=cs(n,r);e:do try{if(Ue!==0&&Se!==null){r=Se;var y=qt;t:switch(Ue){case 1:Ue=0,qt=null,Ur(n,r,y,1);break;case 2:case 9:if(hh(y)){Ue=0,qt=null,rm(r);break}r=function(){Ue!==2&&Ue!==9||He!==n||(Ue=7),En(n)},y.then(r,r);break e;case 3:Ue=7;break e;case 4:Ue=5;break e;case 7:hh(y)?(Ue=0,qt=null,rm(r)):(Ue=0,qt=null,Ur(n,r,y,7));break;case 5:var T=null;switch(Se.tag){case 26:T=Se.memoizedState;case 5:case 27:var b=Se;if(T?zm(T):b.stateNode.complete){Ue=0,qt=null;var N=b.sibling;if(N!==null)Se=N;else{var q=b.return;q!==null?(Se=q,va(q)):Se=null}break t}}Ue=0,qt=null,Ur(n,r,y,5);break;case 6:Ue=0,qt=null,Ur(n,r,y,6);break;case 8:lc(),We=6;break e;default:throw Error(s(462))}}nS();break}catch(z){Zp(n,z)}while(!0);return An=Di=null,G.H=u,G.A=g,De=a,Se!==null?0:(He=null,be=0,Lo(),We)}function nS(){for(;Se!==null&&!x_();)im(Se)}function im(n){var r=Ap(n.alternate,n,Ln);n.memoizedProps=n.pendingProps,r===null?va(n):Se=r}function rm(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=Sp(a,r,r.pendingProps,r.type,void 0,be);break;case 11:r=Sp(a,r,r.pendingProps,r.type.render,r.ref,be);break;case 5:bu(r);default:Np(a,r),r=Se=nh(r,Ln),r=Ap(a,r,Ln)}n.memoizedProps=n.pendingProps,r===null?va(n):Se=r}function Ur(n,r,a,u){An=Di=null,bu(r),wr=null,As=0;var g=r.return;try{if(FE(n,g,r,a,be)){We=1,sa(n,Yt(a,n.current)),Se=null;return}}catch(y){if(g!==null)throw Se=g,y;We=1,sa(n,Yt(a,n.current)),Se=null;return}r.flags&32768?(Ae||u===1?n=!0:Mr||(be&536870912)!==0?n=!1:(ai=n=!0,(u===2||u===9||u===3||u===6)&&(u=Ot.current,u!==null&&u.tag===13&&(u.flags|=16384))),sm(r,n)):va(r)}function va(n){var r=n;do{if((r.flags&32768)!==0){sm(r,ai);return}n=r.return;var a=YE(r.alternate,r,Ln);if(a!==null){Se=a;return}if(r=r.sibling,r!==null){Se=r;return}Se=r=n}while(r!==null);We===0&&(We=5)}function sm(n,r){do{var a=JE(n.alternate,n);if(a!==null){a.flags&=32767,Se=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Se=n;return}Se=n=a}while(n!==null);We=6,Se=null}function om(n,r,a,u,g,y,T,b,N){n.cancelPendingCommit=null;do _a();while(lt!==0);if((De&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(y=r.lanes|r.childLanes,y|=Xl,P_(n,a,y,T,b,N),n===He&&(Se=He=null,be=0),kr=r,ci=n,qn=a,sc=y,oc=g,Kp=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,oS(So,function(){return dm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,g=X.p,X.p=2,T=De,De|=4;try{KE(n,r,a)}finally{De=T,X.p=g,G.T=u}}lt=1,am(),lm(),um()}}function am(){if(lt===1){lt=0;var n=ci,r=kr,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var u=X.p;X.p=2;var g=De;De|=4;try{Gp(r,n);var y=Sc,T=Yf(n.containerInfo),b=y.focusedElem,N=y.selectionRange;if(T!==b&&b&&b.ownerDocument&&$f(b.ownerDocument.documentElement,b)){if(N!==null&&$l(b)){var q=N.start,z=N.end;if(z===void 0&&(z=q),"selectionStart"in b)b.selectionStart=q,b.selectionEnd=Math.min(z,b.value.length);else{var J=b.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var V=B.getSelection(),se=b.textContent.length,me=Math.min(N.start,se),Be=N.end===void 0?me:Math.min(N.end,se);!V.extend&&me>Be&&(T=Be,Be=me,me=T);var U=jf(b,me),I=jf(b,Be);if(U&&I&&(V.rangeCount!==1||V.anchorNode!==U.node||V.anchorOffset!==U.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var L=J.createRange();L.setStart(U.node,U.offset),V.removeAllRanges(),me>Be?(V.addRange(L),V.extend(I.node,I.offset)):(L.setEnd(I.node,I.offset),V.addRange(L))}}}}for(J=[],V=b;V=V.parentNode;)V.nodeType===1&&J.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var $=J[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Ia=!!Ec,Sc=Ec=null}finally{De=g,X.p=u,G.T=a}}n.current=r,lt=2}}function lm(){if(lt===2){lt=0;var n=ci,r=kr,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var u=X.p;X.p=2;var g=De;De|=4;try{Op(n,r.alternate,r)}finally{De=g,X.p=u,G.T=a}}lt=3}}function um(){if(lt===4||lt===3){lt=0,C_();var n=ci,r=kr,a=qn,u=Kp;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?lt=5:(lt=0,kr=ci=null,cm(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(ui=null),Al(a),r=r.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(us,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=G.T,g=X.p,X.p=2,G.T=null;try{for(var y=n.onRecoverableError,T=0;T<u.length;T++){var b=u[T];y(b.value,{componentStack:b.stack})}}finally{G.T=r,X.p=g}}(qn&3)!==0&&_a(),En(n),g=n.pendingLanes,(a&261930)!==0&&(g&42)!==0?n===ac?Fs++:(Fs=0,ac=n):Fs=0,js(0)}}function cm(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,xs(r)))}function _a(){return am(),lm(),um(),dm()}function dm(){if(lt!==5)return!1;var n=ci,r=sc;sc=0;var a=Al(qn),u=G.T,g=X.p;try{X.p=32>a?32:a,G.T=null,a=oc,oc=null;var y=ci,T=qn;if(lt=0,kr=ci=null,qn=0,(De&6)!==0)throw Error(s(331));var b=De;if(De|=4,$p(y.current),zp(y,y.current,T,a),De=b,js(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(us,y)}catch{}return!0}finally{X.p=g,G.T=u,cm(n,r)}}function fm(n,r,a){r=Yt(a,r),r=Bu(n.stateNode,r,2),n=ii(n,r,2),n!==null&&(ds(n,2),En(n))}function Pe(n,r,a){if(n.tag===3)fm(n,n,a);else for(;r!==null;){if(r.tag===3){fm(r,n,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ui===null||!ui.has(u))){n=Yt(a,n),a=hp(2),u=ii(r,a,2),u!==null&&(pp(a,u,r,n),ds(u,2),En(u));break}}r=r.return}}function cc(n,r,a){var u=n.pingCache;if(u===null){u=n.pingCache=new QE;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(a)||(nc=!0,g.add(a),n=iS.bind(null,n,r,a),r.then(n,n))}function iS(n,r,a){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,He===n&&(be&a)===a&&(We===4||We===3&&(be&62914560)===be&&300>It()-ha?(De&2)===0&&Dr(n,0):ic|=a,Ir===be&&(Ir=0)),En(n)}function hm(n,r){r===0&&(r=af()),n=Mi(n,r),n!==null&&(ds(n,r),En(n))}function rS(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),hm(n,a)}function sS(n,r){var a=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),hm(n,a)}function oS(n,r){return wl(n,r)}var Ea=null,Pr=null,dc=!1,Sa=!1,fc=!1,fi=0;function En(n){n!==Pr&&n.next===null&&(Pr===null?Ea=Pr=n:Pr=Pr.next=n),Sa=!0,dc||(dc=!0,lS())}function js(n,r){if(!fc&&Sa){fc=!0;do for(var a=!1,u=Ea;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var y=0;else{var T=u.suspendedLanes,b=u.pingedLanes;y=(1<<31-Dt(42|n)+1)-1,y&=g&~(T&~b),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,ym(u,y))}else y=be,y=xo(u,u===He?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||cs(u,y)||(a=!0,ym(u,y));u=u.next}while(a);fc=!1}}function aS(){pm()}function pm(){Sa=dc=!1;var n=0;fi!==0&&vS()&&(n=fi);for(var r=It(),a=null,u=Ea;u!==null;){var g=u.next,y=mm(u,r);y===0?(u.next=null,a===null?Ea=g:a.next=g,g===null&&(Pr=a)):(a=u,(n!==0||(y&3)!==0)&&(Sa=!0)),u=g}lt!==0&&lt!==5||js(n),fi!==0&&(fi=0)}function mm(n,r){for(var a=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var T=31-Dt(y),b=1<<T,N=g[T];N===-1?((b&a)===0||(b&u)!==0)&&(g[T]=U_(b,r)):N<=r&&(n.expiredLanes|=b),y&=~b}if(r=He,a=be,a=xo(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===r&&(Ue===2||Ue===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&bl(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||cs(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(u!==null&&bl(u),Al(a)){case 2:case 8:a=sf;break;case 32:a=So;break;case 268435456:a=of;break;default:a=So}return u=gm.bind(null,n),a=wl(a,u),n.callbackPriority=r,n.callbackNode=a,r}return u!==null&&u!==null&&bl(u),n.callbackPriority=2,n.callbackNode=null,2}function gm(n,r){if(lt!==0&&lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(_a()&&n.callbackNode!==a)return null;var u=be;return u=xo(n,n===He?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Xp(n,u,r),mm(n,It()),n.callbackNode!=null&&n.callbackNode===a?gm.bind(null,n):null)}function ym(n,r){if(_a())return null;Xp(n,r,!0)}function lS(){ES(function(){(De&6)!==0?wl(rf,aS):pm()})}function hc(){if(fi===0){var n=Er;n===0&&(n=To,To<<=1,(To&261888)===0&&(To=256)),fi=n}return fi}function vm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:No(""+n)}function _m(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function uS(n,r,a,u,g){if(r==="submit"&&a&&a.stateNode===g){var y=vm((g[Tt]||null).action),T=u.submitter;T&&(r=(r=T[Tt]||null)?vm(r.formAction):T.getAttribute("formAction"),r!==null&&(y=r,T=null));var b=new Do("action","action",null,u,g);n.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(fi!==0){var N=T?_m(g,T):new FormData(g);Du(a,{pending:!0,data:N,method:g.method,action:y},null,N)}}else typeof y=="function"&&(b.preventDefault(),N=T?_m(g,T):new FormData(g),Du(a,{pending:!0,data:N,method:g.method,action:y},y,N))},currentTarget:g}]})}}for(var pc=0;pc<Wl.length;pc++){var mc=Wl[pc],cS=mc.toLowerCase(),dS=mc[0].toUpperCase()+mc.slice(1);on(cS,"on"+dS)}on(Wf,"onAnimationEnd"),on(Xf,"onAnimationIteration"),on(Qf,"onAnimationStart"),on("dblclick","onDoubleClick"),on("focusin","onFocus"),on("focusout","onBlur"),on(AE,"onTransitionRun"),on(RE,"onTransitionStart"),on(NE,"onTransitionCancel"),on(Zf,"onTransitionEnd"),or("onMouseEnter",["mouseout","mouseover"]),or("onMouseLeave",["mouseout","mouseover"]),or("onPointerEnter",["pointerout","pointerover"]),or("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($s));function Em(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],g=u.event;u=u.listeners;e:{var y=void 0;if(r)for(var T=u.length-1;0<=T;T--){var b=u[T],N=b.instance,q=b.currentTarget;if(b=b.listener,N!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=q;try{y(g)}catch(z){Oo(z)}g.currentTarget=null,y=N}else for(T=0;T<u.length;T++){if(b=u[T],N=b.instance,q=b.currentTarget,b=b.listener,N!==y&&g.isPropagationStopped())break e;y=b,g.currentTarget=q;try{y(g)}catch(z){Oo(z)}g.currentTarget=null,y=N}}}}function Te(n,r){var a=r[Rl];a===void 0&&(a=r[Rl]=new Set);var u=n+"__bubble";a.has(u)||(Sm(r,n,2,!1),a.add(u))}function gc(n,r,a){var u=0;r&&(u|=4),Sm(a,n,u,r)}var Ta="_reactListening"+Math.random().toString(36).slice(2);function yc(n){if(!n[Ta]){n[Ta]=!0,pf.forEach(function(a){a!=="selectionchange"&&(fS.has(a)||gc(a,!1,n),gc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Ta]||(r[Ta]=!0,gc("selectionchange",!1,r))}}function Sm(n,r,a,u){switch(Wm(r)){case 2:var g=HS;break;case 8:g=GS;break;default:g=kc}a=g.bind(null,r,a,n),g=void 0,!Ll||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(r,a,{capture:!0,passive:g}):n.addEventListener(r,a,!0):g!==void 0?n.addEventListener(r,a,{passive:g}):n.addEventListener(r,a,!1)}function vc(n,r,a,u,g){var y=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var b=u.stateNode.containerInfo;if(b===g)break;if(T===4)for(T=u.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;b!==null;){if(T=ir(b),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){u=y=T;continue e}b=b.parentNode}}u=u.return}Cf(function(){var q=y,z=Pl(a),J=[];e:{var B=eh.get(n);if(B!==void 0){var V=Do,se=n;switch(n){case"keypress":if(Io(a)===0)break e;case"keydown":case"keyup":V=sE;break;case"focusin":se="focus",V=Gl;break;case"focusout":se="blur",V=Gl;break;case"beforeblur":case"afterblur":V=Gl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Nf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Y_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=lE;break;case Wf:case Xf:case Qf:V=W_;break;case Zf:V=cE;break;case"scroll":case"scrollend":V=j_;break;case"wheel":V=fE;break;case"copy":case"cut":case"paste":V=Q_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=If;break;case"toggle":case"beforetoggle":V=pE}var me=(r&4)!==0,Be=!me&&(n==="scroll"||n==="scrollend"),U=me?B!==null?B+"Capture":null:B;me=[];for(var I=q,L;I!==null;){var $=I;if(L=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||L===null||U===null||($=ps(I,U),$!=null&&me.push(Ys(I,$,L))),Be)break;I=I.return}0<me.length&&(B=new V(B,se,null,a,z),J.push({event:B,listeners:me}))}}if((r&7)===0){e:{if(B=n==="mouseover"||n==="pointerover",V=n==="mouseout"||n==="pointerout",B&&a!==Ul&&(se=a.relatedTarget||a.fromElement)&&(ir(se)||se[nr]))break e;if((V||B)&&(B=z.window===z?z:(B=z.ownerDocument)?B.defaultView||B.parentWindow:window,V?(se=a.relatedTarget||a.toElement,V=q,se=se?ir(se):null,se!==null&&(Be=l(se),me=se.tag,se!==Be||me!==5&&me!==27&&me!==6)&&(se=null)):(V=null,se=q),V!==se)){if(me=Nf,$="onMouseLeave",U="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(me=If,$="onPointerLeave",U="onPointerEnter",I="pointer"),Be=V==null?B:hs(V),L=se==null?B:hs(se),B=new me($,I+"leave",V,a,z),B.target=Be,B.relatedTarget=L,$=null,ir(z)===q&&(me=new me(U,I+"enter",se,a,z),me.target=L,me.relatedTarget=Be,$=me),Be=$,V&&se)t:{for(me=hS,U=V,I=se,L=0,$=U;$;$=me($))L++;$=0;for(var he=I;he;he=me(he))$++;for(;0<L-$;)U=me(U),L--;for(;0<$-L;)I=me(I),$--;for(;L--;){if(U===I||I!==null&&U===I.alternate){me=U;break t}U=me(U),I=me(I)}me=null}else me=null;V!==null&&Tm(J,B,V,me,!1),se!==null&&Be!==null&&Tm(J,Be,se,me,!0)}}e:{if(B=q?hs(q):window,V=B.nodeName&&B.nodeName.toLowerCase(),V==="select"||V==="input"&&B.type==="file")var Ne=Bf;else if(Lf(B))if(Hf)Ne=bE;else{Ne=TE;var le=SE}else V=B.nodeName,!V||V.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?q&&Dl(q.elementType)&&(Ne=Bf):Ne=wE;if(Ne&&(Ne=Ne(n,q))){qf(J,Ne,a,z);break e}le&&le(n,B,q),n==="focusout"&&q&&B.type==="number"&&q.memoizedProps.value!=null&&kl(B,"number",B.value)}switch(le=q?hs(q):window,n){case"focusin":(Lf(le)||le.contentEditable==="true")&&(fr=le,Yl=q,Ts=null);break;case"focusout":Ts=Yl=fr=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Jf(J,a,z);break;case"selectionchange":if(CE)break;case"keydown":case"keyup":Jf(J,a,z)}var Ee;if(zl)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else dr?Pf(n,a)&&(xe="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(xe="onCompositionStart");xe&&(kf&&a.locale!=="ko"&&(dr||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&dr&&(Ee=Af()):(Wn=z,ql="value"in Wn?Wn.value:Wn.textContent,dr=!0)),le=wa(q,xe),0<le.length&&(xe=new Mf(xe,n,null,a,z),J.push({event:xe,listeners:le}),Ee?xe.data=Ee:(Ee=Of(a),Ee!==null&&(xe.data=Ee)))),(Ee=gE?yE(n,a):vE(n,a))&&(xe=wa(q,"onBeforeInput"),0<xe.length&&(le=new Mf("onBeforeInput","beforeinput",null,a,z),J.push({event:le,listeners:xe}),le.data=Ee)),uS(J,n,q,a,z)}Em(J,r)})}function Ys(n,r,a){return{instance:n,listener:r,currentTarget:a}}function wa(n,r){for(var a=r+"Capture",u=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=ps(n,a),g!=null&&u.unshift(Ys(n,g,y)),g=ps(n,r),g!=null&&u.push(Ys(n,g,y))),n.tag===3)return u;n=n.return}return[]}function hS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Tm(n,r,a,u,g){for(var y=r._reactName,T=[];a!==null&&a!==u;){var b=a,N=b.alternate,q=b.stateNode;if(b=b.tag,N!==null&&N===u)break;b!==5&&b!==26&&b!==27||q===null||(N=q,g?(q=ps(a,y),q!=null&&T.unshift(Ys(a,q,N))):g||(q=ps(a,y),q!=null&&T.push(Ys(a,q,N)))),a=a.return}T.length!==0&&n.push({event:r,listeners:T})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function wm(n){return(typeof n=="string"?n:""+n).replace(pS,`
`).replace(mS,"")}function bm(n,r){return r=wm(r),wm(n)===r}function qe(n,r,a,u,g,y){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||lr(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&lr(n,""+u);break;case"className":Ao(n,"class",u);break;case"tabIndex":Ao(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ao(n,a,u);break;case"style":bf(n,u,y);break;case"data":if(r!=="object"){Ao(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=No(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(r!=="input"&&qe(n,r,"name",g.name,g,null),qe(n,r,"formEncType",g.formEncType,g,null),qe(n,r,"formMethod",g.formMethod,g,null),qe(n,r,"formTarget",g.formTarget,g,null)):(qe(n,r,"encType",g.encType,g,null),qe(n,r,"method",g.method,g,null),qe(n,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=No(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=wn);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=No(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":Te("beforetoggle",n),Te("toggle",n),Co(n,"popover",u);break;case"xlinkActuate":Tn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Tn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Tn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Tn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Tn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Tn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Tn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Co(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=z_.get(a)||a,Co(n,a,u))}}function _c(n,r,a,u,g,y){switch(a){case"style":bf(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof u=="string"?lr(n,u):(typeof u=="number"||typeof u=="bigint")&&lr(n,""+u);break;case"onScroll":u!=null&&Te("scroll",n);break;case"onScrollEnd":u!=null&&Te("scrollend",n);break;case"onClick":u!=null&&(n.onclick=wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mf.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),r=a.slice(2,g?a.length-7:void 0),y=n[Tt]||null,y=y!=null?y[a]:null,typeof y=="function"&&n.removeEventListener(r,y,g),typeof u=="function")){typeof y!="function"&&y!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,u,g);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Co(n,a,u)}}}function gt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",n),Te("load",n);var u=!1,g=!1,y;for(y in a)if(a.hasOwnProperty(y)){var T=a[y];if(T!=null)switch(y){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(n,r,y,T,a,null)}}g&&qe(n,r,"srcSet",a.srcSet,a,null),u&&qe(n,r,"src",a.src,a,null);return;case"input":Te("invalid",n);var b=y=T=g=null,N=null,q=null;for(u in a)if(a.hasOwnProperty(u)){var z=a[u];if(z!=null)switch(u){case"name":g=z;break;case"type":T=z;break;case"checked":N=z;break;case"defaultChecked":q=z;break;case"value":y=z;break;case"defaultValue":b=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,r));break;default:qe(n,r,u,z,a,null)}}Ef(n,y,b,N,q,T,g,!1);return;case"select":Te("invalid",n),u=T=y=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":y=b;break;case"defaultValue":T=b;break;case"multiple":u=b;default:qe(n,r,g,b,a,null)}r=y,a=T,n.multiple=!!u,r!=null?ar(n,!!u,r,!1):a!=null&&ar(n,!!u,a,!0);return;case"textarea":Te("invalid",n),y=g=u=null;for(T in a)if(a.hasOwnProperty(T)&&(b=a[T],b!=null))switch(T){case"value":u=b;break;case"defaultValue":g=b;break;case"children":y=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:qe(n,r,T,b,a,null)}Tf(n,u,g,y);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(u=a[N],u!=null))switch(N){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:qe(n,r,N,u,a,null)}return;case"dialog":Te("beforetoggle",n),Te("toggle",n),Te("cancel",n),Te("close",n);break;case"iframe":case"object":Te("load",n);break;case"video":case"audio":for(u=0;u<$s.length;u++)Te($s[u],n);break;case"image":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"embed":case"source":case"link":Te("error",n),Te("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(u=a[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(n,r,q,u,a,null)}return;default:if(Dl(r)){for(z in a)a.hasOwnProperty(z)&&(u=a[z],u!==void 0&&_c(n,r,z,u,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(u=a[b],u!=null&&qe(n,r,b,u,a,null))}function gS(n,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,b=null,N=null,q=null,z=null;for(V in a){var J=a[V];if(a.hasOwnProperty(V)&&J!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":N=J;default:u.hasOwnProperty(V)||qe(n,r,V,null,u,J)}}for(var B in u){var V=u[B];if(J=a[B],u.hasOwnProperty(B)&&(V!=null||J!=null))switch(B){case"type":y=V;break;case"name":g=V;break;case"checked":q=V;break;case"defaultChecked":z=V;break;case"value":T=V;break;case"defaultValue":b=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,r));break;default:V!==J&&qe(n,r,B,V,u,J)}}Il(n,T,b,N,q,z,y,g);return;case"select":V=T=b=B=null;for(y in a)if(N=a[y],a.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":V=N;default:u.hasOwnProperty(y)||qe(n,r,y,null,u,N)}for(g in u)if(y=u[g],N=a[g],u.hasOwnProperty(g)&&(y!=null||N!=null))switch(g){case"value":B=y;break;case"defaultValue":b=y;break;case"multiple":T=y;default:y!==N&&qe(n,r,g,y,u,N)}r=b,a=T,u=V,B!=null?ar(n,!!a,B,!1):!!u!=!!a&&(r!=null?ar(n,!!a,r,!0):ar(n,!!a,a?[]:"",!1));return;case"textarea":V=B=null;for(b in a)if(g=a[b],a.hasOwnProperty(b)&&g!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:qe(n,r,b,null,u,g)}for(T in u)if(g=u[T],y=a[T],u.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":B=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==y&&qe(n,r,T,g,u,y)}Sf(n,B,V);return;case"option":for(var se in a)if(B=a[se],a.hasOwnProperty(se)&&B!=null&&!u.hasOwnProperty(se))switch(se){case"selected":n.selected=!1;break;default:qe(n,r,se,null,u,B)}for(N in u)if(B=u[N],V=a[N],u.hasOwnProperty(N)&&B!==V&&(B!=null||V!=null))switch(N){case"selected":n.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:qe(n,r,N,B,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)B=a[me],a.hasOwnProperty(me)&&B!=null&&!u.hasOwnProperty(me)&&qe(n,r,me,null,u,B);for(q in u)if(B=u[q],V=a[q],u.hasOwnProperty(q)&&B!==V&&(B!=null||V!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,r));break;default:qe(n,r,q,B,u,V)}return;default:if(Dl(r)){for(var Be in a)B=a[Be],a.hasOwnProperty(Be)&&B!==void 0&&!u.hasOwnProperty(Be)&&_c(n,r,Be,void 0,u,B);for(z in u)B=u[z],V=a[z],!u.hasOwnProperty(z)||B===V||B===void 0&&V===void 0||_c(n,r,z,B,u,V);return}}for(var U in a)B=a[U],a.hasOwnProperty(U)&&B!=null&&!u.hasOwnProperty(U)&&qe(n,r,U,null,u,B);for(J in u)B=u[J],V=a[J],!u.hasOwnProperty(J)||B===V||B==null&&V==null||qe(n,r,J,B,u,V)}function xm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],y=g.transferSize,T=g.initiatorType,b=g.duration;if(y&&b&&xm(T)){for(T=0,b=g.responseEnd,u+=1;u<a.length;u++){var N=a[u],q=N.startTime;if(q>b)break;var z=N.transferSize,J=N.initiatorType;z&&xm(J)&&(N=N.responseEnd,T+=z*(N<b?1:(b-q)/(N-q)))}if(--u,r+=8*(y+T)/(g.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ec=null,Sc=null;function ba(n){return n.nodeType===9?n:n.ownerDocument}function Cm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Am(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Tc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var wc=null;function vS(){var n=window.event;return n&&n.type==="popstate"?n===wc?!1:(wc=n,!0):(wc=null,!1)}var Rm=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,Nm=typeof Promise=="function"?Promise:void 0,ES=typeof queueMicrotask=="function"?queueMicrotask:typeof Nm<"u"?function(n){return Nm.resolve(null).then(n).catch(SS)}:Rm;function SS(n){setTimeout(function(){throw n})}function hi(n){return n==="head"}function Mm(n,r){var a=r,u=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){n.removeChild(g),Br(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Js(n.ownerDocument.documentElement);else if(a==="head"){a=n.ownerDocument.head,Js(a);for(var y=a.firstChild;y;){var T=y.nextSibling,b=y.nodeName;y[fs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&y.rel.toLowerCase()==="stylesheet"||a.removeChild(y),y=T}}else a==="body"&&Js(n.ownerDocument.body);a=g}while(a);Br(r)}function Im(n,r){var a=n;n=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(n===0)break;n--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||n++;a=u}while(a)}function bc(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bc(a),Nl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function TS(n,r,a,u){for(;n.nodeType===1;){var g=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[fs])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Qt(n.nextSibling),n===null)break}return null}function wS(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Qt(n.nextSibling),n===null))return null;return n}function km(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Qt(n.nextSibling),n===null))return null;return n}function xc(n){return n.data==="$?"||n.data==="$~"}function Cc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function bS(n,r){var a=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Qt(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Ac=null;function Dm(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"||a==="/&"){if(r===0)return Qt(n.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}n=n.nextSibling}return null}function Um(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return n;r--}else a!=="/$"&&a!=="/&"||r++}n=n.previousSibling}return null}function Pm(n,r,a){switch(r=ba(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Js(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Nl(n)}var Zt=new Map,Om=new Set;function xa(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Bn=X.d;X.d={f:xS,r:CS,D:AS,C:RS,L:NS,m:MS,X:kS,S:IS,M:DS};function xS(){var n=Bn.f(),r=ga();return n||r}function CS(n){var r=rr(n);r!==null&&r.tag===5&&r.type==="form"?Zh(r):Bn.r(n)}var Or=typeof document>"u"?null:document;function Lm(n,r,a){var u=Or;if(u&&typeof r=="string"&&r){var g=jt(r);g='link[rel="'+n+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Om.has(g)||(Om.add(g),n={rel:n,crossOrigin:a,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),gt(r,"link",n),ct(r),u.head.appendChild(r)))}}function AS(n){Bn.D(n),Lm("dns-prefetch",n,null)}function RS(n,r){Bn.C(n,r),Lm("preconnect",n,r)}function NS(n,r,a){Bn.L(n,r,a);var u=Or;if(u&&n&&r){var g='link[rel="preload"][as="'+jt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+jt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+jt(a.imageSizes)+'"]')):g+='[href="'+jt(n)+'"]';var y=g;switch(r){case"style":y=Lr(n);break;case"script":y=qr(n)}Zt.has(y)||(n=E({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Zt.set(y,n),u.querySelector(g)!==null||r==="style"&&u.querySelector(Ks(y))||r==="script"&&u.querySelector(Ws(y))||(r=u.createElement("link"),gt(r,"link",n),ct(r),u.head.appendChild(r)))}}function MS(n,r){Bn.m(n,r);var a=Or;if(a&&n){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+jt(u)+'"][href="'+jt(n)+'"]',y=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qr(n)}if(!Zt.has(y)&&(n=E({rel:"modulepreload",href:n},r),Zt.set(y,n),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ws(y)))return}u=a.createElement("link"),gt(u,"link",n),ct(u),a.head.appendChild(u)}}}function IS(n,r,a){Bn.S(n,r,a);var u=Or;if(u&&n){var g=sr(u).hoistableStyles,y=Lr(n);r=r||"default";var T=g.get(y);if(!T){var b={loading:0,preload:null};if(T=u.querySelector(Ks(y)))b.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Zt.get(y))&&Rc(n,a);var N=T=u.createElement("link");ct(N),gt(N,"link",n),N._p=new Promise(function(q,z){N.onload=q,N.onerror=z}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ca(T,r,u)}T={type:"stylesheet",instance:T,count:1,state:b},g.set(y,T)}}}function kS(n,r){Bn.X(n,r);var a=Or;if(a&&n){var u=sr(a).hoistableScripts,g=qr(n),y=u.get(g);y||(y=a.querySelector(Ws(g)),y||(n=E({src:n,async:!0},r),(r=Zt.get(g))&&Nc(n,r),y=a.createElement("script"),ct(y),gt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function DS(n,r){Bn.M(n,r);var a=Or;if(a&&n){var u=sr(a).hoistableScripts,g=qr(n),y=u.get(g);y||(y=a.querySelector(Ws(g)),y||(n=E({src:n,async:!0,type:"module"},r),(r=Zt.get(g))&&Nc(n,r),y=a.createElement("script"),ct(y),gt(y,"link",n),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(g,y))}}function qm(n,r,a,u){var g=(g=pe.current)?xa(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Lr(a.href),a=sr(g).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Lr(a.href);var y=sr(g).hoistableStyles,T=y.get(n);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,T),(y=g.querySelector(Ks(n)))&&!y._p&&(T.instance=y,T.state.loading=5),Zt.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zt.set(n,a),y||US(g,n,a,T.state))),r&&u===null)throw Error(s(528,""));return T}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=qr(a),a=sr(g).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Lr(n){return'href="'+jt(n)+'"'}function Ks(n){return'link[rel="stylesheet"]['+n+"]"}function Bm(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function US(n,r,a,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),gt(r,"link",a),ct(r),n.head.appendChild(r))}function qr(n){return'[src="'+jt(n)+'"]'}function Ws(n){return"script[async]"+n}function Hm(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+jt(a.href)+'"]');if(u)return r.instance=u,ct(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),ct(u),gt(u,"style",g),Ca(u,a.precedence,n),r.instance=u;case"stylesheet":g=Lr(a.href);var y=n.querySelector(Ks(g));if(y)return r.state.loading|=4,r.instance=y,ct(y),y;u=Bm(a),(g=Zt.get(g))&&Rc(u,g),y=(n.ownerDocument||n).createElement("link"),ct(y);var T=y;return T._p=new Promise(function(b,N){T.onload=b,T.onerror=N}),gt(y,"link",u),r.state.loading|=4,Ca(y,a.precedence,n),r.instance=y;case"script":return y=qr(a.src),(g=n.querySelector(Ws(y)))?(r.instance=g,ct(g),g):(u=a,(g=Zt.get(y))&&(u=E({},a),Nc(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),ct(g),gt(g,"link",u),n.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Ca(u,a.precedence,n));return r.instance}function Ca(n,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,y=g,T=0;T<u.length;T++){var b=u[T];if(b.dataset.precedence===r)y=b;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Rc(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Nc(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Aa=null;function Gm(n,r,a){if(Aa===null){var u=new Map,g=Aa=new Map;g.set(a,u)}else g=Aa,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),g=0;g<a.length;g++){var y=a[g];if(!(y[fs]||y[ft]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(r)||"";T=n+T;var b=u.get(T);b?b.push(y):u.set(T,[y])}}return u}function Vm(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function PS(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function zm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function OS(n,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Lr(u.href),y=r.querySelector(Ks(g));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Ra.bind(n),r.then(n,n)),a.state.loading|=4,a.instance=y,ct(y);return}y=r.ownerDocument||r,u=Bm(u),(g=Zt.get(g))&&Rc(u,g),y=y.createElement("link"),ct(y);var T=y;T._p=new Promise(function(b,N){T.onload=b,T.onerror=N}),gt(y,"link",u),a.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(n.count++,a=Ra.bind(n),r.addEventListener("load",a),r.addEventListener("error",a))}}var Mc=0;function LS(n,r){return n.stylesheets&&n.count===0&&Ma(n,n.stylesheets),0<n.count||0<n.imgCount?function(a){var u=setTimeout(function(){if(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+r);0<n.imgBytes&&Mc===0&&(Mc=62500*yS());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ma(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Mc?50:800)+r);return n.unsuspend=a,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Ra(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ma(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Na=null;function Ma(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Na=new Map,r.forEach(qS,n),Na=null,Ra.call(n))}function qS(n,r){if(!(r.state.loading&4)){var a=Na.get(n);if(a)var u=a.get(null);else{a=new Map,Na.set(n,a);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),u=T)}u&&a.set(null,u)}g=r.instance,T=g.getAttribute("data-precedence"),y=a.get(T)||u,y===u&&a.set(null,g),a.set(T,g),this.count++,u=Ra.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),r.state.loading|=4}}var Xs={$$typeof:R,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function BS(n,r,a,u,g,y,T,b,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.hiddenUpdates=xl(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Fm(n,r,a,u,g,y,T,b,N,q,z,J){return n=new BS(n,r,a,T,N,q,z,J,b),r=1,y===!0&&(r|=24),y=Pt(3,null,null,r),n.current=y,y.stateNode=n,r=uu(),r.refCount++,n.pooledCache=r,r.refCount++,y.memoizedState={element:u,isDehydrated:a,cache:r},hu(y),n}function jm(n){return n?(n=mr,n):mr}function $m(n,r,a,u,g,y){g=jm(g),u.context===null?u.context=g:u.pendingContext=g,u=ni(r),u.payload={element:a},y=y===void 0?null:y,y!==null&&(u.callback=y),a=ii(n,u,r),a!==null&&(Rt(a,n,r),Ns(a,n,r))}function Ym(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Ic(n,r){Ym(n,r),(n=n.alternate)&&Ym(n,r)}function Jm(n){if(n.tag===13||n.tag===31){var r=Mi(n,67108864);r!==null&&Rt(r,n,67108864),Ic(n,67108864)}}function Km(n){if(n.tag===13||n.tag===31){var r=Ht();r=Cl(r);var a=Mi(n,r);a!==null&&Rt(a,n,r),Ic(n,r)}}var Ia=!0;function HS(n,r,a,u){var g=G.T;G.T=null;var y=X.p;try{X.p=2,kc(n,r,a,u)}finally{X.p=y,G.T=g}}function GS(n,r,a,u){var g=G.T;G.T=null;var y=X.p;try{X.p=8,kc(n,r,a,u)}finally{X.p=y,G.T=g}}function kc(n,r,a,u){if(Ia){var g=Dc(u);if(g===null)vc(n,r,u,ka,a),Xm(n,u);else if(zS(g,n,r,a,u))u.stopPropagation();else if(Xm(n,u),r&4&&-1<VS.indexOf(n)){for(;g!==null;){var y=rr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=xi(y.pendingLanes);if(T!==0){var b=y;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var N=1<<31-Dt(T);b.entanglements[1]|=N,T&=~N}En(y),(De&6)===0&&(pa=It()+500,js(0))}}break;case 31:case 13:b=Mi(y,2),b!==null&&Rt(b,y,2),ga(),Ic(y,2)}if(y=Dc(u),y===null&&vc(n,r,u,ka,a),y===g)break;g=y}g!==null&&u.stopPropagation()}else vc(n,r,u,null,a)}}function Dc(n){return n=Pl(n),Uc(n)}var ka=null;function Uc(n){if(ka=null,n=ir(n),n!==null){var r=l(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=c(r),n!==null)return n;n=null}else if(a===31){if(n=f(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ka=n,null}function Wm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(A_()){case rf:return 2;case sf:return 8;case So:case R_:return 32;case of:return 268435456;default:return 32}default:return 32}}var Pc=!1,pi=null,mi=null,gi=null,Qs=new Map,Zs=new Map,yi=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xm(n,r){switch(n){case"focusin":case"focusout":pi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Qs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(r.pointerId)}}function eo(n,r,a,u,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:y,targetContainers:[g]},r!==null&&(r=rr(r),r!==null&&Jm(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function zS(n,r,a,u,g){switch(r){case"focusin":return pi=eo(pi,n,r,a,u,g),!0;case"dragenter":return mi=eo(mi,n,r,a,u,g),!0;case"mouseover":return gi=eo(gi,n,r,a,u,g),!0;case"pointerover":var y=g.pointerId;return Qs.set(y,eo(Qs.get(y)||null,n,r,a,u,g)),!0;case"gotpointercapture":return y=g.pointerId,Zs.set(y,eo(Zs.get(y)||null,n,r,a,u,g)),!0}return!1}function Qm(n){var r=ir(n.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=c(a),r!==null){n.blockedOn=r,ff(n.priority,function(){Km(a)});return}}else if(r===31){if(r=f(a),r!==null){n.blockedOn=r,ff(n.priority,function(){Km(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Da(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Dc(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);Ul=u,a.target.dispatchEvent(u),Ul=null}else return r=rr(a),r!==null&&Jm(r),n.blockedOn=a,!1;r.shift()}return!0}function Zm(n,r,a){Da(n)&&a.delete(r)}function FS(){Pc=!1,pi!==null&&Da(pi)&&(pi=null),mi!==null&&Da(mi)&&(mi=null),gi!==null&&Da(gi)&&(gi=null),Qs.forEach(Zm),Zs.forEach(Zm)}function Ua(n,r){n.blockedOn===r&&(n.blockedOn=null,Pc||(Pc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,FS)))}var Pa=null;function eg(n){Pa!==n&&(Pa=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Pa===n&&(Pa=null);for(var r=0;r<n.length;r+=3){var a=n[r],u=n[r+1],g=n[r+2];if(typeof u!="function"){if(Uc(u||a)===null)continue;break}var y=rr(a);y!==null&&(n.splice(r,3),r-=3,Du(y,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Br(n){function r(N){return Ua(N,n)}pi!==null&&Ua(pi,n),mi!==null&&Ua(mi,n),gi!==null&&Ua(gi,n),Qs.forEach(r),Zs.forEach(r);for(var a=0;a<yi.length;a++){var u=yi[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<yi.length&&(a=yi[0],a.blockedOn===null);)Qm(a),a.blockedOn===null&&yi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],y=a[u+1],T=g[Tt]||null;if(typeof y=="function")T||eg(a);else if(T){var b=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Tt]||null)b=T.formAction;else if(Uc(g)!==null)continue}else b=T.action;typeof b=="function"?a[u+1]=b:(a.splice(u,3),u-=3),eg(a)}}}function tg(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Oc(n){this._internalRoot=n}Oa.prototype.render=Oc.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,u=Ht();$m(a,u,n,r,null,null)},Oa.prototype.unmount=Oc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;$m(n.current,2,null,n,null,null),ga(),r[nr]=null}};function Oa(n){this._internalRoot=n}Oa.prototype.unstable_scheduleHydration=function(n){if(n){var r=df();n={blockedOn:null,target:n,priority:r};for(var a=0;a<yi.length&&r!==0&&r<yi[a].priority;a++);yi.splice(a,0,n),a===0&&Qm(n)}};var ng=e.version;if(ng!=="19.2.0")throw Error(s(527,ng,"19.2.0"));X.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var jS={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{us=La.inject(jS),kt=La}catch{}}return no.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,u="",g=up,y=cp,T=dp;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=Fm(n,1,!1,null,null,a,u,null,g,y,T,tg),n[nr]=r.current,yc(n),new Oc(r)},no.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var u=!1,g="",y=up,T=cp,b=dp,N=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),r=Fm(n,1,!0,r,a??null,u,g,N,y,T,b,tg),r.context=jm(null),a=r.current,u=Ht(),u=Cl(u),g=ni(u),g.callback=null,ii(a,g,u),a=u,r.current.lanes=a,ds(r,a),En(r),n[nr]=r.current,yc(n),new Oa(r)},no.version="19.2.0",no}var fg;function iT(){if(fg)return Bc.exports;fg=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bc.exports=nT(),Bc.exports}var rT=iT();const sT=Rd(rT);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hg="popstate";function oT(t={}){function e(o,l){let{pathname:c="/",search:f="",hash:h=""}=Zi(o.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),id("",{pathname:c,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let h=o.location.href,p=h.indexOf("#");f=p===-1?h:h.slice(0,p)}return f+"#"+(typeof l=="string"?l:ho(l))}function s(o,l){zt(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return lT(e,i,s,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aT(){return Math.random().toString(36).substring(2,10)}function pg(t,e){return{usr:t.state,key:t.key,idx:e}}function id(t,e,i=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Zi(e):e,state:i,key:e&&e.key||s||aT()}}function ho({pathname:t="/",search:e="",hash:i=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Zi(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substring(i),t=t.substring(0,i));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function lT(t,e,i,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f="POP",h=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function E(){f="POP";let A=v(),k=A==null?null:A-p;p=A,h&&h({action:f,location:C.location,delta:k})}function S(A,k){f="PUSH";let P=id(C.location,A,k);i&&i(P,A),p=v()+1;let R=pg(P,p),O=C.createHref(P);try{c.pushState(R,"",O)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;o.location.assign(O)}l&&h&&h({action:f,location:C.location,delta:1})}function w(A,k){f="REPLACE";let P=id(C.location,A,k);i&&i(P,A),p=v();let R=pg(P,p),O=C.createHref(P);c.replaceState(R,"",O),l&&h&&h({action:f,location:C.location,delta:0})}function x(A){return uT(A)}let C={get action(){return f},get location(){return t(o,c)},listen(A){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(hg,E),h=A,()=>{o.removeEventListener(hg,E),h=null}},createHref(A){return e(o,A)},createURL:x,encodeLocation(A){let k=x(A);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:S,replace:w,go(A){return c.go(A)}};return C}function uT(t,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),$e(i,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:ho(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function R0(t,e,i="/"){return cT(t,e,i,!1)}function cT(t,e,i,s){let o=typeof e=="string"?Zi(e):e,l=Vn(o.pathname||"/",i);if(l==null)return null;let c=N0(t);dT(c);let f=null;for(let h=0;f==null&&h<c.length;++h){let p=TT(l);f=ET(c[h],p,s)}return f}function N0(t,e=[],i=[],s="",o=!1){let l=(c,f,h=o,p)=>{let v={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&h)return;$e(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let E=Gn([s,v.relativePath]),S=i.concat(v);c.children&&c.children.length>0&&($e(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),N0(c.children,e,S,E,h)),!(c.path==null&&!c.index)&&e.push({path:E,score:vT(E,c.index),routesMeta:S})};return t.forEach((c,f)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))l(c,f);else for(let p of M0(c.path))l(c,f,!0,p)}),e}function M0(t){let e=t.split("/");if(e.length===0)return[];let[i,...s]=e,o=i.endsWith("?"),l=i.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=M0(s.join("/")),f=[];return f.push(...c.map(h=>h===""?l:[l,h].join("/"))),o&&f.push(...c),f.map(h=>t.startsWith("/")&&h===""?"/":h)}function dT(t){t.sort((e,i)=>e.score!==i.score?i.score-e.score:_T(e.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var fT=/^:[\w-]+$/,hT=3,pT=2,mT=1,gT=10,yT=-2,mg=t=>t==="*";function vT(t,e){let i=t.split("/"),s=i.length;return i.some(mg)&&(s+=yT),e&&(s+=pT),i.filter(o=>!mg(o)).reduce((o,l)=>o+(fT.test(l)?hT:l===""?mT:gT),s)}function _T(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function ET(t,e,i=!1){let{routesMeta:s}=t,o={},l="/",c=[];for(let f=0;f<s.length;++f){let h=s[f],p=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Qa({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},v),S=h.route;if(!E&&p&&i&&!s[s.length-1].route.index&&(E=Qa({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Gn([l,E.pathname]),pathnameBase:AT(Gn([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Gn([l,E.pathnameBase]))}return c}function Qa(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[i,s]=ST(t.path,t.caseSensitive,t.end),o=e.match(i);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((p,{paramName:v,isOptional:E},S)=>{if(v==="*"){let x=f[S]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const w=f[S];return E&&!w?p[v]=void 0:p[v]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:t}}function ST(t,e=!1,i=!0){zt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,h)=>(s.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function TT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Vn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,s=t.charAt(i);return s&&s!=="/"?null:t.slice(i)||"/"}var wT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bT=t=>wT.test(t);function xT(t,e="/"){let{pathname:i,search:s="",hash:o=""}=typeof t=="string"?Zi(t):t,l;if(i)if(bT(i))l=i;else{if(i.includes("//")){let c=i;i=i.replace(/\/\/+/g,"/"),zt(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${i}`)}i.startsWith("/")?l=gg(i.substring(1),"/"):l=gg(i,e)}else l=e;return{pathname:l,search:RT(s),hash:NT(o)}}function gg(t,e){let i=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function zc(t,e,i,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CT(t){return t.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Md(t){let e=CT(t);return e.map((i,s)=>s===e.length-1?i.pathname:i.pathnameBase)}function Id(t,e,i,s=!1){let o;typeof t=="string"?o=Zi(t):(o={...t},$e(!o.pathname||!o.pathname.includes("?"),zc("?","pathname","search",o)),$e(!o.pathname||!o.pathname.includes("#"),zc("#","pathname","hash",o)),$e(!o.search||!o.search.includes("#"),zc("#","search","hash",o)));let l=t===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=i;else{let E=e.length-1;if(!s&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}f=E>=0?e[E]:"/"}let h=xT(o,f),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(p||v)&&(h.pathname+="/"),h}var Gn=t=>t.join("/").replace(/\/\/+/g,"/"),AT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I0=["POST","PUT","PATCH","DELETE"];new Set(I0);var IT=["GET",...I0];new Set(IT);var ts=M.createContext(null);ts.displayName="DataRouter";var dl=M.createContext(null);dl.displayName="DataRouterState";M.createContext(!1);var k0=M.createContext({isTransitioning:!1});k0.displayName="ViewTransition";var kT=M.createContext(new Map);kT.displayName="Fetchers";var DT=M.createContext(null);DT.displayName="Await";var fn=M.createContext(null);fn.displayName="Navigation";var vo=M.createContext(null);vo.displayName="Location";var hn=M.createContext({outlet:null,matches:[],isDataRoute:!1});hn.displayName="Route";var kd=M.createContext(null);kd.displayName="RouteError";function UT(t,{relative:e}={}){$e(ns(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=M.useContext(fn),{hash:o,pathname:l,search:c}=_o(t,{relative:e}),f=l;return i!=="/"&&(f=l==="/"?i:Gn([i,l])),s.createHref({pathname:f,search:c,hash:o})}function ns(){return M.useContext(vo)!=null}function Fn(){return $e(ns(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(vo).location}var D0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U0(t){M.useContext(fn).static||M.useLayoutEffect(t)}function fl(){let{isDataRoute:t}=M.useContext(hn);return t?YT():PT()}function PT(){$e(ns(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(ts),{basename:e,navigator:i}=M.useContext(fn),{matches:s}=M.useContext(hn),{pathname:o}=Fn(),l=JSON.stringify(Md(s)),c=M.useRef(!1);return U0(()=>{c.current=!0}),M.useCallback((h,p={})=>{if(zt(c.current,D0),!c.current)return;if(typeof h=="number"){i.go(h);return}let v=Id(h,JSON.parse(l),o,p.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Gn([e,v.pathname])),(p.replace?i.replace:i.push)(v,p.state,p)},[e,i,l,o,t])}M.createContext(null);function P0(){let{matches:t}=M.useContext(hn),e=t[t.length-1];return e?e.params:{}}function _o(t,{relative:e}={}){let{matches:i}=M.useContext(hn),{pathname:s}=Fn(),o=JSON.stringify(Md(i));return M.useMemo(()=>Id(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function OT(t,e){return O0(t,e)}function O0(t,e,i,s,o){var P;$e(ns(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(fn),{matches:c}=M.useContext(hn),f=c[c.length-1],h=f?f.params:{},p=f?f.pathname:"/",v=f?f.pathnameBase:"/",E=f&&f.route;{let R=E&&E.path||"";L0(p,!E||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let S=Fn(),w;if(e){let R=typeof e=="string"?Zi(e):e;$e(v==="/"||((P=R.pathname)==null?void 0:P.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=S;let x=w.pathname||"/",C=x;if(v!=="/"){let R=v.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(R.length).join("/")}let A=R0(t,{pathname:C});zt(E||A!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),zt(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=GT(A&&A.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Gn([v,l.encodeLocation?l.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?v:Gn([v,l.encodeLocation?l.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,i,s,o);return e&&k?M.createElement(vo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function LT(){let t=$T(),e=MT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),i?M.createElement("pre",{style:o},i):null,c)}var qT=M.createElement(LT,null),BT=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?M.createElement(hn.Provider,{value:this.props.routeContext},M.createElement(kd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HT({routeContext:t,match:e,children:i}){let s=M.useContext(ts);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(hn.Provider,{value:t},i)}function GT(t,e=[],i=null,s=null,o=null){if(t==null){if(!i)return null;if(i.errors)t=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)t=i.matches;else return null}let l=t,c=i==null?void 0:i.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);$e(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let f=!1,h=-1;if(i)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(h=v),E.route.id){let{loaderData:S,errors:w}=i,x=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!w||w[E.route.id]===void 0);if(E.route.lazy||x){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}let p=i&&s?(v,E)=>{var S,w;s(v,{location:i.location,params:((w=(S=i.matches)==null?void 0:S[0])==null?void 0:w.params)??{},errorInfo:E})}:void 0;return l.reduceRight((v,E,S)=>{let w,x=!1,C=null,A=null;i&&(w=c&&E.route.id?c[E.route.id]:void 0,C=E.route.errorElement||qT,f&&(h<0&&S===0?(L0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,A=null):h===S&&(x=!0,A=E.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,S+1)),P=()=>{let R;return w?R=C:x?R=A:E.route.Component?R=M.createElement(E.route.Component,null):E.route.element?R=E.route.element:R=v,M.createElement(HT,{match:E,routeContext:{outlet:v,matches:k,isDataRoute:i!=null},children:R})};return i&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?M.createElement(BT,{location:i.location,revalidation:i.revalidation,component:C,error:w,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:p}):P()},null)}function Dd(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VT(t){let e=M.useContext(ts);return $e(e,Dd(t)),e}function zT(t){let e=M.useContext(dl);return $e(e,Dd(t)),e}function FT(t){let e=M.useContext(hn);return $e(e,Dd(t)),e}function Ud(t){let e=FT(t),i=e.matches[e.matches.length-1];return $e(i.route.id,`${t} can only be used on routes that contain a unique "id"`),i.route.id}function jT(){return Ud("useRouteId")}function $T(){var s;let t=M.useContext(kd),e=zT("useRouteError"),i=Ud("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[i]}function YT(){let{router:t}=VT("useNavigate"),e=Ud("useNavigate"),i=M.useRef(!1);return U0(()=>{i.current=!0}),M.useCallback(async(o,l={})=>{zt(i.current,D0),i.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...l}))},[t,e])}var yg={};function L0(t,e,i){!e&&!yg[t]&&(yg[t]=!0,zt(!1,i))}M.memo(JT);function JT({routes:t,future:e,state:i,unstable_onError:s}){return O0(t,void 0,i,s,e)}function Pd({to:t,replace:e,state:i,relative:s}){$e(ns(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext(fn);zt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(hn),{pathname:c}=Fn(),f=fl(),h=Id(t,Md(l),c,s==="path"),p=JSON.stringify(h);return M.useEffect(()=>{f(JSON.parse(p),{replace:e,state:i,relative:s})},[f,p,s,e,i]),null}function en(t){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KT({basename:t="/",children:e=null,location:i,navigationType:s="POP",navigator:o,static:l=!1}){$e(!ns(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof i=="string"&&(i=Zi(i));let{pathname:h="/",search:p="",hash:v="",state:E=null,key:S="default"}=i,w=M.useMemo(()=>{let x=Vn(h,c);return x==null?null:{location:{pathname:x,search:p,hash:v,state:E,key:S},navigationType:s}},[c,h,p,v,E,S,s]);return zt(w!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:M.createElement(fn.Provider,{value:f},M.createElement(vo.Provider,{children:e,value:w}))}function q0({children:t,location:e}){return OT(rd(t),e)}function rd(t,e=[]){let i=[];return M.Children.forEach(t,(s,o)=>{if(!M.isValidElement(s))return;let l=[...e,o];if(s.type===M.Fragment){i.push.apply(i,rd(s.props.children,l));return}$e(s.type===en,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=rd(s.props.children,l)),i.push(c)}),i}var Ja="get",Ka="application/x-www-form-urlencoded";function hl(t){return t!=null&&typeof t.tagName=="string"}function WT(t){return hl(t)&&t.tagName.toLowerCase()==="button"}function XT(t){return hl(t)&&t.tagName.toLowerCase()==="form"}function QT(t){return hl(t)&&t.tagName.toLowerCase()==="input"}function ZT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ew(t,e){return t.button===0&&(!e||e==="_self")&&!ZT(t)}var qa=null;function tw(){if(qa===null)try{new FormData(document.createElement("form"),0),qa=!1}catch{qa=!0}return qa}var nw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fc(t){return t!=null&&!nw.has(t)?(zt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ka}"`),null):t}function iw(t,e){let i,s,o,l,c;if(XT(t)){let f=t.getAttribute("action");s=f?Vn(f,e):null,i=t.getAttribute("method")||Ja,o=Fc(t.getAttribute("enctype"))||Ka,l=new FormData(t)}else if(WT(t)||QT(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||f.getAttribute("action");if(s=h?Vn(h,e):null,i=t.getAttribute("formmethod")||f.getAttribute("method")||Ja,o=Fc(t.getAttribute("formenctype"))||Fc(f.getAttribute("enctype"))||Ka,l=new FormData(f,t),!tw()){let{name:p,type:v,value:E}=t;if(v==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,E)}}else{if(hl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Ja,s=null,o=Ka,c=t}return l&&o==="text/plain"&&(c=l,l=void 0),{action:s,method:i.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Od(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rw(t,e,i){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${i}`:e&&Vn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function sw(t,e){if(t.id in e)return e[t.id];try{let i=await import(t.module);return e[t.id]=i,i}catch(i){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ow(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aw(t,e,i){let s=await Promise.all(t.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await sw(l,i);return c.links?c.links():[]}return[]}));return dw(s.flat(1).filter(ow).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function vg(t,e,i,s,o,l){let c=(h,p)=>i[p]?h.route.id!==i[p].route.id:!0,f=(h,p)=>{var v;return i[p].pathname!==h.pathname||((v=i[p].route.path)==null?void 0:v.endsWith("*"))&&i[p].params["*"]!==h.params["*"]};return l==="assets"?e.filter((h,p)=>c(h,p)||f(h,p)):l==="data"?e.filter((h,p)=>{var E;let v=s.routes[h.route.id];if(!v||!v.hasLoader)return!1;if(c(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let S=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=i[0])==null?void 0:E.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function lw(t,e,{includeHydrateFallback:i}={}){return uw(t.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function uw(t){return[...new Set(t)]}function cw(t){let e={},i=Object.keys(t).sort();for(let s of i)e[s]=t[s];return e}function dw(t,e){let i=new Set;return new Set(e),t.reduce((s,o)=>{let l=JSON.stringify(cw(o));return i.has(l)||(i.add(l),s.push({key:l,link:o})),s},[])}function B0(){let t=M.useContext(ts);return Od(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function fw(){let t=M.useContext(dl);return Od(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ld=M.createContext(void 0);Ld.displayName="FrameworkContext";function H0(){let t=M.useContext(Ld);return Od(t,"You must render this element inside a <HydratedRouter> element"),t}function hw(t,e){let i=M.useContext(Ld),[s,o]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:v,onTouchStart:E}=e,S=M.useRef(null);M.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let C=k=>{k.forEach(P=>{c(P.isIntersecting)})},A=new IntersectionObserver(C,{threshold:.5});return S.current&&A.observe(S.current),()=>{A.disconnect()}}},[t]),M.useEffect(()=>{if(s){let C=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(C)}}},[s]);let w=()=>{o(!0)},x=()=>{o(!1),c(!1)};return i?t!=="intent"?[l,S,{}]:[l,S,{onFocus:io(f,w),onBlur:io(h,x),onMouseEnter:io(p,w),onMouseLeave:io(v,x),onTouchStart:io(E,w)}]:[!1,S,{}]}function io(t,e){return i=>{t&&t(i),i.defaultPrevented||e(i)}}function pw({page:t,...e}){let{router:i}=B0(),s=M.useMemo(()=>R0(i.routes,t,i.basename),[i.routes,t,i.basename]);return s?M.createElement(gw,{page:t,matches:s,...e}):null}function mw(t){let{manifest:e,routeModules:i}=H0(),[s,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return aw(t,e,i).then(c=>{l||o(c)}),()=>{l=!0}},[t,e,i]),s}function gw({page:t,matches:e,...i}){let s=Fn(),{manifest:o,routeModules:l}=H0(),{basename:c}=B0(),{loaderData:f,matches:h}=fw(),p=M.useMemo(()=>vg(t,e,h,o,s,"data"),[t,e,h,o,s]),v=M.useMemo(()=>vg(t,e,h,o,s,"assets"),[t,e,h,o,s]),E=M.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let x=new Set,C=!1;if(e.forEach(k=>{var R;let P=o.routes[k.route.id];!P||!P.hasLoader||(!p.some(O=>O.route.id===k.route.id)&&k.route.id in f&&((R=l[k.route.id])!=null&&R.shouldRevalidate)||P.hasClientLoader?C=!0:x.add(k.route.id))}),x.size===0)return[];let A=rw(t,c,"data");return C&&x.size>0&&A.searchParams.set("_routes",e.filter(k=>x.has(k.route.id)).map(k=>k.route.id).join(",")),[A.pathname+A.search]},[c,f,s,o,p,e,t,l]),S=M.useMemo(()=>lw(v,o),[v,o]),w=mw(v);return M.createElement(M.Fragment,null,E.map(x=>M.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...i})),S.map(x=>M.createElement("link",{key:x,rel:"modulepreload",href:x,...i})),w.map(({key:x,link:C})=>M.createElement("link",{key:x,nonce:i.nonce,...C})))}function yw(...t){return e=>{t.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var G0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G0&&(window.__reactRouterVersion="7.9.6")}catch{}function vw({basename:t,children:e,window:i}){let s=M.useRef();s.current==null&&(s.current=oT({window:i,v5Compat:!0}));let o=s.current,[l,c]=M.useState({action:o.action,location:o.location}),f=M.useCallback(h=>{M.startTransition(()=>c(h))},[c]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.createElement(KT,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:o})}var V0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ti=M.forwardRef(function({onClick:e,discover:i="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:f,target:h,to:p,preventScrollReset:v,viewTransition:E,...S},w){let{basename:x}=M.useContext(fn),C=typeof p=="string"&&V0.test(p),A,k=!1;if(typeof p=="string"&&C&&(A=p,G0))try{let K=new URL(window.location.href),W=p.startsWith("//")?new URL(K.protocol+p):new URL(p),Q=Vn(W.pathname,x);W.origin===K.origin&&Q!=null?p=Q+W.search+W.hash:k=!0}catch{zt(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=UT(p,{relative:o}),[R,O,H]=hw(s,S),F=Tw(p,{replace:c,state:f,target:h,preventScrollReset:v,relative:o,viewTransition:E});function j(K){e&&e(K),K.defaultPrevented||F(K)}let de=M.createElement("a",{...S,...H,href:A||P,onClick:k||l?e:j,ref:yw(w,O),target:h,"data-discover":!C&&i==="render"?"true":void 0});return R&&!C?M.createElement(M.Fragment,null,de,M.createElement(pw,{page:P})):de});Ti.displayName="Link";var _w=M.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:f,children:h,...p},v){let E=_o(c,{relative:p.relative}),S=Fn(),w=M.useContext(dl),{navigator:x,basename:C}=M.useContext(fn),A=w!=null&&Aw(E)&&f===!0,k=x.encodeLocation?x.encodeLocation(E).pathname:E.pathname,P=S.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(P=P.toLowerCase(),R=R?R.toLowerCase():null,k=k.toLowerCase()),R&&C&&(R=Vn(R,C)||R);const O=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let H=P===k||!o&&P.startsWith(k)&&P.charAt(O)==="/",F=R!=null&&(R===k||!o&&R.startsWith(k)&&R.charAt(k.length)==="/"),j={isActive:H,isPending:F,isTransitioning:A},de=H?e:void 0,K;typeof s=="function"?K=s(j):K=[s,H?"active":null,F?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let W=typeof l=="function"?l(j):l;return M.createElement(Ti,{...p,"aria-current":de,className:K,ref:v,style:W,to:c,viewTransition:f},typeof h=="function"?h(j):h)});_w.displayName="NavLink";var Ew=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:i,reloadDocument:s,replace:o,state:l,method:c=Ja,action:f,onSubmit:h,relative:p,preventScrollReset:v,viewTransition:E,...S},w)=>{let x=xw(),C=Cw(f,{relative:p}),A=c.toLowerCase()==="get"?"get":"post",k=typeof f=="string"&&V0.test(f),P=R=>{if(h&&h(R),R.defaultPrevented)return;R.preventDefault();let O=R.nativeEvent.submitter,H=(O==null?void 0:O.getAttribute("formmethod"))||c;x(O||R.currentTarget,{fetcherKey:e,method:H,navigate:i,replace:o,state:l,relative:p,preventScrollReset:v,viewTransition:E})};return M.createElement("form",{ref:w,method:A,action:C,onSubmit:s?h:P,...S,"data-discover":!k&&t==="render"?"true":void 0})});Ew.displayName="Form";function Sw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z0(t){let e=M.useContext(ts);return $e(e,Sw(t)),e}function Tw(t,{target:e,replace:i,state:s,preventScrollReset:o,relative:l,viewTransition:c}={}){let f=fl(),h=Fn(),p=_o(t,{relative:l});return M.useCallback(v=>{if(ew(v,e)){v.preventDefault();let E=i!==void 0?i:ho(h)===ho(p);f(t,{replace:E,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[h,f,p,i,s,e,t,o,l,c])}var ww=0,bw=()=>`__${String(++ww)}__`;function xw(){let{router:t}=z0("useSubmit"),{basename:e}=M.useContext(fn),i=jT();return M.useCallback(async(s,o={})=>{let{action:l,method:c,encType:f,formData:h,body:p}=iw(s,e);if(o.navigate===!1){let v=o.fetcherKey||bw();await t.fetch(v,i,o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||f,flushSync:o.flushSync})}else await t.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:h,body:p,formMethod:o.method||c,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,i])}function Cw(t,{relative:e}={}){let{basename:i}=M.useContext(fn),s=M.useContext(hn);$e(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={..._o(t||".",{relative:e})},c=Fn();if(t==null){l.search=c.search;let f=new URLSearchParams(l.search),h=f.getAll("index");if(h.some(v=>v==="")){f.delete("index"),h.filter(E=>E).forEach(E=>f.append("index",E));let v=f.toString();l.search=v?`?${v}`:""}}return(!t||t===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:Gn([i,l.pathname])),ho(l)}function Aw(t,{relative:e}={}){let i=M.useContext(k0);$e(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=z0("useViewTransitionState"),o=_o(t,{relative:e});if(!i.isTransitioning)return!1;let l=Vn(i.currentLocation.pathname,s)||i.currentLocation.pathname,c=Vn(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Qa(o.pathname,c)!=null||Qa(o.pathname,l)!=null}var sd=function(t,e){return sd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])},sd(t,e)};function F0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");sd(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Za=function(){return Za=Object.assign||function(e){for(var i,s=1,o=arguments.length;s<o;s++){i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Za.apply(this,arguments)};function is(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(i[s[o]]=t[s[o]]);return i}function j0(t,e,i,s){var o=arguments.length,l=o<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,i):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,i,s);else for(var f=t.length-1;f>=0;f--)(c=t[f])&&(l=(o<3?c(l):o>3?c(e,i,l):c(e,i))||l);return o>3&&l&&Object.defineProperty(e,i,l),l}function $0(t,e){return function(i,s){e(i,s,t)}}function Y0(t,e,i,s,o,l){function c(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var f=s.kind,h=f==="getter"?"get":f==="setter"?"set":"value",p=!e&&t?s.static?t:t.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),E,S=!1,w=i.length-1;w>=0;w--){var x={};for(var C in s)x[C]=C==="access"?{}:s[C];for(var C in s.access)x.access[C]=s.access[C];x.addInitializer=function(k){if(S)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(k||null))};var A=(0,i[w])(f==="accessor"?{get:v.get,set:v.set}:v[h],x);if(f==="accessor"){if(A===void 0)continue;if(A===null||typeof A!="object")throw new TypeError("Object expected");(E=c(A.get))&&(v.get=E),(E=c(A.set))&&(v.set=E),(E=c(A.init))&&o.unshift(E)}else(E=c(A))&&(f==="field"?o.unshift(E):v[h]=E)}p&&Object.defineProperty(p,s.name,v),S=!0}function J0(t,e,i){for(var s=arguments.length>2,o=0;o<e.length;o++)i=s?e[o].call(t,i):e[o].call(t);return s?i:void 0}function K0(t){return typeof t=="symbol"?t:"".concat(t)}function W0(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function X0(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ce(t,e,i,s){function o(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function f(v){try{p(s.next(v))}catch(E){c(E)}}function h(v){try{p(s.throw(v))}catch(E){c(E)}}function p(v){v.done?l(v.value):o(v.value).then(f,h)}p((s=s.apply(t,e||[])).next())})}function Q0(t,e){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(p){return function(v){return h([p,v])}}function h(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(i=0)),i;)try{if(s=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return i.label++,{value:p[1],done:!1};case 5:i.label++,o=p[1],p=[0];continue;case 7:p=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){i=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){i.label=p[1];break}if(p[0]===6&&i.label<l[1]){i.label=l[1],l=p;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(p);break}l[2]&&i.ops.pop(),i.trys.pop();continue}p=e.call(t,i)}catch(v){p=[6,v],o=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var pl=Object.create?(function(t,e,i,s){s===void 0&&(s=i);var o=Object.getOwnPropertyDescriptor(e,i);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,o)}):(function(t,e,i,s){s===void 0&&(s=i),t[s]=e[i]});function Z0(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&pl(e,t,i)}function el(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qd(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var s=i.call(t),o,l=[],c;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)l.push(o.value)}catch(f){c={error:f}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(c)throw c.error}}return l}function ev(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qd(arguments[e]));return t}function tv(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var s=Array(t),o=0,e=0;e<i;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,o++)s[o]=l[c];return s}function nv(t,e,i){if(i||arguments.length===2)for(var s=0,o=e.length,l;s<o;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return t.concat(l||Array.prototype.slice.call(e))}function es(t){return this instanceof es?(this.v=t,this):new es(t)}function iv(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(w){return function(x){return Promise.resolve(x).then(w,E)}}function f(w,x){s[w]&&(o[w]=function(C){return new Promise(function(A,k){l.push([w,C,A,k])>1||h(w,C)})},x&&(o[w]=x(o[w])))}function h(w,x){try{p(s[w](x))}catch(C){S(l[0][3],C)}}function p(w){w.value instanceof es?Promise.resolve(w.value.v).then(v,E):S(l[0][2],w)}function v(w){h("next",w)}function E(w){h("throw",w)}function S(w,x){w(x),l.shift(),l.length&&h(l[0][0],l[0][1])}}function rv(t){var e,i;return e={},s("next"),s("throw",function(o){throw o}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(o,l){e[o]=t[o]?function(c){return(i=!i)?{value:es(t[o](c)),done:!1}:l?l(c):c}:l}}function sv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof el=="function"?el(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(f,h){c=t[l](c),o(f,h,c.done,c.value)})}}function o(l,c,f,h){Promise.resolve(h).then(function(p){l({value:p,done:f})},c)}}function ov(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Rw=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},od=function(t){return od=Object.getOwnPropertyNames||function(e){var i=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[i.length]=s);return i},od(t)};function av(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=od(t),s=0;s<i.length;s++)i[s]!=="default"&&pl(e,t,i[s]);return Rw(e,t),e}function lv(t){return t&&t.__esModule?t:{default:t}}function uv(t,e,i,s){if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?s:i==="a"?s.call(t):s?s.value:e.get(t)}function cv(t,e,i,s,o){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?o.call(t,i):o?o.value=i:e.set(t,i),i}function dv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function fv(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,o;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],i&&(o=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");o&&(s=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),t.stack.push({value:e,dispose:s,async:i})}else i&&t.stack.push({async:!0});return e}var Nw=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var s=new Error(i);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function hv(t){function e(l){t.error=t.hasError?new Nw(l,t.error,"An error was suppressed during disposal."):l,t.hasError=!0}var i,s=0;function o(){for(;i=t.stack.pop();)try{if(!i.async&&s===1)return s=0,t.stack.push(i),Promise.resolve().then(o);if(i.dispose){var l=i.dispose.call(i.value);if(i.async)return s|=2,Promise.resolve(l).then(o,function(c){return e(c),o()})}else s|=1}catch(c){e(c)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function pv(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,s,o,l,c){return s?e?".jsx":".js":o&&(!l||!c)?i:o+l+"."+c.toLowerCase()+"js"}):t}const Mw={__extends:F0,__assign:Za,__rest:is,__decorate:j0,__param:$0,__esDecorate:Y0,__runInitializers:J0,__propKey:K0,__setFunctionName:W0,__metadata:X0,__awaiter:ce,__generator:Q0,__createBinding:pl,__exportStar:Z0,__values:el,__read:qd,__spread:ev,__spreadArrays:tv,__spreadArray:nv,__await:es,__asyncGenerator:iv,__asyncDelegator:rv,__asyncValues:sv,__makeTemplateObject:ov,__importStar:av,__importDefault:lv,__classPrivateFieldGet:uv,__classPrivateFieldSet:cv,__classPrivateFieldIn:dv,__addDisposableResource:fv,__disposeResources:hv,__rewriteRelativeImportExtension:pv},Iw=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fv,get __assign(){return Za},__asyncDelegator:rv,__asyncGenerator:iv,__asyncValues:sv,__await:es,__awaiter:ce,__classPrivateFieldGet:uv,__classPrivateFieldIn:dv,__classPrivateFieldSet:cv,__createBinding:pl,__decorate:j0,__disposeResources:hv,__esDecorate:Y0,__exportStar:Z0,__extends:F0,__generator:Q0,__importDefault:lv,__importStar:av,__makeTemplateObject:ov,__metadata:X0,__param:$0,__propKey:K0,__read:qd,__rest:is,__rewriteRelativeImportExtension:pv,__runInitializers:J0,__setFunctionName:W0,__spread:ev,__spreadArray:nv,__spreadArrays:tv,__values:el,default:Mw},Symbol.toStringTag,{value:"Module"})),kw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Bd extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}}class Dw extends Bd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _g extends Bd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Eg extends Bd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ad;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ad||(ad={}));class Uw{constructor(e,{headers:i={},customFetch:s,region:o=ad.Any}={}){this.url=e,this.headers=i,this.region=o,this.fetch=kw(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ce(this,arguments,void 0,function*(i,s={}){var o;let l,c;try{const{headers:f,method:h,body:p,signal:v,timeout:E}=s;let S={},{region:w}=s;w||(w=this.region);const x=new URL(`${this.url}/${i}`);w&&w!=="any"&&(S["x-region"]=w,x.searchParams.set("forceFunctionRegion",w));let C;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(S["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(S["Content-Type"]="application/json",C=JSON.stringify(p)):C=p;let A=v;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),v?(A=c.signal,v.addEventListener("abort",()=>c.abort())):A=c.signal);const k=yield this.fetch(x.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),f),body:C,signal:A}).catch(H=>{throw new Dw(H)}),P=k.headers.get("x-relay-error");if(P&&P==="true")throw new _g(k);if(!k.ok)throw new Eg(k);let R=((o=k.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),O;return R==="application/json"?O=yield k.json():R==="application/octet-stream"||R==="application/pdf"?O=yield k.blob():R==="text/event-stream"?O=k:R==="multipart/form-data"?O=yield k.formData():O=yield k.text(),{data:O,error:null,response:k}}catch(f){return{data:null,error:f,response:f instanceof Eg||f instanceof _g?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var _t={};const rs=JS(Iw);var Ba={},Ha={},Ga={},Va={},za={},Fa={},Sg;function mv(){if(Sg)return Fa;Sg=1,Object.defineProperty(Fa,"__esModule",{value:!0});class t extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}}return Fa.default=t,Fa}var Tg;function gv(){if(Tg)return za;Tg=1,Object.defineProperty(za,"__esModule",{value:!0});const e=rs.__importDefault(mv());class i{constructor(o){var l,c;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(c=o.isMaybeSingle)!==null&&c!==void 0?c:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var p,v,E,S;let w=null,x=null,C=null,A=h.status,k=h.statusText;if(h.ok){if(this.method!=="HEAD"){const H=await h.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?x=H:x=JSON.parse(H))}const R=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),O=(E=h.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");R&&O&&O.length>1&&(C=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(w={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,C=null,A=406,k="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const R=await h.text();try{w=JSON.parse(R),Array.isArray(w)&&h.status===404&&(x=[],w=null,A=200,k="OK")}catch{h.status===404&&R===""?(A=204,k="No Content"):w={message:R}}if(w&&this.isMaybeSingle&&(!((S=w==null?void 0:w.details)===null||S===void 0)&&S.includes("0 rows"))&&(w=null,A=200,k="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:x,count:C,status:A,statusText:k}});return this.shouldThrowOnError||(f=f.catch(h=>{var p,v,E;return{error:{message:`${(p=h==null?void 0:h.name)!==null&&p!==void 0?p:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(E=h==null?void 0:h.code)!==null&&E!==void 0?E:""}`},data:null,count:null,status:0,statusText:""}})),f.then(o,l)}returns(){return this}overrideTypes(){return this}}return za.default=i,za}var wg;function yv(){if(wg)return Va;wg=1,Object.defineProperty(Va,"__esModule",{value:!0});const e=rs.__importDefault(gv());class i extends e.default{select(o){let l=!1;const c=(o??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:h=f}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${o}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${o}`),this}range(o,l,{foreignTable:c,referencedTable:f=c}={}){const h=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:h=!1,format:p="text"}={}){var v;const E=[o?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,h?"wal":null].filter(Boolean).join("|"),S=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return Va.default=i,Va}var bg;function Hd(){if(bg)return Ga;bg=1,Object.defineProperty(Ga,"__esModule",{value:!0});const e=rs.__importDefault(yv()),i=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(h=>typeof h=="string"&&i.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const h=f?`${f}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return Ga.default=s,Ga}var xg;function vv(){if(xg)return Ha;xg=1,Object.defineProperty(Ha,"__esModule",{value:!0});const e=rs.__importDefault(Hd());class i{constructor(o,{headers:l={},schema:c,fetch:f}){this.url=o,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(o,l){const{head:c=!1,count:f}=l??{},h=c?"HEAD":"GET";let p=!1;const v=(o??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:c=!0}={}){var f;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((v,E)=>v.concat(Object.keys(E)),[]);if(p.length>0){const v=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:h=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const E=o.reduce((S,w)=>S.concat(Object.keys(w)),[]);if(E.length>0){const S=[...new Set(E)].map(w=>`"${w}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:o}={}){var l;const c="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return Ha.default=i,Ha}var Cg;function Pw(){if(Cg)return Ba;Cg=1,Object.defineProperty(Ba,"__esModule",{value:!0});const t=rs,e=t.__importDefault(vv()),i=t.__importDefault(Hd());class s{constructor(l,{headers:c={},schema:f,fetch:h}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=h}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:h=!1,count:p}={}){var v;let E;const S=new URL(`${this.url}/rpc/${l}`);let w;f||h?(E=f?"HEAD":"GET",Object.entries(c).filter(([C,A])=>A!==void 0).map(([C,A])=>[C,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([C,A])=>{S.searchParams.append(C,A)})):(E="POST",w=c);const x=new Headers(this.headers);return p&&x.set("Prefer",`count=${p}`),new i.default({method:E,url:S,headers:x,schema:this.schemaName,body:w,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Ba.default=s,Ba}var Ag;function Ow(){if(Ag)return _t;Ag=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const t=rs,e=t.__importDefault(Pw());_t.PostgrestClient=e.default;const i=t.__importDefault(vv());_t.PostgrestQueryBuilder=i.default;const s=t.__importDefault(Hd());_t.PostgrestFilterBuilder=s.default;const o=t.__importDefault(yv());_t.PostgrestTransformBuilder=o.default;const l=t.__importDefault(gv());_t.PostgrestBuilder=l.default;const c=t.__importDefault(mv());return _t.PostgrestError=c.default,_t.default={PostgrestClient:e.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default},_t}var _v=Ow();const Ev=Rd(_v),Lw=YS({__proto__:null,default:Ev},[_v]),{PostgrestClient:qw,PostgrestQueryBuilder:hk,PostgrestFilterBuilder:pk,PostgrestTransformBuilder:mk,PostgrestBuilder:gk,PostgrestError:yk}=Ev||Lw;class Bw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const s=i.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Hw="2.81.1",Gw=`realtime-js/${Hw}`,Sv="1.0.0",Vw="2.0.0",Rg=Sv,ld=1e4,zw=1e3,Fw=100;var Yi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yi||(Yi={}));var ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ut||(ut={}));var tn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tn||(tn={}));var ud;(function(t){t.websocket="websocket"})(ud||(ud={}));var Ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ji||(Ji={}));class jw{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,i){if(this._isArrayBuffer(e.payload))return i(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodePush(e){const{join_ref:i,ref:s,event:o,topic:l,payload:c}=e,f=this.META_LENGTH+i.length+s.length+l.length+o.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let p=new DataView(h),v=0;p.setUint8(v++,this.KINDS.push),p.setUint8(v++,i.length),p.setUint8(v++,s.length),p.setUint8(v++,l.length),p.setUint8(v++,o.length),Array.from(i,S=>p.setUint8(v++,S.charCodeAt(0))),Array.from(s,S=>p.setUint8(v++,S.charCodeAt(0))),Array.from(l,S=>p.setUint8(v++,S.charCodeAt(0))),Array.from(o,S=>p.setUint8(v++,S.charCodeAt(0)));var E=new Uint8Array(h.byteLength+c.byteLength);return E.set(new Uint8Array(h),0),E.set(new Uint8Array(c),h.byteLength),E.buffer}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const{join_ref:o,ref:l,topic:c}=e,f=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),p=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+c.length+f.length,v=new ArrayBuffer(this.HEADER_LENGTH+p);let E=new DataView(v),S=0;E.setUint8(S++,this.KINDS.userBroadcastPush),E.setUint8(S++,o.length),E.setUint8(S++,l.length),E.setUint8(S++,c.length),E.setUint8(S++,f.length),E.setUint8(S++,this.BINARY_ENCODING),Array.from(o,x=>E.setUint8(S++,x.charCodeAt(0))),Array.from(l,x=>E.setUint8(S++,x.charCodeAt(0))),Array.from(c,x=>E.setUint8(S++,x.charCodeAt(0))),Array.from(f,x=>E.setUint8(S++,x.charCodeAt(0)));var w=new Uint8Array(v.byteLength+h.byteLength);return w.set(new Uint8Array(v),0),w.set(new Uint8Array(h),v.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var i,s;const{join_ref:o,ref:l,topic:c}=e,f=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},v=new TextEncoder().encode(JSON.stringify(h)).buffer,E=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+c.length+f.length,S=new ArrayBuffer(this.HEADER_LENGTH+E);let w=new DataView(S),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,o.length),w.setUint8(x++,l.length),w.setUint8(x++,c.length),w.setUint8(x++,f.length),w.setUint8(x++,this.JSON_ENCODING),Array.from(o,A=>w.setUint8(x++,A.charCodeAt(0))),Array.from(l,A=>w.setUint8(x++,A.charCodeAt(0))),Array.from(c,A=>w.setUint8(x++,A.charCodeAt(0))),Array.from(f,A=>w.setUint8(x++,A.charCodeAt(0)));var C=new Uint8Array(S.byteLength+v.byteLength);return C.set(new Uint8Array(S),0),C.set(new Uint8Array(v),S.byteLength),C.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[o,l,c,f,h]=s;return i({join_ref:o,ref:l,topic:c,event:f,payload:h})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),o=new TextDecoder;switch(s){case this.KINDS.push:return this._decodePush(e,i,o);case this.KINDS.reply:return this._decodeReply(e,i,o);case this.KINDS.broadcast:return this._decodeBroadcast(e,i,o);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,i,o)}}_decodePush(e,i,s){const o=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3);let f=this.HEADER_LENGTH+this.META_LENGTH-1;const h=s.decode(e.slice(f,f+o));f=f+o;const p=s.decode(e.slice(f,f+l));f=f+l;const v=s.decode(e.slice(f,f+c));f=f+c;const E=JSON.parse(s.decode(e.slice(f,e.byteLength)));return{join_ref:h,ref:null,topic:p,event:v,payload:E}}_decodeReply(e,i,s){const o=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),f=i.getUint8(4);let h=this.HEADER_LENGTH+this.META_LENGTH;const p=s.decode(e.slice(h,h+o));h=h+o;const v=s.decode(e.slice(h,h+l));h=h+l;const E=s.decode(e.slice(h,h+c));h=h+c;const S=s.decode(e.slice(h,h+f));h=h+f;const w=JSON.parse(s.decode(e.slice(h,e.byteLength))),x={status:S,response:w};return{join_ref:p,ref:v,topic:E,event:tn.reply,payload:x}}_decodeBroadcast(e,i,s){const o=i.getUint8(1),l=i.getUint8(2);let c=this.HEADER_LENGTH+2;const f=s.decode(e.slice(c,c+o));c=c+o;const h=s.decode(e.slice(c,c+l));c=c+l;const p=JSON.parse(s.decode(e.slice(c,e.byteLength)));return{join_ref:null,ref:null,topic:f,event:h,payload:p}}_decodeUserBroadcast(e,i,s){const o=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),f=i.getUint8(4);let h=this.HEADER_LENGTH+4;const p=s.decode(e.slice(h,h+o));h=h+o;const v=s.decode(e.slice(h,h+l));h=h+l;const E=s.decode(e.slice(h,h+c));h=h+c;const S=e.slice(h,e.byteLength),w=f===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,x={type:this.BROADCAST,event:v,payload:w};return c>0&&(x.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST,payload:x}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e==null?void 0:e.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}}class Tv{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ge;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ge||(Ge={}));const Ng=(t,e,i={})=>{var s;const o=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=$w(c,t,e,o),l),{}):{}},$w=(t,e,i,s)=>{const o=e.find(f=>f.name===t),l=o==null?void 0:o.type,c=i[t];return l&&!s.includes(l)?wv(l,c):cd(c)},wv=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return Ww(e,i)}switch(t){case Ge.bool:return Yw(e);case Ge.float4:case Ge.float8:case Ge.int2:case Ge.int4:case Ge.int8:case Ge.numeric:case Ge.oid:return Jw(e);case Ge.json:case Ge.jsonb:return Kw(e);case Ge.timestamp:return Xw(e);case Ge.abstime:case Ge.date:case Ge.daterange:case Ge.int4range:case Ge.int8range:case Ge.money:case Ge.reltime:case Ge.text:case Ge.time:case Ge.timestamptz:case Ge.timetz:case Ge.tsrange:case Ge.tstzrange:return cd(e);default:return cd(e)}},cd=t=>t,Yw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Jw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Kw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Ww=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>wv(e,f))}return t},Xw=t=>typeof t=="string"?t.replace(" ","T"):t,bv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class jc{constructor(e,i,s={},o=ld){this.channel=e,this.event=i,this.payload=s,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Mg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Mg||(Mg={}));class uo{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},o=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=uo.syncState(this.state,o,l,c),this.pendingDiffs.forEach(h=>{this.state=uo.syncDiff(this.state,h,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},o=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=uo.syncDiff(this.state,o,l,c),f())}),this.onJoin((o,l,c)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:c})}),this.onLeave((o,l,c)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,o){const l=this.cloneDeep(e),c=this.transformState(i),f={},h={};return this.map(l,(p,v)=>{c[p]||(h[p]=v)}),this.map(c,(p,v)=>{const E=l[p];if(E){const S=v.map(A=>A.presence_ref),w=E.map(A=>A.presence_ref),x=v.filter(A=>w.indexOf(A.presence_ref)<0),C=E.filter(A=>S.indexOf(A.presence_ref)<0);x.length>0&&(f[p]=x),C.length>0&&(h[p]=C)}else f[p]=v}),this.syncDiff(l,{joins:f,leaves:h},s,o)}static syncDiff(e,i,s,o){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),o||(o=()=>{}),this.map(l,(f,h)=>{var p;const v=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(h),v.length>0){const E=e[f].map(w=>w.presence_ref),S=v.filter(w=>E.indexOf(w.presence_ref)<0);e[f].unshift(...S)}s(f,v,h)}),this.map(c,(f,h)=>{let p=e[f];if(!p)return;const v=h.map(E=>E.presence_ref);p=p.filter(E=>v.indexOf(E.presence_ref)<0),e[f]=p,o(f,p,h),p.length===0&&delete e[f]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const o=e[s];return"metas"in o?i[s]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=o,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ig;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ig||(Ig={}));var co;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(co||(co={}));var Hn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hn||(Hn={}));class Gd{constructor(e,i={config:{}},s){var o,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new jc(this,tn.join,this.params,this.timeout),this.rejoinTimer=new Tv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tn.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new uo(this),this.broadcastEndpointURL=bv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:c,presence:f,private:h}}=this.params,p=(o=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(w=>w.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[co.PRESENCE]&&this.bindings[co.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},S={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(Hn.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(Hn.CLOSED)),this.updateJoinPayload(Object.assign({config:S},E)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:w})=>{var x;if(this.socket.setAuth(),w===void 0){e==null||e(Hn.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,A=(x=C==null?void 0:C.length)!==null&&x!==void 0?x:0,k=[];for(let P=0;P<A;P++){const R=C[P],{filter:{event:O,schema:H,table:F,filter:j}}=R,de=w&&w[P];if(de&&de.event===O&&de.schema===H&&de.table===F&&de.filter===j)k.push(Object.assign(Object.assign({},R),{id:de.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(Hn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Hn.SUBSCRIBED);return}}).receive("error",w=>{this.state=ut.errored,e==null||e(Hn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Hn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===ut.joined&&e===co.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(i==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=s.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let h=f.statusText;try{const p=await f.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,i={}){var s,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,h;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(o=>{s=new jc(this,tn.leave,{},e),s.receive("ok",()=>{i(),o("ok")}).receive("timeout",()=>{i(),o("timed out")}).receive("error",()=>{o("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const o=new AbortController,l=setTimeout(()=>o.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:o.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new jc(this,e,i,s);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Fw){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var o,l;const c=e.toLocaleLowerCase(),{close:f,error:h,leave:p,join:v}=tn;if(s&&[f,h,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,i,s);if(i&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(w=>{var x,C,A;return((x=w.filter)===null||x===void 0?void 0:x.event)==="*"||((A=(C=w.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===c}).map(w=>w.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(w=>{var x,C,A,k,P,R;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in w){const O=w.id,H=(x=w.filter)===null||x===void 0?void 0:x.event;return O&&((C=i.ids)===null||C===void 0?void 0:C.includes(O))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((A=i.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const O=(P=(k=w==null?void 0:w.filter)===null||k===void 0?void 0:k.event)===null||P===void 0?void 0:P.toLocaleLowerCase();return O==="*"||O===((R=i==null?void 0:i.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===c}).map(w=>{if(typeof S=="object"&&"ids"in S){const x=S.data,{schema:C,table:A,commit_timestamp:k,type:P,errors:R}=x;S=Object.assign(Object.assign({},{schema:C,table:A,commit_timestamp:k,eventType:P,new:{},old:{},errors:R}),this._getPayloadRecords(x))}w.callback(S,s)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const o=e.toLocaleLowerCase(),l={type:o,filter:i,callback:s};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Gd.isEqual(o.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tn.close,{},e)}_onError(e){this._on(tn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Ng(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Ng(e.columns,e.old_record)),i}}const $c=()=>{},ja={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qw=[1e3,2e3,5e3,1e4],Zw=1e4,eb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tb{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ld,this.transport=null,this.heartbeatIntervalMs=ja.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$c,this.ref=0,this.reconnectTimer=null,this.vsn=Rg,this.logger=$c,this.conn=null,this.sendBuffer=[],this.serializer=new jw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((s=i==null?void 0:i.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${ud.websocket}`,this.httpEndpoint=bv(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Yi.connecting:return Ji.Connecting;case Yi.open:return Ji.Open;case Yi.closing:return Ji.Closing;default:return Ji.Closed}}isConnected(){return this.connectionState()===Ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===s);if(o)return o;{const l=new Gd(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:o,ref:l}=e,c=()=>{this.encode(e,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${i} ${s} (${l})`,o),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(zw,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ja.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:o,payload:l,ref:c}=i,f=c?`(${c})`:"",h=l.status||"";this.log("receive",`${h} ${s} ${o} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(o,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yi.open||this.conn.readyState===Yi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(tn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",o=new URLSearchParams(i);return`${e}${s}${o}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([eb],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(s=>{const o={access_token:i,version:Gw};i&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(tn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Tv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ja.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,o,l,c,f,h,p,v,E,S,w;switch(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:ld,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:ja.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:$c,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:Rg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(x=>Qw[x-1]||Zw),this.vsn){case Sv:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((x,C)=>C(JSON.stringify(x))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((x,C)=>C(JSON.parse(x)));break;case Vw:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class nb extends Vd{constructor(e,i,s){super(e),this.name="StorageApiError",this.status=i,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dd extends Vd{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}const zd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ib=()=>Response,fd=t=>{if(Array.isArray(t))return t.map(i=>fd(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const o=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=fd(s)}),e},rb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Yc=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},sb=(t,e,i)=>ce(void 0,void 0,void 0,function*(){const s=yield ib();t instanceof s&&!(i!=null&&i.noResolveJson)?t.json().then(o=>{const l=t.status||500,c=(o==null?void 0:o.statusCode)||l+"";e(new nb(Yc(o),l,c))}).catch(o=>{e(new dd(Yc(o),o))}):e(new dd(Yc(t),t))}),ob=(t,e,i,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?o:(rb(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),i))};function Eo(t,e,i,s,o,l){return ce(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(i,ob(e,s,o,l)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>sb(h,f,s))})})}function po(t,e,i,s){return ce(this,void 0,void 0,function*(){return Eo(t,"GET",e,i,s)})}function dn(t,e,i,s,o){return ce(this,void 0,void 0,function*(){return Eo(t,"POST",e,s,o,i)})}function hd(t,e,i,s,o){return ce(this,void 0,void 0,function*(){return Eo(t,"PUT",e,s,o,i)})}function ab(t,e,i,s){return ce(this,void 0,void 0,function*(){return Eo(t,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),s)})}function Fd(t,e,i,s,o){return ce(this,void 0,void 0,function*(){return Eo(t,"DELETE",e,s,o,i)})}class lb{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i}then(e,i){return this.execute().then(e,i)}execute(){return ce(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}var xv;class ub{constructor(e,i){this.downloadFn=e,this.shouldThrowOnError=i,this[xv]="BlobDownloadBuilder",this.promise=null}asStream(){return new lb(this.downloadFn,this.shouldThrowOnError)}then(e,i){return this.getPromise().then(e,i)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ce(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ye(e))return{data:null,error:e};throw e}})}}xv=Symbol.toStringTag;const cb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class db{constructor(e,i={},s,o){this.shouldThrowOnError=!1,this.url=e,this.headers=i,this.bucketId=s,this.fetch=zd(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,i,s,o){return ce(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},kg),o);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),h&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(h))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,h&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),o!=null&&o.headers&&(f=Object.assign(Object.assign({},f),o.headers));const p=this._removeEmptyFolders(i),v=this._getFinalPath(p),E=yield(e=="PUT"?hd:dn)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ye(l))return{data:null,error:l};throw l}})}upload(e,i,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,s)})}uploadToSignedUrl(e,i,s,o){return ce(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",i);try{let h;const p=Object.assign({upsert:kg.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",p.cacheControl)):(h=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const E=yield hd(this.fetch,f.toString(),h,{headers:v});return{data:{path:l,fullPath:E.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Ye(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,i){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const o=Object.assign({},this.headers);i!=null&&i.upsert&&(o["x-upsert"]="true");const l=yield dn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:o}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new Vd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}update(e,i,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,s)})}move(e,i,s){return ce(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}copy(e,i,s){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield dn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}createSignedUrl(e,i,s){return ce(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),l=yield dn(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:i},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}createSignedUrls(e,i,s){return ce(this,void 0,void 0,function*(){try{const o=yield dn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:o.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}download(e,i){const o=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),h=()=>po(this.fetch,`${this.url}/${o}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new ub(h,this.shouldThrowOnError)}info(e){return ce(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const s=yield po(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:fd(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}exists(e){return ce(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield ab(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s)&&s instanceof dd){const o=s.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,i){const s=this._getFinalPath(e),o=[],l=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";l!==""&&o.push(l);const f=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}list(e,i,s){return ce(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},cb),i),{prefix:e||""});return{data:yield dn(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},s),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}listV2(e,i){return ce(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield dn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const Cv="2.81.1",Av={"X-Client-Info":`storage-js/${Cv}`};class fb{constructor(e,i={},s,o){this.shouldThrowOnError=!1;const l=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Av),i),this.fetch=zd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const i=this.listBucketOptionsToQueryString(e);return{data:yield po(this.fetch,`${this.url}/bucket${i}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield po(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}createBucket(e){return ce(this,arguments,void 0,function*(i,s={public:!1}){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{id:i,name:i,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}})}updateBucket(e,i){return ce(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ye(s))return{data:null,error:s};throw s}})}emptyBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}listBucketOptionsToQueryString(e){const i={};return e&&("limit"in e&&(i.limit=String(e.limit)),"offset"in e&&(i.offset=String(e.offset)),e.search&&(i.search=e.search),e.sortColumn&&(i.sortColumn=e.sortColumn),e.sortOrder&&(i.sortOrder=e.sortOrder)),Object.keys(i).length>0?"?"+new URLSearchParams(i).toString():""}}class hb{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Av),i),this.fetch=zd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}listBuckets(e){return ce(this,void 0,void 0,function*(){try{const i=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&i.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&i.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&i.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&i.set("sortOrder",e.sortOrder),e!=null&&e.search&&i.set("search",e.search);const s=i.toString(),o=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield po(this.fetch,o,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}})}}const jd={"X-Client-Info":`storage-js/${Cv}`,"Content-Type":"application/json"};class Rv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gt(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Jc extends Rv{constructor(e,i,s){super(e),this.name="StorageVectorsApiError",this.status=i,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class pb extends Rv{constructor(e,i){super(e),this.name="StorageVectorsUnknownError",this.originalError=i}}var Dg;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Dg||(Dg={}));const $d=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mb=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ug=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gb=(t,e,i)=>ce(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(i!=null&&i.noResolveJson)){const o=t.status||500,l=t;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";e(new Jc(Ug(c),o,f))}).catch(()=>{const c=o+"",f=l.statusText||`HTTP ${o} error`;e(new Jc(f,o,c))});else{const c=o+"",f=l.statusText||`HTTP ${o} error`;e(new Jc(f,o,c))}}else e(new pb(Ug(t),t))}),yb=(t,e,i,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(mb(s)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(s)):o.body=s,Object.assign(Object.assign({},o),i)):o};function vb(t,e,i,s,o,l){return ce(this,void 0,void 0,function*(){return new Promise((c,f)=>{t(i,yb(e,s,o,l)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>gb(h,f,s))})})}function Vt(t,e,i,s,o){return ce(this,void 0,void 0,function*(){return vb(t,"POST",e,s,o,i)})}class _b{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=$d(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}getIndex(e,i){return ce(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}listIndexes(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}deleteIndex(e,i){return ce(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:i},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Gt(s))return{data:null,error:s};throw s}})}}class Eb{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=$d(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}getVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}listVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}queryVectors(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}deleteVectors(e){return ce(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}}class Sb{constructor(e,i={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},jd),i),this.fetch=$d(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}getBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:yield Vt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}listBuckets(){return ce(this,arguments,void 0,function*(e={}){try{return{data:yield Vt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}deleteBucket(e){return ce(this,void 0,void 0,function*(){try{return{data:(yield Vt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Gt(i))return{data:null,error:i};throw i}})}}class Tb extends Sb{constructor(e,i={}){super(e,i.headers||{},i.fetch)}from(e){return new wb(this.url,this.headers,e,this.fetch)}}class wb extends _b{constructor(e,i,s,o){super(e,i,o),this.vectorBucketName=s}createIndex(e){const i=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ce(this,void 0,void 0,function*(){return i.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ce(this,arguments,void 0,function*(i={}){return e.listIndexes.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const i=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ce(this,void 0,void 0,function*(){return i.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const i=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ce(this,void 0,void 0,function*(){return i.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new bb(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class bb extends Eb{constructor(e,i,s,o,l){super(e,i,l),this.vectorBucketName=s,this.indexName=o}putVectors(e){const i=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ce(this,void 0,void 0,function*(){return i.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const i=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ce(this,void 0,void 0,function*(){return i.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ce(this,arguments,void 0,function*(i={}){return e.listVectors.call(this,Object.assign(Object.assign({},i),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const i=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ce(this,void 0,void 0,function*(){return i.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const i=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ce(this,void 0,void 0,function*(){return i.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class xb extends fb{constructor(e,i={},s,o){super(e,i,s,o)}from(e){return new db(this.url,this.headers,e,this.fetch)}get vectors(){return new Tb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new hb(this.url+"/iceberg",this.headers,this.fetch)}}const Cb="2.81.1";let lo="";typeof Deno<"u"?lo="deno":typeof document<"u"?lo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lo="react-native":lo="node";const Ab={"X-Client-Info":`supabase-js-${lo}/${Cb}`},Rb={headers:Ab},Nb={schema:"public"},Mb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ib={},kb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Db=()=>Headers,Ub=(t,e,i)=>{const s=kb(i),o=Db();return async(l,c)=>{var f;const h=(f=await e())!==null&&f!==void 0?f:t;let p=new o(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(l,Object.assign(Object.assign({},c),{headers:p}))}};function Pb(t){return t.endsWith("/")?t:t+"/"}function Ob(t,e){var i,s;const{db:o,auth:l,realtime:c,global:f}=t,{db:h,auth:p,realtime:v,global:E}=e,S={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(i=E==null?void 0:E.headers)!==null&&i!==void 0?i:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?S.accessToken=t.accessToken:delete S.accessToken,S}function Lb(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Pb(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Nv="2.81.1",Yr=30*1e3,pd=3,Kc=pd*Yr,qb="http://localhost:9999",Bb="supabase.auth.token",Hb={"X-Client-Info":`gotrue-js/${Nv}`},md="X-Supabase-Api-Version",Mv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vb=600*1e3;class mo extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function fe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zb extends mo{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function Fb(t){return fe(t)&&t.name==="AuthApiError"}class Ki extends mo{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class wi extends mo{constructor(e,i,s,o){super(e,s,o),this.name=i,this.status=s}}class un extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jb(t){return fe(t)&&t.name==="AuthSessionMissingError"}class Hr extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $a extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ya extends wi{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $b(t){return fe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Pg extends wi{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gd extends wi{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Wc(t){return fe(t)&&t.name==="AuthRetryableFetchError"}class Og extends wi{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class yd extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Lg=` 	
\r=`.split(""),Yb=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Lg.length;e+=1)t[Lg[e].charCodeAt(0)]=-2;for(let e=0;e<tl.length;e+=1)t[tl[e].charCodeAt(0)]=e;return t})();function qg(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(tl[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(tl[s]),e.queuedBits-=6}}function Iv(t,e,i){const s=Yb[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Bg(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=c=>{Wb(c,s,i)};for(let c=0;c<t.length;c+=1)Iv(t.charCodeAt(c),o,l);return e.join("")}function Jb(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Kb(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const o=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|o)+65536,i+=1}Jb(s,e)}}function Wb(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function Wr(t){const e=[],i={queue:0,queuedBits:0},s=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)Iv(t.charCodeAt(o),i,s);return new Uint8Array(e)}function Xb(t){const e=[];return Kb(t,i=>e.push(i)),new Uint8Array(e)}function Wi(t){const e=[],i={queue:0,queuedBits:0},s=o=>{e.push(o)};return t.forEach(o=>qg(o,i,s)),qg(null,i,s),e.join("")}function Qb(t){return Math.round(Date.now()/1e3)+t}function Zb(){return Symbol("auth-callback")}const yt=()=>typeof window<"u"&&typeof document<"u",zi={tested:!1,writable:!1},kv=()=>{if(!yt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zi.tested)return zi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),zi.tested=!0,zi.writable=!0}catch{zi.tested=!0,zi.writable=!1}return zi.writable};function ex(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return i.searchParams.forEach((s,o)=>{e[o]=s}),e}const Dv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tx=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Jr=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Fi=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},_i=async(t,e)=>{await t.removeItem(e)};class ml{constructor(){this.promise=new ml.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}ml.promiseConstructor=Promise;function Xc(t){const e=t.split(".");if(e.length!==3)throw new yd("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!Gb.test(e[s]))throw new yd("JWT not in base64url format");return{header:JSON.parse(Bg(e[0])),payload:JSON.parse(Bg(e[1])),signature:Wr(e[2]),raw:{header:e[0],payload:e[1]}}}async function nx(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ix(t,e){return new Promise((s,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){o(c);return}}})()})}function rx(t){return("0"+t.toString(16)).substr(-2)}function sx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let o="";for(let l=0;l<56;l++)o+=i.charAt(Math.floor(Math.random()*s));return o}return crypto.getRandomValues(e),Array.from(e,rx).join("")}async function ox(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),o=new Uint8Array(s);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function ax(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await ox(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(t,e,i=!1){const s=sx();let o=s;i&&(o+="/PASSWORD_RECOVERY"),await Jr(t,`${e}-code-verifier`,o);const l=await ax(s);return[l,s===l?"plain":"s256"]}const lx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ux(t){const e=t.headers.get(md);if(!e||!e.match(lx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cx(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dx(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vr(t){if(!fx.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hx(t,e){return new Proxy(t,{get:(i,s,o)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,o)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,o)}})}function Hg(t){return JSON.parse(JSON.stringify(t))}const ji=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),px=[502,503,504];async function Gg(t){var e;if(!tx(t))throw new gd(ji(t),0);if(px.includes(t.status))throw new gd(ji(t),t.status);let i;try{i=await t.json()}catch(l){throw new Ki(ji(l),l)}let s;const o=ux(t);if(o&&o.getTime()>=Mv["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new Og(ji(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new un}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Og(ji(i),t.status,i.weak_password.reasons);throw new zb(ji(i),t.status||500,s)}const mx=(t,e,i,s)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(s),Object.assign(Object.assign({},o),i))};async function ye(t,e,i,s){var o;const l=Object.assign({},s==null?void 0:s.headers);l[md]||(l[md]=Mv["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(o=s==null?void 0:s.query)!==null&&o!==void 0?o:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await gx(t,e,i+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function gx(t,e,i,s,o,l){const c=mx(e,s,o,l);let f;try{f=await t(i,Object.assign({},c))}catch(h){throw console.error(h),new gd(ji(h),0)}if(f.ok||await Gg(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(h){await Gg(h)}}function cn(t){var e;let i=null;_x(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=Qb(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function Vg(t){const e=cn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Si(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yx(t){return{data:t,error:null}}function vx(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:o,verification_type:l}=t,c=is(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:i,hashed_token:s,redirect_to:o,verification_type:l},h=Object.assign({},c);return{data:{properties:f,user:h},error:null}}function zg(t){return t}function _x(t){return t.access_token&&t.refresh_token&&t.expires_in}const Zc=["global","local","others"];class Ex{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=Dv(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Zc[0]){if(Zc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zc.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(fe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Si})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=is(e,["options"]),o=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(o.new_email=s==null?void 0:s.newEmail,delete o.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:vx,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(fe(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Si})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,o,l,c,f,h;try{const p={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:zg});if(v.error)throw v.error;const E=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(x=>{const C=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);p[`${A}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(fe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Vr(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Si})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Vr(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:Si})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){Vr(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:Si})}catch(s){if(fe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Vr(e.userId);try{const{data:i,error:s}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:i,error:s}}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Vr(e.userId),Vr(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,o,l,c,f,h;try{const p={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:zg});if(v.error)throw v.error;const E=await v.json(),S=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,w=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return w.length>0&&(w.forEach(x=>{const C=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(x.split(";")[1].split("=")[1]);p[`${A}Page`]=C}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(fe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(fe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(fe(i))return{data:null,error:i};throw i}}}function Fg(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const zr={debug:!!(globalThis&&kv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Uv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sx extends Uv{}async function Tx(t,e,i){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async o=>{if(o){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await i()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Sx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function wx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Pv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function bx(t){return parseInt(t,16)}function xx(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Cx(t){var e;const{chainId:i,domain:s,expirationTime:o,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:h,resources:p,scheme:v,uri:E,version:S}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Pv(t.address),x=v?`${v}://${s}`:s,C=t.statement?`${t.statement}
`:"",A=`${x} wants you to sign in with your Ethereum account:
${w}

${C}`;let k=`URI: ${E}
Version: ${S}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(o&&(k+=`
Expiration Time: ${o.toISOString()}`),f&&(k+=`
Not Before: ${f.toISOString()}`),h&&(k+=`
Request ID: ${h}`),p){let P=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);P+=`
- ${R}`}k+=P}return`${A}
${k}`}class ot extends Error{constructor({message:e,code:i,cause:s,name:o}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=o??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class nl extends ot{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function Ax({error:t,options:e}){var i,s,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(Ov(c)){if(l.rp.id!==c)return new ot({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Rx({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Ov(s)){if(i.rpId!==s)return new ot({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Nx{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Mx=new Nx;function Ix(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,o=is(t,["challenge","user","excludeCredentials"]),l=Wr(e).buffer,c=Object.assign(Object.assign({},i),{id:Wr(i.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];f.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Wr(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function kx(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=is(t,["challenge","allowCredentials"]),o=Wr(e).buffer,l=Object.assign(Object.assign({},s),{challenge:o});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const f=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:Wr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function Dx(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:Wi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Wi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ux(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Wi(new Uint8Array(o.authenticatorData)),clientDataJSON:Wi(new Uint8Array(o.clientDataJSON)),signature:Wi(new Uint8Array(o.signature)),userHandle:o.userHandle?Wi(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ov(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function jg(){var t,e;return!!(yt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Px(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:Ax({error:e,options:t})}}}async function Ox(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nl("Browser returned unexpected credential type",e)}:{data:null,error:new nl("Empty credential response",e)}}catch(e){return{data:null,error:Rx({error:e,options:t})}}}const Lx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},qx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function il(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),i=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),s={};for(const o of t)if(o)for(const l in o){const c=o[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=il(f,c):s[l]=il(c)}else s[l]=c}return s}function Bx(t,e){return il(Lx,t,e||{})}function Hx(t,e){return il(qx,t,e||{})}class Gx{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:o},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!c)return{data:null,error:f};const h=o??Mx.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=Bx(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:E}=await Px({publicKey:p,signal:h});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}case"request":{const p=Hx(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:E}=await Ox(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!i)return{data:null,error:new mo("rpId is required for WebAuthn authentication")};try{if(!jg())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:o},{request:l});if(!c)return{data:null,error:f};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:i,rpOrigins:s,credential_response:h.credential_response}})}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!i)return{data:null,error:new mo("rpId is required for WebAuthn registration")};try{if(!jg())return{data:null,error:new Ki("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var E;return(E=v.data)===null||E===void 0?void 0:E.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:h,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:o},{create:l});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:i,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(c){return fe(c)?{data:null,error:c}:{data:null,error:new Ki("Unexpected error in register",c)}}}}wx();const Vx={url:qb,storageKey:Bb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function $g(t,e,i){return await i()}const Fr={};class go{get jwks(){var e,i;return(i=(e=Fr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Fr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Fr[this.storageKey]=Object.assign(Object.assign({},Fr[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},Vx),e);if(this.storageKey=l.storageKey,this.instanceID=(i=go.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,go.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&yt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Ex({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Dv(l.fetch),this.lock=l.lock||$g,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:yt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Tx:this.lock=$g,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Gx(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:kv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Fg(this.memoryStorage)),yt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Nv}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(yt()&&(i=ex(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),yt()&&this.detectSessionInUrl&&s!=="none"){const{data:o,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),$b(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return fe(i)?this._returnResult({error:i}):this._returnResult({error:new Ki("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,o;try{const l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:cn}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const h=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,o;try{let l;if("email"in e){const{email:v,password:E,options:S}=e;let w=null,x=null;this.flowType==="pkce"&&([w,x]=await Gr(this.storage,this.storageKey)),l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:v,password:E,data:(i=S==null?void 0:S.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:w,code_challenge_method:x},xform:cn})}else if("phone"in e){const{phone:v,password:E,options:S}=e;l=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:E,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(o=S==null?void 0:S.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:cn})}else throw new $a("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const h=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:f}=e;i=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vg})}else if("phone"in e){const{phone:l,password:c,options:f}=e;i=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Vg})}else throw new $a("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!s||!s.session||!s.user){const l=new Hr;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o})}catch(i){if(fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,o,l,c,f,h,p,v,E,S;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:C,wallet:A,statement:k,options:P}=e;let R;if(yt())if(typeof A=="object")R=A;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")R=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=A}const O=new URL((i=P==null?void 0:P.url)!==null&&i!==void 0?i:window.location.href),H=await R.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=Pv(H[0]);let j=(s=P==null?void 0:P.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!j){const K=await R.request({method:"eth_chainId"});j=bx(K)}const de={domain:O.host,address:F,statement:k,uri:O.href,version:"1",chainId:j,nonce:(o=P==null?void 0:P.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(c=(l=P==null?void 0:P.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=P==null?void 0:P.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(h=P==null?void 0:P.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=P==null?void 0:P.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=P==null?void 0:P.signInWithEthereum)===null||v===void 0?void 0:v.resources};w=Cx(de),x=await R.request({method:"personal_sign",params:[xx(w),F]})}try{const{data:C,error:A}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:x},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:cn});if(A)throw A;if(!C||!C.session||!C.user){const k=new Hr;return this._returnResult({data:{user:null,session:null},error:k})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:A})}catch(C){if(fe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(e){var i,s,o,l,c,f,h,p,v,E,S,w;let x,C;if("message"in e)x=e.message,C=e.signature;else{const{chain:A,wallet:k,statement:P,options:R}=e;let O;if(yt())if(typeof k=="object")O=k;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))O=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=k}const H=new URL((i=R==null?void 0:R.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in O&&O.signIn){const F=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),P?{statement:P}:null));let j;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")j=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)j=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)x=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),C=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${H.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...P?["",P,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(s=R==null?void 0:R.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=R==null?void 0:R.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((c=R==null?void 0:R.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((f=R==null?void 0:R.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R==null?void 0:R.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((E=(v=R==null?void 0:R.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||E===void 0)&&E.length?["Resources",...R.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const F=await O.signMessage(new TextEncoder().encode(x),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=F}}try{const{data:A,error:k}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Wi(C)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:cn});if(k)throw k;if(!A||!A.session||!A.user){const P=new Hr;return this._returnResult({data:{user:null,session:null},error:P})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:k})}catch(A){if(fe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const i=await Fi(this.storage,`${this.storageKey}-code-verifier`),[s,o]=(i??"").split("/");try{const{data:l,error:c}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:cn});if(await _i(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new Hr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:c})}catch(l){if(fe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:o,access_token:l,nonce:c}=e,f=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:o,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:cn}),{data:h,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const v=new Hr;return this._returnResult({data:{user:null,session:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(i){if(fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,o,l,c;try{if("email"in e){const{email:f,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Gr(this.storage,this.storageKey));const{error:E}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:h}=e,{data:p,error:v}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(l=h==null?void 0:h.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new $a("You must provide either an email or phone number.")}catch(f){if(fe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var i,s;try{let o,l;"options"in e&&(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:cn});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,p=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var i,s,o,l,c;try{let f=null,h=null;this.flowType==="pkce"&&([f,h]=await Gr(this.storage,this.storageKey));const p=await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:h}),headers:this.headers,xform:yx});return!((l=p.data)===null||l===void 0)&&l.url&&yt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(fe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new un;const{error:o}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(fe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:o,options:l}=e,{error:c}=await ye(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:o,options:l}=e,{data:c,error:f}=await ye(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new $a("You must provide either an email or phone number and a type")}catch(i){if(fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Fi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Kc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await Fi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Qc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=hx(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Si}):await this._useSession(async i=>{var s,o,l;const{data:c,error:f}=i;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new un}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Si})})}catch(i){if(fe(i))return jb(i)&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:o,error:l}=s;if(l)throw l;if(!o.session)throw new un;const c=o.session;let f=null,h=null;this.flowType==="pkce"&&e.email!=null&&([f,h]=await Gr(this.storage,this.storageKey));const{data:p,error:v}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:h}),jwt:c.access_token,xform:Si});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(fe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new un;const i=Date.now()/1e3;let s=i,o=!0,l=null;const{payload:c}=Xc(e.access_token);if(c.exp&&(s=c.exp,o=s<=i),o){const{data:f,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:h}=await this._getUser(e.access_token);if(h)throw h;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(fe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:f}=i;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new un;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(fe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!yt())throw new Ya("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ya(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Pg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ya("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pg("No code detected.");const{data:P,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:P.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:o,access_token:l,refresh_token:c,expires_in:f,expires_at:h,token_type:p}=e;if(!l||!f||!c||!p)throw new Ya("No session defined in URL");const v=Math.round(Date.now()/1e3),E=parseInt(f);let S=v+E;h&&(S=parseInt(h));const w=S-v;w*1e3<=Yr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${E}s`);const x=S-E;v-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,S,v):v-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,S,v);const{data:C,error:A}=await this._getUser(l);if(A)throw A;const k={provider_token:s,provider_refresh_token:o,access_token:l,expires_in:E,expires_at:S,refresh_token:c,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(s){if(fe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Fi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:o,error:l}=i;if(l)return this._returnResult({error:l});const c=(s=o.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(Fb(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await _i(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=Zb(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,o;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=await Gr(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(fe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:o}=await this._useSession(async l=>{var c,f,h,p,v;const{data:E,error:S}=l;if(S)throw S;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",w,{headers:this.headers,jwt:(v=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return yt()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(fe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:o,data:{session:l}}=i;if(o)throw o;const{options:c,provider:f,token:h,access_token:p,nonce:v}=e,E=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:h,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:cn}),{data:S,error:w}=E;return w?this._returnResult({data:{user:null,session:null},error:w}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new Hr}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:w}))}catch(o){if(fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,o;const{data:l,error:c}=i;if(c)throw c;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0})})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await ix(async o=>(o>0&&await nx(200*Math.pow(2,o-1)),this._debug(i,"refreshing attempt",o),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cn})),(o,l)=>{const c=200*Math.pow(2,o);return l&&Wc(l)&&Date.now()+c-s<Yr})}catch(s){if(this._debug(i,"error",s),fe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),yt()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const o=await Fi(this.storage,this.storageKey);if(o&&this.userStorage){let c=await Fi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:o.user},await Jr(this.userStorage,this.storageKey+"-user",c)),o.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Qc()}else if(o&&!o.user&&!o.user){const c=await Fi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(o.user=c.user,await _i(this.storage,this.storageKey+"-user"),await Jr(this.storage,this.storageKey,o)):o.user=Qc()}if(this._debug(s,"session from storage",o),!this._isValidSession(o)){this._debug(s,"session is not valid"),o!==null&&await this._removeSession();return}const l=((i=o.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Kc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Kc}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:c}=await this._callRefreshToken(o.refresh_token);c&&(console.error(c),Wc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(o.access_token);!f&&(c!=null&&c.user)?(o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(s,"error",o),console.error(o);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ml;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new un;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(o,"error",l),fe(l)){const c={data:null,error:l};return Wc(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,i,s=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,i)}catch(h){l.push(h)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await Jr(this.userStorage,this.storageKey+"-user",{user:i.user});const o=Object.assign({},i);delete o.user;const l=Hg(o);await Jr(this.storage,this.storageKey,l)}else{const o=Hg(i);await Jr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await _i(this.storage,this.storageKey),await _i(this.storage,this.storageKey+"-code-verifier"),await _i(this.storage,this.storageKey+"-user"),this.userStorage&&await _i(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Yr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((s.expires_at*1e3-e)/Yr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Yr}ms, refresh threshold is ${pd} ticks`),o<=pd&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Uv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const o=[`provider=${encodeURIComponent(i)}`];if(s!=null&&s.redirectTo&&o.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&o.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Gr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});o.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);o.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&o.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:o,error:l}=i;return l?this._returnResult({data:null,error:l}):await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,o;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Dx(e.webauthn.credential_response):Ux(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:h}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:h}))})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var s;const{data:o,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Ix(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:kx(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i==null?void 0:i.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,i;const{data:{session:s},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Xc(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((i=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:o}=i;return o?this._returnResult({data:null,error:o}):s?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new un})})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new un});const c=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(fe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:o},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new un});const c=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&yt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(fe(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(f=>f.kid===e);if(s)return s;const o=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+Vb>o)return s;const{data:l,error:c}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:w,error:x}=await this.getSession();if(x||!w.session)return this._returnResult({data:null,error:x});s=w.session.access_token}const{header:o,payload:l,signature:c,raw:{header:f,payload:h}}=Xc(s);i!=null&&i.allowExpired||cx(l.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!p){const{error:w}=await this.getUser(s);if(w)throw w;return{data:{claims:l,header:o,signature:c},error:null}}const v=dx(o.alg),E=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,E,c,Xb(`${f}.${h}`)))throw new yd("Invalid JWT signature");return{data:{claims:l,header:o,signature:c},error:null}}catch(s){if(fe(s))return this._returnResult({data:null,error:s});throw s}}}go.nextInstanceID={};const zx=go;class Fx extends zx{constructor(e){super(e)}}class jx{constructor(e,i,s){var o,l,c;this.supabaseUrl=e,this.supabaseKey=i;const f=Lb(e);if(!i)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:Nb,realtime:Ib,auth:Object.assign(Object.assign({},Mb),{storageKey:h}),global:Rb},v=Ob(s??{},p);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(E,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=Ub(i,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new qw(new URL("rest/v1",f).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new xb(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Uw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,i,s)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,i;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(i=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:s,storage:o,userStorage:l,storageKey:c,flowType:f,lock:h,debug:p,throwOnError:v},E,S){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fx({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),E),storageKey:c,autoRefreshToken:e,persistSession:i,detectSessionInUrl:s,storage:o,userStorage:l,flowType:f,lock:h,debug:p,throwOnError:v,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new tb(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,s)=>{this._handleTokenChanged(i,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,i,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $x=(t,e,i)=>new jx(t,e,i);function Yx(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Yx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lv="https://sivorftnbldyusukcxzp.supabase.co",Jx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNpdm9yZnRuYmxkeXVzdWtjeHpwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NDI4MTksImV4cCI6MjA3NjAxODgxOX0.tN0Sbz8LsjZ1uQo7MB5yqT0mvs07rggB95GGgmm92fo",Je=$x(Lv,Jx),qv=M.createContext(void 0),Kx=({children:t})=>{const[e,i]=M.useState(null),[s,o]=M.useState(null),[l,c]=M.useState(null),[f,h]=M.useState(!0),[p,v]=M.useState(!1),[E,S]=M.useState(null);M.useEffect(()=>{const x=async(A,k)=>{var R;A==="PASSWORD_RECOVERY"&&v(!0),i(k);const P=(k==null?void 0:k.user)??null;if(o(P),P){let{data:O,error:H}=await Je.from("profiles").select("*").eq("id",P.id).single();if(H&&H.message.includes('relation "public.profiles" does not exist')){S(H.message),h(!1);return}if(H&&H.code==="PGRST116"){const{data:F,error:j}=await Je.from("profiles").insert({id:P.id,username:(R=P.email)==null?void 0:R.split("@")[0],score:0}).select().single();j?console.error("Error creating profile:",j):c(F)}else O?c(O):H&&console.error("Error fetching profile:",H)}else c(null);h(!1)};Je.auth.getSession().then(({data:{session:A}})=>{x("INITIAL_SESSION",A)});const{data:{subscription:C}}=Je.auth.onAuthStateChange((A,k)=>{x(A,k)});return()=>{C==null||C.unsubscribe()}},[]);const w={session:e,user:s,profile:l,setProfile:c,signOut:()=>{v(!1),Je.auth.signOut()},loading:f,isPasswordRecovery:p,setIsPasswordRecovery:v,databaseError:E};return _.jsx(qv.Provider,{value:w,children:t})},Sn=()=>{const t=M.useContext(qv);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Bv=M.createContext(void 0),Wx=({children:t})=>{const[e,i]=M.useState(()=>{if(typeof window<"u"){const l=localStorage.getItem("theme");return l||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"}),o={theme:e,toggleTheme:()=>{i(l=>{const c=l==="light"?"dark":"light";return localStorage.setItem("theme",c),c})}};return _.jsx(Bv.Provider,{value:o,children:t})},Hv=()=>{const t=M.useContext(Bv);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},Gv=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("circle",{cx:"12",cy:"12",r:"5"}),_.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),_.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),_.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),_.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),_.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),_.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),_.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),_.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),Xx=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),Qx=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),_.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),_.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),Vv=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),_.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Zx=({className:t,size:e=24})=>_.jsxs("svg",{className:t,height:e,width:e,viewBox:"0 0 24 24",children:[_.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),_.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),_.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),_.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),_.jsx("path",{d:"M1 1h22v22H1z",fill:"none"})]}),eC=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"})}),rl=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),_.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),_.jsx("path",{d:"M4 22h16"}),_.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),_.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),_.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2z"})]}),zv=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M12 2a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 0 5 0V4.5A2.5 2.5 0 0 0 12 2z"}),_.jsx("path",{d:"M4.5 9.5A2.5 2.5 0 0 0 7 12v0a2.5 2.5 0 0 0-2.5 2.5"}),_.jsx("path",{d:"M19.5 9.5A2.5 2.5 0 0 1 17 12v0a2.5 2.5 0 0 1 2.5 2.5"}),_.jsx("path",{d:"M12 12a2.5 2.5 0 0 0-2.5 2.5v.75a2.5 2.5 0 0 0 5 0V14.5A2.5 2.5 0 0 0 12 12z"}),_.jsx("path",{d:"M4.5 14.5v-5"}),_.jsx("path",{d:"M19.5 14.5v-5"}),_.jsx("path",{d:"M12 18.5v3"}),_.jsx("path",{d:"M10.14 4.5a2.5 2.5 0 0 0-5 2.85"}),_.jsx("path",{d:"M19.36 7.35a2.5 2.5 0 0 0-5-2.85"})]}),tC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"m12 8-9.04 9.06a2.82 2.82 0 1 0 3.98 3.98L16 12"}),_.jsx("circle",{cx:"17",cy:"7",r:"5"})]}),nC=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),iC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("circle",{cx:"12",cy:"10",r:"3"}),_.jsx("path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"})]}),rC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),_.jsx("polyline",{points:"16 17 21 12 16 7"}),_.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),sC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"m12 19-7-7 7-7"}),_.jsx("path",{d:"M19 12H5"})]}),Fv=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("polyline",{points:"12 6 12 12 16 14"})]}),oC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7c0-2.2-1.8-4-4-4S9.8 3.3 8.5 5.2c-.7 1-1.5 2.8-1.5 4.8 0 2 .3 3.2 1.3 4.5 1.5 1.8 2 2.8 2.2 3.5"}),_.jsx("path",{d:"M9 18h6"}),_.jsx("path",{d:"M10 22h4"})]}),aC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),_.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),_.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]}),lC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("line",{x1:"2",y1:"2",x2:"22",y2:"22"}),_.jsx("path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"}),_.jsx("path",{d:"M5 10v2a7 7 0 0 0 12 5"}),_.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 .84 2.12"}),_.jsx("path",{d:"M12 19v3"}),_.jsx("path",{d:"M9 9.5a3 3 0 0 0-3 3v0"})]}),uC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),_.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),_.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),vd=({className:t,size:e=16})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"})}),cC=({className:t,size:e=20})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),_.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),dC=({className:t,size:e=16})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),_.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),fC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("circle",{cx:"12",cy:"8",r:"6"}),_.jsx("path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523 -9.11"})]}),hC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),_.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),_.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),pC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),_.jsx("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),_.jsx("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),gl=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),_.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),_.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Yg=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),mC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("polyline",{points:"3 6 5 6 21 6"}),_.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),jv=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),_.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),sl=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("polyline",{points:"20 6 9 17 4 12"})}),gC=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"m15 18-6-6 6-6"})}),yC=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})}),vC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M12 2v2"}),_.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),_.jsx("path",{d:"M20 12h2"}),_.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),_.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"}),_.jsx("path",{d:"M8 12h.01"})]}),_C=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),_.jsx("path",{d:"M8 19v1"}),_.jsx("path",{d:"M8 14v1"}),_.jsx("path",{d:"M16 19v1"}),_.jsx("path",{d:"M16 14v1"}),_.jsx("path",{d:"M12 21v1"}),_.jsx("path",{d:"M12 16v1"})]}),ro=({className:t,size:e=24})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:_.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),EC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("circle",{cx:"12",cy:"12",r:"10"}),_.jsx("circle",{cx:"12",cy:"12",r:"6"}),_.jsx("circle",{cx:"12",cy:"12",r:"2"})]}),SC=({className:t,size:e=24})=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[_.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),_.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),TC=({children:t})=>_.jsx("pre",{className:"mt-2 p-3 bg-gray-100 dark:bg-gray-900 rounded-md text-xs text-left overflow-x-auto",children:_.jsx("code",{children:t})}),wC=({type:t})=>{const e=`${new URL(Lv).origin}/auth/v1/callback`,[i,s]=M.useState(!1),o=()=>{navigator.clipboard.writeText(e),s(!0),setTimeout(()=>s(!1),2e3)},l=()=>_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"font-bold mt-4",children:"1. Enable Google Provider in Supabase"}),_.jsx("p",{className:"text-sm mt-1",children:"Go to your Supabase Dashboard  Authentication  Providers, and enable Google."}),_.jsx("h4",{className:"font-bold mt-4",children:"2. Configure Google Cloud Console"}),_.jsxs("p",{className:"text-sm mt-1",children:["You will need a ",_.jsx("strong",{children:"Client ID"})," and ",_.jsx("strong",{children:"Client Secret"})," from the ",_.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-fire-orange-start underline",children:"Google Cloud Console"}),'. Create an "OAuth 2.0 Client ID" for a "Web application".']}),_.jsx("h4",{className:"font-bold mt-4",children:"3. Add the Authorized Redirect URI"}),_.jsxs("p",{className:"text-sm mt-1",children:["This is the most important step. In your Google Cloud credential settings, you ",_.jsx("strong",{children:"must"}),' add the following URL to your list of "Authorized redirect URIs":']}),_.jsxs("div",{className:"relative mt-2",children:[_.jsx(TC,{children:e}),_.jsx("button",{onClick:o,className:"absolute top-2 right-2 p-1.5 bg-gray-200 dark:bg-gray-700 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600",children:i?_.jsx(sl,{size:14,className:"text-green-500"}):_.jsx(jv,{size:14})})]}),_.jsx("p",{className:"text-xs mt-1",children:"After adding the URI and saving your Google credentials in Supabase, Google login will work."})]}),c=()=>_.jsxs(_.Fragment,{children:[_.jsx("h4",{className:"font-bold mt-4",children:"1. Enable Email Provider"}),_.jsx("p",{className:"text-sm mt-1",children:"Go to your Supabase Dashboard  Authentication  Providers, and ensure the Email provider is enabled."}),_.jsx("h4",{className:"font-bold mt-4",children:"2. Check Email Confirmation Settings"}),_.jsx("p",{className:"text-sm mt-1",children:`For sign-ups to work, "Confirm email" must be enabled in Supabase  Authentication  Settings. For production apps, you'll need to configure a custom SMTP server under Settings  Auth  SMTP Settings to avoid rate limits with the default email provider.`})]});return _.jsxs("div",{className:"text-center p-4 my-4 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 rounded-lg animate-fade-in",children:[_.jsxs("div",{className:"flex justify-center items-center mb-2",children:[_.jsx(gl,{size:24,className:"mr-2"}),_.jsx("h3",{className:"font-bold text-lg",children:"Auth Configuration Needed"})]}),_.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 max-w-md mx-auto",children:"Your authentication providers are not fully configured in your Supabase project. Follow these steps to fix it."}),_.jsxs("details",{className:"mt-4 w-full text-left",children:[_.jsx("summary",{className:"cursor-pointer font-semibold text-sm text-center",children:"Show Setup Instructions"}),_.jsxs("div",{className:"mt-2 p-3 bg-white dark:bg-gray-800 rounded-md",children:[t==="oauth"&&_.jsx(l,{}),t==="email"&&_.jsx(c,{})]})]})]})},bC=()=>{const{session:t}=Sn(),[e,i]=M.useState("login"),[s,o]=M.useState(""),[l,c]=M.useState(""),[f,h]=M.useState(!1),[p,v]=M.useState(null),[E,S]=M.useState(null),[w,x]=M.useState(null);if(M.useEffect(()=>{const R=window.location.hash;if(R.includes("error_description")){const O=new URLSearchParams(R.substring(1)),H=decodeURIComponent(O.get("error_description")||"");H.includes("redirect_uri_mismatch")?x("oauth"):v(`Google Auth Error: ${H}`),window.history.replaceState(null,"",window.location.pathname+window.location.search)}},[]),t)return _.jsx(Pd,{to:"/dashboard",replace:!0});const C=async R=>{var O;R.preventDefault(),h(!0),v(null),S(null),x(null);try{let H;if(e==="login")H=await Je.auth.signInWithPassword({email:s,password:l});else if(H=await Je.auth.signUp({email:s,password:l}),(O=H.error)!=null&&O.message.toLowerCase().includes("sign-ups are disabled")){x("email"),h(!1);return}if(H.error)throw H.error;e==="signup"&&S("Check your email for the confirmation link!")}catch(H){let F;H&&typeof H=="object"&&"message"in H&&typeof H.message=="string"||H instanceof Error?F=H.message:typeof H=="string"?F=H:F="An unknown error occurred during authentication.",v(F)}finally{h(!1)}},A=async R=>{R.preventDefault(),h(!0),v(null),S(null);try{const{error:O}=await Je.auth.resetPasswordForEmail(s);if(O)throw O;S("Check your email for password reset instructions.")}catch(O){let H;O&&typeof O=="object"&&"message"in O&&typeof O.message=="string"||O instanceof Error?H=O.message:typeof O=="string"?H=O:H="An unknown error occurred while resetting password.",v(H)}finally{h(!1)}},k=async()=>{v(null),x(null);const{error:R}=await Je.auth.signInWithOAuth({provider:"google"});R&&(R.message.toLowerCase().includes("provider not supported")||R.message.toLowerCase().includes("not enabled for this project")?x("oauth"):v(R.message))},P={login:{title:"Sign in to continue your journey",button:"Sign In",toggleText:"Don't have an an account?",toggleLink:"Sign Up"},signup:{title:"Create an account to get started",button:"Sign Up",toggleText:"Already have an account?",toggleLink:"Sign In"},forgotPassword:{title:"Reset your password",button:"Send Reset Instructions",toggleText:"Remembered your password?",toggleLink:"Sign In"}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 animate-fade-in p-4",children:_.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-fire-orange-start to-fire-red-end",children:"AptiPro"}),_.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:P[e].title})]}),w&&_.jsx(wC,{type:w}),p&&_.jsx("div",{className:"p-3 text-sm text-center text-red-800 bg-red-100 rounded-lg dark:bg-red-900 dark:text-red-300",children:p}),E&&_.jsx("div",{className:"p-3 text-sm text-center text-green-800 bg-green-100 rounded-lg dark:bg-green-900 dark:text-green-300",children:E}),e!=="forgotPassword"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("button",{onClick:k,className:"w-full flex items-center justify-center px-4 py-3 font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-600",children:[_.jsx(Zx,{}),_.jsx("span",{className:"ml-3",children:"Sign in with Google"})]}),_.jsxs("div",{className:"relative flex items-center justify-center",children:[_.jsx("div",{className:"absolute inset-0 flex items-center",children:_.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),_.jsx("div",{className:"relative px-2 text-sm bg-white dark:bg-gray-800 text-gray-500",children:"Or with email"})]})]}),_.jsxs("form",{className:"space-y-6",onSubmit:e==="forgotPassword"?A:C,children:[_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"email",type:"email",value:s,onChange:R=>o(R.target.value),required:!0,className:"block w-full px-4 py-3 text-gray-900 bg-transparent border-2 border-gray-300 rounded-lg appearance-none dark:text-white dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-fire-orange-start peer",placeholder:" "}),_.jsx("label",{htmlFor:"email",className:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-800 px-2 peer-focus:px-2 peer-focus:text-fire-orange-start peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-2",children:"Email address"})]}),e!=="forgotPassword"&&_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"password",type:"password",value:l,onChange:R=>c(R.target.value),required:!0,className:"block w-full px-4 py-3 text-gray-900 bg-transparent border-2 border-gray-300 rounded-lg appearance-none dark:text-white dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-fire-orange-start peer",placeholder:" "}),_.jsx("label",{htmlFor:"password",className:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-800 px-2 peer-focus:px-2 peer-focus:text-fire-orange-start peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-2",children:"Password"})]}),e==="login"&&_.jsx("div",{className:"flex justify-end text-sm",children:_.jsx("button",{type:"button",onClick:()=>{i("forgotPassword"),v(null),S(null)},className:"font-medium text-fire-orange-start hover:underline",children:"Forgot password?"})}),_.jsx("button",{type:"submit",disabled:f,className:"w-full px-4 py-3 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-fire-red-end transition-opacity disabled:opacity-50",children:f?"Processing...":P[e].button})]}),_.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:[P[e].toggleText,_.jsx("button",{onClick:()=>{i(e==="login"?"signup":"login"),v(null),S(null),x(null)},className:"ml-1 font-medium text-fire-orange-start hover:underline",children:P[e].toggleLink})]})]})})},Yd=({feature:t,error:e})=>_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg",children:[_.jsx(gl,{size:48,className:"mb-4"}),_.jsx("h3",{className:"font-bold text-lg",children:"Database Error"}),_.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 max-w-md mx-auto mt-1",children:['The "',t.replace(/_/g," "),`" feature failed to load data. This usually means there's a problem with your database tables or Row Level Security policies in Supabase.`]}),_.jsxs("details",{className:"mt-4 w-full max-w-lg text-left",children:[_.jsx("summary",{className:"cursor-pointer font-semibold text-xs text-center text-gray-500",children:"Show Technical Error"}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 bg-gray-100 dark:bg-gray-800 p-2 rounded",children:e})]})]}),xC=()=>{const{profile:t,user:e}=Sn(),[i,s]=M.useState([]),[o,l]=M.useState(null),[c,f]=M.useState([]),[h,p]=M.useState([]),[v,E]=M.useState(0),[S,w]=M.useState(!0),[x,C]=M.useState(null);M.useEffect(()=>{const O=async()=>{if(e){w(!0),C(null);try{const{data:K,error:W}=await Je.from("test_results").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(W)throw W;K&&(H(K),F(K),j(K),de(K))}catch(K){let W;K&&typeof K=="object"&&"message"in K?W=String(K.message):K instanceof Error?W=K.message:typeof K=="string"?W=K:W="An unexpected error occurred while loading dashboard data.",console.error("Error fetching dashboard data:",K),C(W)}finally{w(!1)}}},H=K=>{const W=new Date;W.setDate(W.getDate()-7);const Q=K.filter(X=>new Date(X.created_at)>W),Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ge={};for(let X=0;X<7;X++){const re=new Date;re.setDate(re.getDate()-X),ge[Z[re.getDay()]]=0}Q.forEach(X=>{const re=Z[new Date(X.created_at).getDay()];ge[re]+=X.score*100});const we=Object.keys(ge).map(X=>({name:X,score:ge[X]})).reverse(),ke=new Date().getDay(),G=[...Z.slice(ke+1),...Z.slice(0,ke+1)];we.sort((X,re)=>G.indexOf(X.name)-G.indexOf(re.name)),s(we)},F=K=>{if(K.length===0){l({name:"Let's get started!",key:""});return}const W={};K.forEach(ge=>{W[ge.topic]||(W[ge.topic]={correct:0,total:0}),W[ge.topic].correct+=ge.score,W[ge.topic].total+=ge.total_questions});let Q=null,Z=101;for(const ge in W){const we=W[ge].correct/W[ge].total*100;we<Z&&(Z=we,Q=ge)}Q&&l({name:Q,key:Q.toLowerCase().replace(/\s+/g,"-")})},j=K=>{const W={};K.forEach(Z=>{W[Z.topic]||(W[Z.topic]={correct:0,total:0}),W[Z.topic].correct+=Z.score,W[Z.topic].total+=Z.total_questions});const Q=Object.keys(W).map(Z=>({topic:Z,score:W[Z].correct/W[Z].total*100,fullMark:100}));f(Q)},de=K=>{const W=new Date,Q=W.getFullYear(),Z=W.getMonth(),ge=new Date(Q,Z+1,0).getDate(),we=K.filter(X=>{const re=new Date(X.created_at);return re.getFullYear()===Q&&re.getMonth()===Z}),ke=Array.from({length:ge},(X,re)=>({day:(re+1).toString(),xp:0}));let G=0;we.forEach(X=>{const re=new Date(X.created_at).getDate(),Ce=X.score*100;ke[re-1].xp+=Ce,G+=Ce}),p(ke),E(G)};O()},[e]);const A=()=>S?_.jsx("p",{className:"mt-2 opacity-90",children:"Analyzing your performance..."}):o?o.key===""?_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"mt-2 opacity-90",children:"Ready to test your skills? Pick a topic."}),_.jsx("p",{className:"text-2xl font-bold mt-4",children:o.name})]}):_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"mt-2 opacity-90",children:"Based on your recent performance, we recommend focusing on:"}),_.jsx("p",{className:"text-2xl font-bold mt-4",children:o.name})]}):_.jsx("p",{className:"mt-2 opacity-90",children:"Complete tests to get suggestions!"}),k=({data:O})=>{const H=Math.max(...O.map(j=>j.score),1),F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()];return _.jsx("div",{className:"flex justify-around items-end h-full w-full gap-2 pt-4",children:O.map(j=>_.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[_.jsx("div",{className:"relative group flex-1 flex items-end w-full",children:_.jsx("div",{className:`w-full rounded-t-md transition-all ${j.name===F?"bg-fire-orange-start":"bg-orange-300 dark:bg-orange-800"}`,style:{height:`${j.score/H*100}%`},children:_.jsxs("span",{className:"absolute -top-6 left-1/2 -translate-x-1/2 p-1.5 px-2 text-xs bg-gray-800 text-white rounded-md opacity-0 group-hover:opacity-100 transition-opacity",children:[j.score," XP"]})})}),_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.name})]},j.name))})},P=({data:O})=>_.jsx("div",{className:"space-y-3 h-full overflow-y-auto pr-2",children:O.map(H=>_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between mb-1 text-sm font-medium",children:[_.jsx("span",{children:H.topic}),_.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[Math.round(H.score),"%"]})]}),_.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:_.jsx("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full",style:{width:`${H.score}%`}})})]},H.topic))}),R=({data:O})=>{const H=Math.max(...O.map(F=>F.xp),1);return _.jsx("div",{className:"grid grid-cols-7 gap-1.5 h-full content-start",children:O.map(F=>{const j=F.xp>0?F.xp/H*.8+.2:.05;return _.jsx("div",{title:`${F.xp} XP on Day ${F.day}`,className:"aspect-square rounded-md bg-fire-orange-start",style:{opacity:j}},F.day)})})};return S?_.jsx("div",{className:"flex items-center justify-center",style:{height:"60vh"},children:_.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-fire-orange-start rounded-full animate-spin"})}):x?_.jsx(Yd,{feature:"dashboard",error:x}):_.jsxs("div",{className:"animate-fade-in space-y-6",children:[_.jsxs("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:["Welcome back, ",(t==null?void 0:t.username)||"AptiPro User","!"]}),_.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Let's sharpen your skills today. Your next big opportunity is just a test away."}),_.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[_.jsxs("div",{className:"lg:col-span-2 p-6 bg-white rounded-2xl shadow-lg dark:bg-gray-800",children:[_.jsx("h2",{className:"text-xl font-bold mb-4",children:"Weekly Progress (XP)"}),_.jsx("div",{style:{width:"100%",height:300},children:i.reduce((O,H)=>O+H.score,0)===0?_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[_.jsx(zv,{size:48,className:"text-gray-400 mb-4"}),_.jsx("h3",{className:"font-semibold",children:"No activity this week"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Complete practice tests to see your progress here."})]}):_.jsx(k,{data:i})})]}),_.jsxs("div",{className:"p-6 bg-gradient-to-br from-fire-orange-start to-fire-red-end rounded-2xl shadow-lg text-white flex flex-col justify-between",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-bold",children:"Personalized Suggestion"}),A()]}),_.jsx(Ti,{to:`/practice/${(o==null?void 0:o.key)||""}`,className:"mt-6 w-full text-center px-4 py-2 font-semibold bg-white text-fire-orange-start rounded-lg hover:bg-orange-50 transition",children:(o==null?void 0:o.key)===""?"Choose a Topic":"Start Practicing"})]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg dark:bg-gray-800",children:[_.jsx("h2",{className:"text-xl font-bold mb-4",children:"Performance by Topic (%)"}),_.jsx("div",{style:{width:"100%",height:300},children:c.length===0?_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[_.jsx(fC,{size:48,className:"text-gray-400 mb-4"}),_.jsx("h3",{className:"font-semibold",children:"No Topic Data Yet"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Complete a few tests to see your strengths."})]}):_.jsx(P,{data:c})})]}),_.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow-lg dark:bg-gray-800",children:[_.jsx("h2",{className:"text-xl font-bold mb-4",children:"Monthly Activity (XP)"}),_.jsx("div",{style:{width:"100%",height:300},children:v===0?_.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[_.jsx(hC,{size:48,className:"text-gray-400 mb-4"}),_.jsx("h3",{className:"font-semibold",children:"No activity this month"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Let's get practicing and fill up this chart!"})]}):_.jsx(R,{data:h})}),v>0&&v<1e3&&_.jsx("p",{className:"text-xs text-center mt-2 text-gray-500 dark:text-gray-400",children:"Your activity this month has been low. Try to practice consistently!"})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let CC,AC;function RC(){return{geminiUrl:CC,vertexUrl:AC}}function NC(t,e,i,s){var o,l;if(!(t!=null&&t.baseUrl)){const c=RC();return e?(o=c.vertexUrl)!==null&&o!==void 0?o:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn{}function ie(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function m(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in t))if(Array.isArray(i))t[f]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[f])){const h=t[f];if(Array.isArray(i))for(let p=0;p<h.length;p++){const v=h[p];m(v,e.slice(l+1),i[p])}else for(const p of h)m(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in t||(t[f]=[{}]);const h=t[f];m(h[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],o=t[s];if(o!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===o)return;if(typeof o=="object"&&typeof i=="object"&&o!==null&&i!==null)Object.assign(o,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function d(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const o=e[s];if(o.endsWith("[]")){const l=o.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(f=>d(f,e.slice(s+1),i)):i}else return i}else t=t[o]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function MC(t,e){for(const[i,s]of Object.entries(e)){const o=i.split("."),l=s.split("."),c=new Set;let f=-1;for(let h=0;h<o.length;h++)if(o[h]==="*"){f=h;break}if(f!==-1&&l.length>f)for(let h=f;h<l.length;h++){const p=l[h];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}_d(t,o,l,0,c)}}function _d(t,e,i,s,o){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),f=t;if(c in f&&Array.isArray(f[c]))for(const h of f[c])_d(h,e,i,s+1,o)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,f=Object.keys(c).filter(p=>!p.startsWith("_")&&!o.has(p)),h={};for(const p of f)h[p]=c[p];for(const[p,v]of Object.entries(h)){const E=[];for(const S of i.slice(s))S==="*"?E.push(p):E.push(S);m(c,E,v)}for(const p of f)delete c[p]}}else{const c=t;l in c&&_d(c[l],e,i,s+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IC(t){const e={},i=d(t,["operationName"]);i!=null&&m(e,["operationName"],i);const s=d(t,["resourceName"]);return s!=null&&m(e,["_url","resourceName"],s),e}function kC(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],UC(c)),e}function DC(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],PC(c)),e}function UC(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>OC(c))),m(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function PC(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>LC(c))),m(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function OC(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],zC(i)),e}function LC(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],FC(i)),e}function qC(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function BC(t){const e={},i=d(t,["operationName"]);return i!=null&&m(e,["_url","operationName"],i),e}function HC(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],GC(c)),e}function GC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&m(e,["parent"],s);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function $v(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],VC(c)),e}function VC(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&m(e,["parent"],s);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function zC(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&m(e,["videoBytes"],Jd(s));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function FC(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],Jd(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Jg;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Jg||(Jg={}));var Kg;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Kg||(Kg={}));var Wg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Wg||(Wg={}));var Xe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Xe||(Xe={}));var Xg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xg||(Xg={}));var Qg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Qg||(Qg={}));var Zg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Zg||(Zg={}));var ey;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ey||(ey={}));var ty;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(ty||(ty={}));var ny;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ny||(ny={}));var iy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(iy||(iy={}));var ry;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ry||(ry={}));var sy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(sy||(sy={}));var oy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(oy||(oy={}));var ay;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ay||(ay={}));var ly;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(ly||(ly={}));var uy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(uy||(uy={}));var cy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(cy||(cy={}));var ol;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ol||(ol={}));var dy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dy||(dy={}));var fy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fy||(fy={}));var hy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(hy||(hy={}));var Ed;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ed||(Ed={}));var py;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(py||(py={}));var my;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(my||(my={}));var gy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(gy||(gy={}));var yy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yy||(yy={}));var vy;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vy||(vy={}));var _y;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(_y||(_y={}));var Ey;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ey||(Ey={}));var Sy;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Sy||(Sy={}));var Ty;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Ty||(Ty={}));var wy;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(wy||(wy={}));var by;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(by||(by={}));var xy;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(xy||(xy={}));var Cy;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Cy||(Cy={}));var Ay;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ay||(Ay={}));var Ry;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Ry||(Ry={}));var Ny;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ny||(Ny={}));var My;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(My||(My={}));var Iy;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Iy||(Iy={}));var ky;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(ky||(ky={}));var Dy;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Dy||(Dy={}));var Uy;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Uy||(Uy={}));var Py;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Py||(Py={}));var Oy;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Oy||(Oy={}));var Ly;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ly||(Ly={}));var qy;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(qy||(qy={}));var By;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(By||(By={}));var Hy;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Hy||(Hy={}));var Gy;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Gy||(Gy={}));var Vy;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Vy||(Vy={}));var Kr;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Kr||(Kr={}));class Sd{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class so{get text(){var e,i,s,o,l,c,f,h;if(((o=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const E=[];for(const S of(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[w,x]of Object.entries(S))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(x!==null||x!==void 0)&&E.push(w);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,p+=S.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,s,o,l,c,f,h;if(((o=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const E of(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[S,w]of Object.entries(E))S!=="inlineData"&&(w!==null||w!==void 0)&&v.push(S);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,s,o,l,c,f,h;if(((o=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,i,s,o,l,c,f,h,p;if(((o=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,s,o,l,c,f,h,p;if(((o=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class zy{}class Fy{}class jC{}class $C{}class YC{}class JC{}class jy{}class $y{}class Yy{}class KC{}class al{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new al;let o;const l=e;return i?o=DC(l):o=kC(l),Object.assign(s,o),s}}class Jy{}class Ky{}class Wy{}class WC{}class XC{}class QC{}class Kd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Kd,l=HC(e);return Object.assign(s,l),s}}class ZC{}class eA{}class tA{}class Xy{}class nA{get text(){var e,i,s;let o="",l=!1;const c=[];for(const f of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[h,p]of Object.entries(f))h!=="text"&&h!=="thought"&&p!==null&&c.push(h);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,i,s;let o="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[f,h]of Object.entries(c))f!=="inlineData"&&h!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(o+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class iA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wd{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Wd,l=$v(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ie(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Yv(t,e){const i=Ie(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Jv(t){return Array.isArray(t)?t.map(e=>ll(e)):[ll(t)]}function ll(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Kv(t){const e=ll(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wv(t){const e=ll(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Xv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Qy(e)):[Qy(t)]}function Td(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Zy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function e0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Et(t){if(t==null)throw new Error("ContentUnion is required");return Td(t)?t:{role:"user",parts:Xv(t)}}function Xd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=Et(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=Et(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Et(i)):[Et(e)]}function nn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Zy(t)||e0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Et(t)]}const e=[],i=[],s=Td(t[0]);for(const o of t){const l=Td(o);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(Zy(o)||e0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return s||e.push({role:"user",parts:Xv(i)}),e}function rA(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(Xe).includes(i[0].toUpperCase())?i[0].toUpperCase():Xe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(Xe).includes(s.toUpperCase())?s.toUpperCase():Xe.TYPE_UNSPECIFIED})}}function Xr(t){const e={},i=["items"],s=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&rA(t.type,e);for(const[c,f]of Object.entries(t))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Xe).includes(f.toUpperCase())?f.toUpperCase():Xe.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=Xr(f);else if(s.includes(c)){const h=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}h.push(Xr(p))}e[c]=h}else if(o.includes(c)){const h={};for(const[p,v]of Object.entries(f))h[p]=Xr(v);e[c]=h}else{if(c==="additionalProperties")continue;e[c]=f}return e}function Qd(t){return Xr(t)}function Zd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ef(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ss(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xr(e.response));return t}function os(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function sA(t,e,i,s=1){const o=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:o?`${i}/${e}`:e}function $n(t,e){if(typeof e!="string")throw new Error("name must be a string");return sA(t,e,"cachedContents")}function Qv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function bi(t){return Jd(t)}function oA(t){return t!=null&&typeof t=="object"&&"name"in t}function aA(t){return t!=null&&typeof t=="object"&&"video"in t}function lA(t){return t!=null&&typeof t=="object"&&"uri"in t}function Zv(t){var e;let i;if(oA(t)&&(i=t.name),!(lA(t)&&(i=t.uri,i===void 0))&&!(aA(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const o=i.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${i}`);i=o[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function e_(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function t_(t){for(const e of["models","tunedModels","publisherModels"])if(uA(t,e))return t[e];return[]}function uA(t,e){return t!==null&&typeof t=="object"&&e in t}function cA(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function dA(t,e={}){const i=[],s=new Set;for(const o of t){const l=o.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=cA(o,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function n_(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,o=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function fA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function i_(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const o=i.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let l=!1;for(const c of o){if(typeof c!="object"||c===null)continue;const h=c.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function as(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function r_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hA(t){const e={},i=d(t,["responsesFile"]);i!=null&&m(e,["fileName"],i);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>FA(c))),m(e,["inlinedResponses"],l)}const o=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["inlinedEmbedContentResponses"],l)}return e}function pA(t){const e={},i=d(t,["predictionsFormat"]);i!=null&&m(e,["format"],i);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&m(e,["gcsUri"],s);const o=d(t,["bigqueryDestination","outputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function mA(t){const e={},i=d(t,["format"]);i!=null&&m(e,["predictionsFormat"],i);const s=d(t,["gcsUri"]);s!=null&&m(e,["gcsDestination","outputUriPrefix"],s);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigqueryDestination","outputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Wa(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata","displayName"]);s!=null&&m(e,["displayName"],s);const o=d(t,["metadata","state"]);o!=null&&m(e,["state"],r_(o));const l=d(t,["metadata","createTime"]);l!=null&&m(e,["createTime"],l);const c=d(t,["metadata","endTime"]);c!=null&&m(e,["endTime"],c);const f=d(t,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const h=d(t,["metadata","model"]);h!=null&&m(e,["model"],h);const p=d(t,["metadata","output"]);return p!=null&&m(e,["dest"],hA(i_(p))),e}function wd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=d(t,["state"]);o!=null&&m(e,["state"],r_(o));const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["createTime"]);c!=null&&m(e,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(e,["startTime"],f);const h=d(t,["endTime"]);h!=null&&m(e,["endTime"],h);const p=d(t,["updateTime"]);p!=null&&m(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&m(e,["model"],v);const E=d(t,["inputConfig"]);E!=null&&m(e,["src"],gA(E));const S=d(t,["outputConfig"]);S!=null&&m(e,["dest"],pA(i_(S)));const w=d(t,["completionStats"]);return w!=null&&m(e,["completionStats"],w),e}function gA(t){const e={},i=d(t,["instancesFormat"]);i!=null&&m(e,["format"],i);const s=d(t,["gcsSource","uris"]);s!=null&&m(e,["gcsUri"],s);const o=d(t,["bigquerySource","inputUri"]);return o!=null&&m(e,["bigqueryUri"],o),e}function yA(t,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&m(i,["fileName"],s);const o=d(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>zA(t,c))),m(i,["requests","requests"],l)}return i}function vA(t){const e={},i=d(t,["format"]);i!=null&&m(e,["instancesFormat"],i);const s=d(t,["gcsUri"]);s!=null&&m(e,["gcsSource","uris"],s);const o=d(t,["bigqueryUri"]);if(o!=null&&m(e,["bigquerySource","inputUri"],o),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function _A(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function EA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function SA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function TA(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],wA(s));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const h=d(t,["index"]);h!=null&&m(e,["index"],h);const p=d(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),m(e,["safetyRatings"],S)}const E=d(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function wA(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function s_(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>XA(l))),m(e,["parts"],o)}const s=d(t,["role"]);return s!=null&&m(e,["role"],s),e}function bA(t,e){const i={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&m(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function xA(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=d(t,["dest"]);return e!==void 0&&o!=null&&m(e,["outputConfig"],mA(fA(o))),i}function t0(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["src"]);o!=null&&m(i,["batch","inputConfig"],yA(t,n_(t,o)));const l=d(e,["config"]);return l!=null&&bA(l,i),i}function CA(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["model"],Ie(t,s));const o=d(e,["src"]);o!=null&&m(i,["inputConfig"],vA(n_(t,o)));const l=d(e,["config"]);return l!=null&&xA(l,i),i}function AA(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&m(e,["batch","displayName"],s),i}function RA(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["src"]);o!=null&&m(i,["batch","inputConfig"],PA(t,o));const l=d(e,["config"]);return l!=null&&AA(l,i),i}function NA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function MA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function IA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&m(e,["name"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function kA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["name"]);s!=null&&m(e,["name"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);return l!=null&&m(e,["error"],l),e}function DA(t,e){const i={},s=d(e,["contents"]);if(s!=null){let l=Xd(t,s);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["requests[]","request","content"],l)}const o=d(e,["config"]);return o!=null&&(m(i,["_self"],UA(o,i)),MC(i,{"requests[].*":"requests[].request.*"})),i}function UA(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function PA(t,e){const i={},s=d(e,["fileName"]);s!=null&&m(i,["file_name"],s);const o=d(e,["inlinedRequests"]);return o!=null&&m(i,["requests"],DA(t,o)),i}function OA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function LA(t,e,i){const s={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],s_(Et(o)));const l=d(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(s,["topP"],c);const f=d(e,["topK"]);f!=null&&m(s,["topK"],f);const h=d(e,["candidateCount"]);h!=null&&m(s,["candidateCount"],h);const p=d(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&m(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&m(s,["presencePenalty"],w);const x=d(e,["frequencyPenalty"]);x!=null&&m(s,["frequencyPenalty"],x);const C=d(e,["seed"]);C!=null&&m(s,["seed"],C);const A=d(e,["responseMimeType"]);A!=null&&m(s,["responseMimeType"],A);const k=d(e,["responseSchema"]);k!=null&&m(s,["responseSchema"],Qd(k));const P=d(e,["responseJsonSchema"]);if(P!=null&&m(s,["responseJsonSchema"],P),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=d(e,["safetySettings"]);if(i!==void 0&&R!=null){let Z=R;Array.isArray(Z)&&(Z=Z.map(ge=>QA(ge))),m(i,["safetySettings"],Z)}const O=d(e,["tools"]);if(i!==void 0&&O!=null){let Z=os(O);Array.isArray(Z)&&(Z=Z.map(ge=>ZA(ss(ge)))),m(i,["tools"],Z)}const H=d(e,["toolConfig"]);if(i!==void 0&&H!=null&&m(i,["toolConfig"],H),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);i!==void 0&&F!=null&&m(i,["cachedContent"],$n(t,F));const j=d(e,["responseModalities"]);j!=null&&m(s,["responseModalities"],j);const de=d(e,["mediaResolution"]);de!=null&&m(s,["mediaResolution"],de);const K=d(e,["speechConfig"]);if(K!=null&&m(s,["speechConfig"],Zd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=d(e,["thinkingConfig"]);W!=null&&m(s,["thinkingConfig"],W);const Q=d(e,["imageConfig"]);return Q!=null&&m(s,["imageConfig"],Q),s}function qA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>TA(p))),m(e,["candidates"],h)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function BA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function HA(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],as(t,s)),i}function GA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function VA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function zA(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["request","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let f=nn(o);Array.isArray(f)&&(f=f.map(h=>s_(h))),m(i,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(e,["config"]);return c!=null&&m(i,["request","generationConfig"],LA(t,c,d(i,["request"],{}))),i}function FA(t){const e={},i=d(t,["response"]);i!=null&&m(e,["response"],qA(i));const s=d(t,["error"]);return s!=null&&m(e,["error"],s),e}function jA(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);if(e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function $A(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const l=d(t,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function YA(t){const e={},i=d(t,["config"]);return i!=null&&jA(i,e),e}function JA(t){const e={},i=d(t,["config"]);return i!=null&&$A(i,e),e}function KA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>Wa(c))),m(e,["batchJobs"],l)}return e}function WA(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>wd(c))),m(e,["batchJobs"],l)}return e}function XA(t){const e={},i=d(t,["functionCall"]);i!=null&&m(e,["functionCall"],i);const s=d(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],OA(l));const c=d(t,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=d(t,["inlineData"]);f!=null&&m(e,["inlineData"],_A(f));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const p=d(t,["thought"]);p!=null&&m(e,["thought"],p);const v=d(t,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function QA(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function ZA(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],GA(f));const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],VA(h));const p=d(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(zn||(zn={}));class er{constructor(e,i,s,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,o)}init(e,i,s){var o,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(o=c.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR extends jn{constructor(e){super(),this.apiClient=e,this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)},this.list=async(i={})=>new er(zn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=t0(this.apiClient,e),s=i._url,o=ie("{model}:batchGenerateContent",s),f=i.batch.inputConfig.requests,h=f.requests,p=[];for(const v of h){const E=Object.assign({},v);if(E.systemInstruction){const S=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=S,E.request=w}p.push(E)}return f.requests=p,delete i.config,delete i._url,delete i._query,{path:o,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},o=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${o}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${o}`;else if(c)s.dest=`${c}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=CA(this.apiClient,e);return f=ie("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>wd(v))}else{const p=t0(this.apiClient,e);return f=ie("{model}:batchGenerateContent",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Wa(v))}}async createEmbeddingsInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RA(this.apiClient,e);return l=ie("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Wa(h))}}async get(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=HA(this.apiClient,e);return f=ie("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>wd(v))}else{const p=BA(this.apiClient,e);return f=ie("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Wa(v))}}async cancel(e){var i,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);c=ie("batchPredictionJobs/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=EA(this.apiClient,e);c=ie("batches/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=JA(e);return f=ie("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=WA(v),S=new Xy;return Object.assign(S,E),S})}else{const p=YA(e);return f=ie("batches",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=KA(v),S=new Xy;return Object.assign(S,E),S})}}async delete(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=MA(this.apiClient,e);return f=ie("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>kA(v))}else{const p=NA(this.apiClient,e);return f=ie("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>IA(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function n0(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>TR(l))),m(e,["parts"],o)}const s=d(t,["role"]);return s!=null&&m(e,["role"],s),e}function nR(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=nn(c);Array.isArray(v)&&(v=v.map(E=>n0(E))),m(e,["contents"],v)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],n0(Et(f)));const h=d(t,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>wR(E))),m(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],p),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function iR(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=d(t,["expireTime"]);e!==void 0&&o!=null&&m(e,["expireTime"],o);const l=d(t,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let E=nn(c);Array.isArray(E)&&(E=E.map(S=>S)),m(e,["contents"],E)}const f=d(t,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],Et(f));const h=d(t,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(S=>bR(S))),m(e,["tools"],E)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&m(e,["encryption_spec","kmsKeyName"],v),i}function rR(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["model"],Yv(t,s));const o=d(e,["config"]);return o!=null&&nR(o,i),i}function sR(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["model"],Yv(t,s));const o=d(e,["config"]);return o!=null&&iR(o,i),i}function oR(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],$n(t,s)),i}function aR(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],$n(t,s)),i}function lR(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function uR(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function cR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function dR(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const s=d(t,["name"]);s!=null&&m(e,["name"],s);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function fR(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],$n(t,s)),i}function hR(t,e){const i={},s=d(e,["name"]);return s!=null&&m(i,["_url","name"],$n(t,s)),i}function pR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function mR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function gR(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function yR(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function vR(t){const e={},i=d(t,["config"]);return i!=null&&gR(i,e),e}function _R(t){const e={},i=d(t,["config"]);return i!=null&&yR(i,e),e}function ER(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function SR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["cachedContents"],l)}return e}function TR(t){const e={},i=d(t,["functionCall"]);i!=null&&m(e,["functionCall"],i);const s=d(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],cR(l));const c=d(t,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=d(t,["inlineData"]);f!=null&&m(e,["inlineData"],tR(f));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const p=d(t,["thought"]);p!=null&&m(e,["thought"],p);const v=d(t,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function wR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],pR(f));const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],mR(h));const p=d(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function bR(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>dR(S))),m(e,["functionDeclarations"],E)}const s=d(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const h=d(t,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function xR(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),i}function CR(t,e){const i={},s=d(t,["ttl"]);e!==void 0&&s!=null&&m(e,["ttl"],s);const o=d(t,["expireTime"]);return e!==void 0&&o!=null&&m(e,["expireTime"],o),i}function AR(t,e){const i={},s=d(e,["name"]);s!=null&&m(i,["_url","name"],$n(t,s));const o=d(e,["config"]);return o!=null&&xR(o,i),i}function RR(t,e){const i={},s=d(e,["name"]);s!=null&&m(i,["_url","name"],$n(t,s));const o=d(e,["config"]);return o!=null&&CR(o,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NR extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new er(zn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=sR(this.apiClient,e);return f=ie("cachedContents",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=rR(this.apiClient,e);return f=ie("cachedContents",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=hR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=fR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=aR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=uR(v),S=new Ky;return Object.assign(S,E),S})}else{const p=oR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=lR(v),S=new Ky;return Object.assign(S,E),S})}}async update(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=RR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=AR(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=_R(e);return f=ie("cachedContents",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=SR(v),S=new Wy;return Object.assign(S,E),S})}else{const p=vR(e);return f=ie("cachedContents",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=ER(v),S=new Wy;return Object.assign(S,E),S})}}}function i0(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function Qr(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(w){return function(x){return Promise.resolve(x).then(w,E)}}function f(w,x){s[w]&&(o[w]=function(C){return new Promise(function(A,k){l.push([w,C,A,k])>1||h(w,C)})},x&&(o[w]=x(o[w])))}function h(w,x){try{p(s[w](x))}catch(C){S(l[0][3],C)}}function p(w){w.value instanceof Fe?Promise.resolve(w.value.v).then(v,E):S(l[0][2],w)}function v(w){h("next",w)}function E(w){h("throw",w)}function S(w,x){w(x),l.shift(),l.length&&h(l[0][0],l[0][1])}}function fo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof i0=="function"?i0(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(f,h){c=t[l](c),o(f,h,c.done,c.value)})}}function o(l,c,f,h){Promise.resolve(h).then(function(p){l({value:p,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:o_(i)}function o_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function IR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function r0(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const o=[];let l=!0;for(;s<i&&t[s].role==="model";)o.push(t[s]),l&&!o_(t[s])&&(l=!1),s++;l?e.push(...o):e.pop()}return e}class kR{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new DR(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class DR{constructor(e,i,s,o={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),IR(l)}async sendMessage(e){var i;await this.sendPromise;const s=Et(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,f;const h=await o,p=(c=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(E))!==null&&f!==void 0?f:[]);const w=p?[p]:[];this.recordHistory(s,w,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var i;await this.sendPromise;const s=Et(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?r0(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var s,o;return Qr(this,arguments,function*(){var c,f,h,p;const v=[];try{for(var E=!0,S=fo(e),w;w=yield Fe(S.next()),c=w.done,!c;E=!0){p=w.value,E=!1;const x=p;if(MR(x)){const C=(o=(s=x.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content;C!==void 0&&v.push(C)}yield yield Fe(x)}}catch(x){f={error:x}}finally{try{!E&&!c&&(h=S.return)&&(yield Fe(h.call(S)))}finally{if(f)throw f.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let o=[];i.length>0&&i.every(l=>l.role!==void 0)?o=i:o.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...r0(s)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UR(t){const e={},i=d(t,["file"]);return i!=null&&m(e,["file"],i),e}function PR(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function OR(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],Zv(i)),e}function LR(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function qR(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","file"],Zv(i)),e}function BR(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function HR(t){const e={},i=d(t,["config"]);return i!=null&&BR(i,e),e}function GR(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VR extends jn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new er(zn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=HR(e);return l=ie("files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=GR(h),v=new ZC;return Object.assign(v,p),v})}}async createInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=UR(e);return l=ie("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=PR(h),v=new eA;return Object.assign(v,p),v})}}async get(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=qR(e);return l=ie("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=OR(e);return l=ie("files/{file}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=LR(h),v=new tA;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xa(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function zR(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>rN(l))),m(e,["parts"],o)}const s=d(t,["role"]);return s!=null&&m(e,["role"],s),e}function FR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function jR(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const s=d(t,["name"]);s!=null&&m(e,["name"],s);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function $R(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const h=d(t,["logprobs"]);h!=null&&m(e,["logprobs"],h);const p=d(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const E=d(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const S=d(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const x=d(t,["responseModalities"]);x!=null&&m(e,["responseModalities"],x);const C=d(t,["responseSchema"]);C!=null&&m(e,["responseSchema"],C);const A=d(t,["routingConfig"]);A!=null&&m(e,["routingConfig"],A);const k=d(t,["seed"]);k!=null&&m(e,["seed"],k);const P=d(t,["speechConfig"]);P!=null&&m(e,["speechConfig"],a_(P));const R=d(t,["stopSequences"]);R!=null&&m(e,["stopSequences"],R);const O=d(t,["temperature"]);O!=null&&m(e,["temperature"],O);const H=d(t,["thinkingConfig"]);H!=null&&m(e,["thinkingConfig"],H);const F=d(t,["topK"]);F!=null&&m(e,["topK"],F);const j=d(t,["topP"]);if(j!=null&&m(e,["topP"],j),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function JR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function KR(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(t,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ef(E));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],zR(Et(x)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let F=os(C);Array.isArray(F)&&(F=F.map(j=>oN(ss(j)))),m(e,["setup","tools"],F)}const A=d(t,["sessionResumption"]);e!==void 0&&A!=null&&m(e,["setup","sessionResumption"],sN(A));const k=d(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","inputAudioTranscription"],k);const P=d(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","outputAudioTranscription"],P);const R=d(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const O=d(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],O);const H=d(t,["proactivity"]);return e!==void 0&&H!=null&&m(e,["setup","proactivity"],H),i}function WR(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],$R(s));const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(t,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],a_(ef(E)));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],Et(x));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let F=os(C);Array.isArray(F)&&(F=F.map(j=>aN(ss(j)))),m(e,["setup","tools"],F)}const A=d(t,["sessionResumption"]);e!==void 0&&A!=null&&m(e,["setup","sessionResumption"],A);const k=d(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","inputAudioTranscription"],k);const P=d(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","outputAudioTranscription"],P);const R=d(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const O=d(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],O);const H=d(t,["proactivity"]);return e!==void 0&&H!=null&&m(e,["setup","proactivity"],H),i}function XR(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["setup","model"],Ie(t,s));const o=d(e,["config"]);return o!=null&&m(i,["config"],KR(o,i)),i}function QR(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["setup","model"],Ie(t,s));const o=d(e,["config"]);return o!=null&&m(i,["config"],WR(o,i)),i}function ZR(t){const e={},i=d(t,["musicGenerationConfig"]);return i!=null&&m(e,["musicGenerationConfig"],i),e}function eN(t){const e={},i=d(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["weightedPrompts"],s)}return e}function tN(t){const e={},i=d(t,["media"]);if(i!=null){let p=Jv(i);Array.isArray(p)&&(p=p.map(v=>Xa(v))),m(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&m(e,["audio"],Xa(Wv(s)));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=d(t,["video"]);l!=null&&m(e,["video"],Xa(Kv(l)));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const h=d(t,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function nN(t){const e={},i=d(t,["media"]);if(i!=null){let p=Jv(i);Array.isArray(p)&&(p=p.map(v=>v)),m(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&m(e,["audio"],Wv(s));const o=d(t,["audioStreamEnd"]);o!=null&&m(e,["audioStreamEnd"],o);const l=d(t,["video"]);l!=null&&m(e,["video"],Kv(l));const c=d(t,["text"]);c!=null&&m(e,["text"],c);const f=d(t,["activityStart"]);f!=null&&m(e,["activityStart"],f);const h=d(t,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function iN(t){const e={},i=d(t,["setupComplete"]);i!=null&&m(e,["setupComplete"],i);const s=d(t,["serverContent"]);s!=null&&m(e,["serverContent"],s);const o=d(t,["toolCall"]);o!=null&&m(e,["toolCall"],o);const l=d(t,["toolCallCancellation"]);l!=null&&m(e,["toolCallCancellation"],l);const c=d(t,["usageMetadata"]);c!=null&&m(e,["usageMetadata"],lN(c));const f=d(t,["goAway"]);f!=null&&m(e,["goAway"],f);const h=d(t,["sessionResumptionUpdate"]);return h!=null&&m(e,["sessionResumptionUpdate"],h),e}function rN(t){const e={},i=d(t,["functionCall"]);i!=null&&m(e,["functionCall"],i);const s=d(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],FR(l));const c=d(t,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=d(t,["inlineData"]);f!=null&&m(e,["inlineData"],Xa(f));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const p=d(t,["thought"]);p!=null&&m(e,["thought"],p);const v=d(t,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function sN(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function a_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const s=d(t,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function oN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],YR(f));const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],JR(h));const p=d(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function aN(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>jR(S))),m(e,["functionDeclarations"],E)}const s=d(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const h=d(t,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function lN(t){const e={},i=d(t,["promptTokenCount"]);i!=null&&m(e,["promptTokenCount"],i);const s=d(t,["cachedContentTokenCount"]);s!=null&&m(e,["cachedContentTokenCount"],s);const o=d(t,["candidatesTokenCount"]);o!=null&&m(e,["responseTokenCount"],o);const l=d(t,["toolUsePromptTokenCount"]);l!=null&&m(e,["toolUsePromptTokenCount"],l);const c=d(t,["thoughtsTokenCount"]);c!=null&&m(e,["thoughtsTokenCount"],c);const f=d(t,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const h=d(t,["promptTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(x=>x)),m(e,["promptTokensDetails"],w)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(x=>x)),m(e,["cacheTokensDetails"],w)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(x=>x)),m(e,["responseTokensDetails"],w)}const E=d(t,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(x=>x)),m(e,["toolUsePromptTokensDetails"],w)}const S=d(t,["trafficType"]);return S!=null&&m(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function cN(t){const e={},i=d(t,["content"]);i!=null&&m(e,["content"],i);const s=d(t,["citationMetadata"]);s!=null&&m(e,["citationMetadata"],dN(s));const o=d(t,["tokenCount"]);o!=null&&m(e,["tokenCount"],o);const l=d(t,["finishReason"]);l!=null&&m(e,["finishReason"],l);const c=d(t,["avgLogprobs"]);c!=null&&m(e,["avgLogprobs"],c);const f=d(t,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const h=d(t,["index"]);h!=null&&m(e,["index"],h);const p=d(t,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(w=>w)),m(e,["safetyRatings"],S)}const E=d(t,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function dN(t){const e={},i=d(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),m(e,["citations"],s)}return e}function fN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let l=nn(o);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function hN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["tokensInfo"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["tokensInfo"],o)}return e}function pN(t){const e={},i=d(t,["values"]);i!=null&&m(e,["values"],i);const s=d(t,["statistics"]);return s!=null&&m(e,["statistics"],mN(s)),e}function mN(t){const e={},i=d(t,["truncated"]);i!=null&&m(e,["truncated"],i);const s=d(t,["token_count"]);return s!=null&&m(e,["tokenCount"],s),e}function vl(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>E1(l))),m(e,["parts"],o)}const s=d(t,["role"]);return s!=null&&m(e,["role"],s),e}function gN(t){const e={},i=d(t,["controlType"]);i!=null&&m(e,["controlType"],i);const s=d(t,["enableControlImageComputation"]);return s!=null&&m(e,["computeControl"],s),e}function yN(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function vN(t,e){const i={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],Et(s));const o=d(t,["tools"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>f_(f))),m(e,["tools"],c)}const l=d(t,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],a1(l)),i}function _N(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let c=nn(o);Array.isArray(c)&&(c=c.map(f=>vl(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&yN(l),i}function EN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let c=nn(o);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&vN(l,i),i}function SN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);s!=null&&m(e,["totalTokens"],s);const o=d(t,["cachedContentTokenCount"]);return o!=null&&m(e,["cachedContentTokenCount"],o),e}function TN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["totalTokens"]);return s!=null&&m(e,["totalTokens"],s),e}function wN(t,e){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ie(t,s)),i}function bN(t,e){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ie(t,s)),i}function xN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function CN(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}function AN(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const h=d(t,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&m(e,["parameters","language"],w);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","mimeType"],x);const C=d(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C);const A=d(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const k=d(t,["labels"]);e!==void 0&&k!=null&&m(e,["labels"],k);const P=d(t,["editMode"]);e!==void 0&&P!=null&&m(e,["parameters","editMode"],P);const R=d(t,["baseSteps"]);return e!==void 0&&R!=null&&m(e,["parameters","editConfig","baseSteps"],R),i}function RN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>C1(h))),m(i,["instances[0]","referenceImages"],f)}const c=d(e,["config"]);return c!=null&&AN(c,i),i}function NN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>_l(l))),m(e,["generatedImages"],o)}return e}function MN(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["requests[]","title"],o);const l=d(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function IN(t,e){const i={},s=d(t,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const o=d(t,["title"]);e!==void 0&&o!=null&&m(e,["instances[]","title"],o);const l=d(t,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const f=d(t,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),i}function kN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let f=Xd(t,o);Array.isArray(f)&&(f=f.map(h=>h)),m(i,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&MN(l,i);const c=d(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Ie(t,c)),i}function DN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let c=Xd(t,o);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["instances[]","content"],c)}const l=d(e,["config"]);return l!=null&&IN(l,i),i}function UN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["embeddings"],l)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function PN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>pN(c))),m(e,["embeddings"],l)}const o=d(t,["metadata"]);return o!=null&&m(e,["metadata"],o),e}function ON(t){const e={},i=d(t,["endpoint"]);i!=null&&m(e,["name"],i);const s=d(t,["deployedModelId"]);return s!=null&&m(e,["deployedModelId"],s),e}function LN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function qN(t){const e={};if(d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(t,["description"]);i!=null&&m(e,["description"],i);const s=d(t,["name"]);s!=null&&m(e,["name"],s);const o=d(t,["parameters"]);o!=null&&m(e,["parameters"],o);const l=d(t,["parametersJsonSchema"]);l!=null&&m(e,["parametersJsonSchema"],l);const c=d(t,["response"]);c!=null&&m(e,["response"],c);const f=d(t,["responseJsonSchema"]);return f!=null&&m(e,["responseJsonSchema"],f),e}function BN(t,e,i){const s={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],vl(Et(o)));const l=d(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(s,["topP"],c);const f=d(e,["topK"]);f!=null&&m(s,["topK"],f);const h=d(e,["candidateCount"]);h!=null&&m(s,["candidateCount"],h);const p=d(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&m(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&m(s,["presencePenalty"],w);const x=d(e,["frequencyPenalty"]);x!=null&&m(s,["frequencyPenalty"],x);const C=d(e,["seed"]);C!=null&&m(s,["seed"],C);const A=d(e,["responseMimeType"]);A!=null&&m(s,["responseMimeType"],A);const k=d(e,["responseSchema"]);k!=null&&m(s,["responseSchema"],Qd(k));const P=d(e,["responseJsonSchema"]);if(P!=null&&m(s,["responseJsonSchema"],P),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=d(e,["safetySettings"]);if(i!==void 0&&R!=null){let Z=R;Array.isArray(Z)&&(Z=Z.map(ge=>A1(ge))),m(i,["safetySettings"],Z)}const O=d(e,["tools"]);if(i!==void 0&&O!=null){let Z=os(O);Array.isArray(Z)&&(Z=Z.map(ge=>D1(ss(ge)))),m(i,["tools"],Z)}const H=d(e,["toolConfig"]);if(i!==void 0&&H!=null&&m(i,["toolConfig"],H),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=d(e,["cachedContent"]);i!==void 0&&F!=null&&m(i,["cachedContent"],$n(t,F));const j=d(e,["responseModalities"]);j!=null&&m(s,["responseModalities"],j);const de=d(e,["mediaResolution"]);de!=null&&m(s,["mediaResolution"],de);const K=d(e,["speechConfig"]);if(K!=null&&m(s,["speechConfig"],Zd(K)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const W=d(e,["thinkingConfig"]);W!=null&&m(s,["thinkingConfig"],W);const Q=d(e,["imageConfig"]);return Q!=null&&m(s,["imageConfig"],Q),s}function HN(t,e,i){const s={},o=d(e,["systemInstruction"]);i!==void 0&&o!=null&&m(i,["systemInstruction"],Et(o));const l=d(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=d(e,["topP"]);c!=null&&m(s,["topP"],c);const f=d(e,["topK"]);f!=null&&m(s,["topK"],f);const h=d(e,["candidateCount"]);h!=null&&m(s,["candidateCount"],h);const p=d(e,["maxOutputTokens"]);p!=null&&m(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&m(s,["stopSequences"],v);const E=d(e,["responseLogprobs"]);E!=null&&m(s,["responseLogprobs"],E);const S=d(e,["logprobs"]);S!=null&&m(s,["logprobs"],S);const w=d(e,["presencePenalty"]);w!=null&&m(s,["presencePenalty"],w);const x=d(e,["frequencyPenalty"]);x!=null&&m(s,["frequencyPenalty"],x);const C=d(e,["seed"]);C!=null&&m(s,["seed"],C);const A=d(e,["responseMimeType"]);A!=null&&m(s,["responseMimeType"],A);const k=d(e,["responseSchema"]);k!=null&&m(s,["responseSchema"],Qd(k));const P=d(e,["responseJsonSchema"]);P!=null&&m(s,["responseJsonSchema"],P);const R=d(e,["routingConfig"]);R!=null&&m(s,["routingConfig"],R);const O=d(e,["modelSelectionConfig"]);O!=null&&m(s,["modelConfig"],O);const H=d(e,["safetySettings"]);if(i!==void 0&&H!=null){let G=H;Array.isArray(G)&&(G=G.map(X=>X)),m(i,["safetySettings"],G)}const F=d(e,["tools"]);if(i!==void 0&&F!=null){let G=os(F);Array.isArray(G)&&(G=G.map(X=>f_(ss(X)))),m(i,["tools"],G)}const j=d(e,["toolConfig"]);i!==void 0&&j!=null&&m(i,["toolConfig"],j);const de=d(e,["labels"]);i!==void 0&&de!=null&&m(i,["labels"],de);const K=d(e,["cachedContent"]);i!==void 0&&K!=null&&m(i,["cachedContent"],$n(t,K));const W=d(e,["responseModalities"]);W!=null&&m(s,["responseModalities"],W);const Q=d(e,["mediaResolution"]);Q!=null&&m(s,["mediaResolution"],Q);const Z=d(e,["speechConfig"]);Z!=null&&m(s,["speechConfig"],d_(Zd(Z)));const ge=d(e,["audioTimestamp"]);ge!=null&&m(s,["audioTimestamp"],ge);const we=d(e,["thinkingConfig"]);we!=null&&m(s,["thinkingConfig"],we);const ke=d(e,["imageConfig"]);return ke!=null&&m(s,["imageConfig"],ke),s}function s0(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let c=nn(o);Array.isArray(c)&&(c=c.map(f=>vl(f))),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],BN(t,l,i)),i}function o0(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["contents"]);if(o!=null){let c=nn(o);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=d(e,["config"]);return l!=null&&m(i,["generationConfig"],HN(t,l,i)),i}function a0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>cN(p))),m(e,["candidates"],h)}const o=d(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const l=d(t,["promptFeedback"]);l!=null&&m(e,["promptFeedback"],l);const c=d(t,["responseId"]);c!=null&&m(e,["responseId"],c);const f=d(t,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function l0(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),m(e,["candidates"],p)}const o=d(t,["createTime"]);o!=null&&m(e,["createTime"],o);const l=d(t,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const c=d(t,["promptFeedback"]);c!=null&&m(e,["promptFeedback"],c);const f=d(t,["responseId"]);f!=null&&m(e,["responseId"],f);const h=d(t,["usageMetadata"]);return h!=null&&m(e,["usageMetadata"],h),e}function GN(t,e){const i={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=d(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const l=d(t,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const f=d(t,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const h=d(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&m(e,["parameters","includeSafetyAttributes"],h);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&m(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&m(e,["parameters","language"],v);const E=d(t,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const S=d(t,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&m(e,["parameters","outputOptions","compressionQuality"],S),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(t,["imageSize"]);if(e!==void 0&&w!=null&&m(e,["parameters","sampleImageSize"],w),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function VN(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=d(t,["negativePrompt"]);e!==void 0&&o!=null&&m(e,["parameters","negativePrompt"],o);const l=d(t,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=d(t,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const h=d(t,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&m(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=d(t,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const S=d(t,["includeRaiReason"]);e!==void 0&&S!=null&&m(e,["parameters","includeRaiReason"],S);const w=d(t,["language"]);e!==void 0&&w!=null&&m(e,["parameters","language"],w);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","mimeType"],x);const C=d(t,["outputCompressionQuality"]);e!==void 0&&C!=null&&m(e,["parameters","outputOptions","compressionQuality"],C);const A=d(t,["addWatermark"]);e!==void 0&&A!=null&&m(e,["parameters","addWatermark"],A);const k=d(t,["labels"]);e!==void 0&&k!=null&&m(e,["labels"],k);const P=d(t,["imageSize"]);e!==void 0&&P!=null&&m(e,["parameters","sampleImageSize"],P);const R=d(t,["enhancePrompt"]);return e!==void 0&&R!=null&&m(e,["parameters","enhancePrompt"],R),i}function zN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&GN(l,i),i}function FN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["config"]);return l!=null&&VN(l,i),i}function jN(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>i1(c))),m(e,["generatedImages"],l)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],u_(o)),e}function $N(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>_l(c))),m(e,["generatedImages"],l)}const o=d(t,["positivePromptSafetyAttributes"]);return o!=null&&m(e,["positivePromptSafetyAttributes"],c_(o)),e}function YN(t,e){const i={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=d(t,["durationSeconds"]);if(e!==void 0&&o!=null&&m(e,["parameters","durationSeconds"],o),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=d(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const f=d(t,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=d(t,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&m(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],El(v));const E=d(t,["referenceImages"]);if(e!==void 0&&E!=null){let S=E;Array.isArray(S)&&(S=S.map(w=>$1(w))),m(e,["instances[0]","referenceImages"],S)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function JN(t,e){const i={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const l=d(t,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const f=d(t,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const h=d(t,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const p=d(t,["resolution"]);e!==void 0&&p!=null&&m(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const E=d(t,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const S=d(t,["negativePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","negativePrompt"],S);const w=d(t,["enhancePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w);const x=d(t,["generateAudio"]);e!==void 0&&x!=null&&m(e,["parameters","generateAudio"],x);const C=d(t,["lastFrame"]);e!==void 0&&C!=null&&m(e,["instances[0]","lastFrame"],pn(C));const A=d(t,["referenceImages"]);if(e!==void 0&&A!=null){let R=A;Array.isArray(R)&&(R=R.map(O=>Y1(O))),m(e,["instances[0]","referenceImages"],R)}const k=d(t,["mask"]);e!==void 0&&k!=null&&m(e,["instances[0]","mask"],j1(k));const P=d(t,["compressionQuality"]);return e!==void 0&&P!=null&&m(e,["parameters","compressionQuality"],P),i}function KN(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response","generateVideoResponse"]);return c!=null&&m(e,["response"],ZN(c)),e}function WN(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],e1(c)),e}function XN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],El(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],h_(c));const f=d(e,["source"]);f!=null&&t1(f,i);const h=d(e,["config"]);return h!=null&&YN(h,i),i}function QN(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["prompt"]);o!=null&&m(i,["instances[0]","prompt"],o);const l=d(e,["image"]);l!=null&&m(i,["instances[0]","image"],pn(l));const c=d(e,["video"]);c!=null&&m(i,["instances[0]","video"],p_(c));const f=d(e,["source"]);f!=null&&n1(f,i);const h=d(e,["config"]);return h!=null&&JN(h,i),i}function ZN(t){const e={},i=d(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>s1(c))),m(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function e1(t){const e={},i=d(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>o1(c))),m(e,["generatedVideos"],l)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&m(e,["raiMediaFilteredCount"],s);const o=d(t,["raiMediaFilteredReasons"]);return o!=null&&m(e,["raiMediaFilteredReasons"],o),e}function t1(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],El(o));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],h_(l)),i}function n1(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],pn(o));const l=d(t,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],p_(l)),i}function i1(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],f1(i));const s=d(t,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=d(t,["_self"]);return o!=null&&m(e,["safetyAttributes"],u_(o)),e}function _l(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["image"],l_(i));const s=d(t,["raiFilteredReason"]);s!=null&&m(e,["raiFilteredReason"],s);const o=d(t,["_self"]);o!=null&&m(e,["safetyAttributes"],c_(o));const l=d(t,["prompt"]);return l!=null&&m(e,["enhancedPrompt"],l),e}function r1(t){const e={},i=d(t,["_self"]);i!=null&&m(e,["mask"],l_(i));const s=d(t,["labels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(e,["labels"],o)}return e}function s1(t){const e={},i=d(t,["video"]);return i!=null&&m(e,["video"],z1(i)),e}function o1(t){const e={},i=d(t,["_self"]);return i!=null&&m(e,["video"],F1(i)),e}function a1(t){const e={},i=d(t,["modelSelectionConfig"]);i!=null&&m(e,["modelConfig"],i);const s=d(t,["responseJsonSchema"]);s!=null&&m(e,["responseJsonSchema"],s);const o=d(t,["audioTimestamp"]);o!=null&&m(e,["audioTimestamp"],o);const l=d(t,["candidateCount"]);l!=null&&m(e,["candidateCount"],l);const c=d(t,["enableAffectiveDialog"]);c!=null&&m(e,["enableAffectiveDialog"],c);const f=d(t,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const h=d(t,["logprobs"]);h!=null&&m(e,["logprobs"],h);const p=d(t,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&m(e,["mediaResolution"],v);const E=d(t,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const S=d(t,["responseLogprobs"]);S!=null&&m(e,["responseLogprobs"],S);const w=d(t,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const x=d(t,["responseModalities"]);x!=null&&m(e,["responseModalities"],x);const C=d(t,["responseSchema"]);C!=null&&m(e,["responseSchema"],C);const A=d(t,["routingConfig"]);A!=null&&m(e,["routingConfig"],A);const k=d(t,["seed"]);k!=null&&m(e,["seed"],k);const P=d(t,["speechConfig"]);P!=null&&m(e,["speechConfig"],d_(P));const R=d(t,["stopSequences"]);R!=null&&m(e,["stopSequences"],R);const O=d(t,["temperature"]);O!=null&&m(e,["temperature"],O);const H=d(t,["thinkingConfig"]);H!=null&&m(e,["thinkingConfig"],H);const F=d(t,["topK"]);F!=null&&m(e,["topK"],F);const j=d(t,["topP"]);if(j!=null&&m(e,["topP"],j),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function l1(t,e){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ie(t,s)),i}function u1(t,e){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ie(t,s)),i}function c1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function d1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function f1(t){const e={},i=d(t,["bytesBase64Encoded"]);i!=null&&m(e,["imageBytes"],bi(i));const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function l_(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&m(e,["imageBytes"],bi(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function El(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(t,["imageBytes"]);i!=null&&m(e,["bytesBase64Encoded"],bi(i));const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function pn(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["gcsUri"],i);const s=d(t,["imageBytes"]);s!=null&&m(e,["bytesBase64Encoded"],bi(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function h1(t,e,i){const s={},o=d(e,["pageSize"]);i!==void 0&&o!=null&&m(i,["_query","pageSize"],o);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],e_(t,f)),s}function p1(t,e,i){const s={},o=d(e,["pageSize"]);i!==void 0&&o!=null&&m(i,["_query","pageSize"],o);const l=d(e,["pageToken"]);i!==void 0&&l!=null&&m(i,["_query","pageToken"],l);const c=d(e,["filter"]);i!==void 0&&c!=null&&m(i,["_query","filter"],c);const f=d(e,["queryBase"]);return i!==void 0&&f!=null&&m(i,["_url","models_url"],e_(t,f)),s}function m1(t,e){const i={},s=d(e,["config"]);return s!=null&&h1(t,s,i),i}function g1(t,e){const i={},s=d(e,["config"]);return s!=null&&p1(t,s,i),i}function y1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["_self"]);if(o!=null){let l=t_(o);Array.isArray(l)&&(l=l.map(c=>bd(c))),m(e,["models"],l)}return e}function v1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["_self"]);if(o!=null){let l=t_(o);Array.isArray(l)&&(l=l.map(c=>xd(c))),m(e,["models"],l)}return e}function _1(t){const e={},i=d(t,["maskMode"]);i!=null&&m(e,["maskMode"],i);const s=d(t,["segmentationClasses"]);s!=null&&m(e,["maskClasses"],s);const o=d(t,["maskDilation"]);return o!=null&&m(e,["dilation"],o),e}function bd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const l=d(t,["version"]);l!=null&&m(e,["version"],l);const c=d(t,["_self"]);c!=null&&m(e,["tunedModelInfo"],U1(c));const f=d(t,["inputTokenLimit"]);f!=null&&m(e,["inputTokenLimit"],f);const h=d(t,["outputTokenLimit"]);h!=null&&m(e,["outputTokenLimit"],h);const p=d(t,["supportedGenerationMethods"]);p!=null&&m(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&m(e,["temperature"],v);const E=d(t,["maxTemperature"]);E!=null&&m(e,["maxTemperature"],E);const S=d(t,["topP"]);S!=null&&m(e,["topP"],S);const w=d(t,["topK"]);w!=null&&m(e,["topK"],w);const x=d(t,["thinking"]);return x!=null&&m(e,["thinking"],x),e}function xd(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["displayName"]);s!=null&&m(e,["displayName"],s);const o=d(t,["description"]);o!=null&&m(e,["description"],o);const l=d(t,["versionId"]);l!=null&&m(e,["version"],l);const c=d(t,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(S=>ON(S))),m(e,["endpoints"],E)}const f=d(t,["labels"]);f!=null&&m(e,["labels"],f);const h=d(t,["_self"]);h!=null&&m(e,["tunedModelInfo"],P1(h));const p=d(t,["defaultCheckpointId"]);p!=null&&m(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(S=>S)),m(e,["checkpoints"],E)}return e}function E1(t){const e={},i=d(t,["functionCall"]);i!=null&&m(e,["functionCall"],i);const s=d(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],LN(l));const c=d(t,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=d(t,["inlineData"]);f!=null&&m(e,["inlineData"],uN(f));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const p=d(t,["thought"]);p!=null&&m(e,["thought"],p);const v=d(t,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function S1(t){const e={},i=d(t,["productImage"]);return i!=null&&m(e,["image"],pn(i)),e}function T1(t,e){const i={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const o=d(t,["baseSteps"]);e!==void 0&&o!=null&&m(e,["parameters","baseSteps"],o);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=d(t,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=d(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&m(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const E=d(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const S=d(t,["enhancePrompt"]);e!==void 0&&S!=null&&m(e,["parameters","enhancePrompt"],S);const w=d(t,["labels"]);return e!==void 0&&w!=null&&m(e,["labels"],w),i}function w1(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["source"]);o!=null&&x1(o,i);const l=d(e,["config"]);return l!=null&&T1(l,i),i}function b1(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>_l(o))),m(e,["generatedImages"],s)}return e}function x1(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=d(t,["personImage"]);e!==void 0&&o!=null&&m(e,["instances[0]","personImage","image"],pn(o));const l=d(t,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>S1(f))),m(e,["instances[0]","productImages"],c)}return i}function C1(t){const e={},i=d(t,["referenceImage"]);i!=null&&m(e,["referenceImage"],pn(i));const s=d(t,["referenceId"]);s!=null&&m(e,["referenceId"],s);const o=d(t,["referenceType"]);o!=null&&m(e,["referenceType"],o);const l=d(t,["maskImageConfig"]);l!=null&&m(e,["maskImageConfig"],_1(l));const c=d(t,["controlImageConfig"]);c!=null&&m(e,["controlImageConfig"],gN(c));const f=d(t,["styleImageConfig"]);f!=null&&m(e,["styleImageConfig"],f);const h=d(t,["subjectImageConfig"]);return h!=null&&m(e,["subjectImageConfig"],h),e}function u_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function c_(t){const e={},i=d(t,["safetyAttributes","categories"]);i!=null&&m(e,["categories"],i);const s=d(t,["safetyAttributes","scores"]);s!=null&&m(e,["scores"],s);const o=d(t,["contentType"]);return o!=null&&m(e,["contentType"],o),e}function A1(t){const e={},i=d(t,["category"]);if(i!=null&&m(e,["category"],i),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&m(e,["threshold"],s),e}function R1(t){const e={},i=d(t,["image"]);return i!=null&&m(e,["image"],pn(i)),e}function N1(t,e){const i={},s=d(t,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const o=d(t,["maxPredictions"]);e!==void 0&&o!=null&&m(e,["parameters","maxPredictions"],o);const l=d(t,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const f=d(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const h=d(t,["labels"]);return e!==void 0&&h!=null&&m(e,["labels"],h),i}function M1(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["source"]);o!=null&&k1(o,i);const l=d(e,["config"]);return l!=null&&N1(l,i),i}function I1(t){const e={},i=d(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>r1(o))),m(e,["generatedMasks"],s)}return e}function k1(t,e){const i={},s=d(t,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const o=d(t,["image"]);e!==void 0&&o!=null&&m(e,["instances[0]","image"],pn(o));const l=d(t,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],R1(l)),i}function d_(t){const e={},i=d(t,["languageCode"]);i!=null&&m(e,["languageCode"],i);const s=d(t,["voiceConfig"]);if(s!=null&&m(e,["voiceConfig"],s),d(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function D1(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],c1(f));const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],d1(h));const p=d(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function f_(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let E=i;Array.isArray(E)&&(E=E.map(S=>qN(S))),m(e,["functionDeclarations"],E)}const s=d(t,["retrieval"]);s!=null&&m(e,["retrieval"],s);const o=d(t,["googleSearchRetrieval"]);o!=null&&m(e,["googleSearchRetrieval"],o);const l=d(t,["computerUse"]);if(l!=null&&m(e,["computerUse"],l),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=d(t,["codeExecution"]);c!=null&&m(e,["codeExecution"],c);const f=d(t,["enterpriseWebSearch"]);f!=null&&m(e,["enterpriseWebSearch"],f);const h=d(t,["googleMaps"]);h!=null&&m(e,["googleMaps"],h);const p=d(t,["googleSearch"]);p!=null&&m(e,["googleSearch"],p);const v=d(t,["urlContext"]);return v!=null&&m(e,["urlContext"],v),e}function U1(t){const e={},i=d(t,["baseModel"]);i!=null&&m(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&m(e,["createTime"],s);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function P1(t){const e={},i=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(e,["baseModel"],i);const s=d(t,["createTime"]);s!=null&&m(e,["createTime"],s);const o=d(t,["updateTime"]);return o!=null&&m(e,["updateTime"],o),e}function O1(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function L1(t,e){const i={},s=d(t,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const o=d(t,["description"]);e!==void 0&&o!=null&&m(e,["description"],o);const l=d(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function q1(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","name"],Ie(t,s));const o=d(e,["config"]);return o!=null&&O1(o,i),i}function B1(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["config"]);return o!=null&&L1(o,i),i}function H1(t,e){const i={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const o=d(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&m(e,["parameters","safetySetting"],o);const l=d(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const f=d(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const h=d(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=d(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const S=d(t,["numberOfImages"]);e!==void 0&&S!=null&&m(e,["parameters","sampleCount"],S);const w=d(t,["mode"]);return e!==void 0&&w!=null&&m(e,["parameters","mode"],w),i}function G1(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ie(t,s));const o=d(e,["image"]);o!=null&&m(i,["instances[0]","image"],pn(o));const l=d(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=d(e,["config"]);return c!=null&&H1(c,i),i}function V1(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["predictions"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>_l(l))),m(e,["generatedImages"],o)}return e}function z1(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const s=d(t,["encodedVideo"]);s!=null&&m(e,["videoBytes"],bi(s));const o=d(t,["encoding"]);return o!=null&&m(e,["mimeType"],o),e}function F1(t){const e={},i=d(t,["gcsUri"]);i!=null&&m(e,["uri"],i);const s=d(t,["bytesBase64Encoded"]);s!=null&&m(e,["videoBytes"],bi(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}function j1(t){const e={},i=d(t,["image"]);i!=null&&m(e,["_self"],pn(i));const s=d(t,["maskMode"]);return s!=null&&m(e,["maskMode"],s),e}function $1(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],El(i));const s=d(t,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function Y1(t){const e={},i=d(t,["image"]);i!=null&&m(e,["image"],pn(i));const s=d(t,["referenceType"]);return s!=null&&m(e,["referenceType"],s),e}function h_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["uri"],i);const s=d(t,["videoBytes"]);s!=null&&m(e,["encodedVideo"],bi(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["encoding"],o),e}function p_(t){const e={},i=d(t,["uri"]);i!=null&&m(e,["gcsUri"],i);const s=d(t,["videoBytes"]);s!=null&&m(e,["bytesBase64Encoded"],bi(s));const o=d(t,["mimeType"]);return o!=null&&m(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J1="Content-Type",K1="X-Server-Timeout",W1="User-Agent",Cd="x-goog-api-client",X1="1.29.1",Q1=`google-genai-sdk/${X1}`,Z1="v1beta1",e2="v1beta",u0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class t2{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Z1,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:e2,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const o=[this.getRequestUrlInternal(i)];return s&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))o.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,o.toString(),e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(i))typeof l=="object"?s[o]=Object.assign(Object.assign({},s[o]),l):l!==void 0&&(s[o]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,i,s);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,o.toString(),e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,o){if(i&&i.timeout||o){const l=new AbortController,c=l.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const f=setTimeout(()=>l.abort(),i.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&n2(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async o=>(await c0(o),new Sd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async o=>(await c0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var i;return Qr(this,arguments,function*(){const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let c="";for(;;){const{done:f,value:h}=yield Fe(o.read());if(f){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(h,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const S=JSON.parse(JSON.stringify(E.error)),w=S.status,x=S.code,C=`got status: ${w}. ${JSON.stringify(E)}`;if(x>=400&&x<600)throw new yl({message:C,status:x})}}catch(E){if(E.name==="ApiError")throw E}c+=p;let v=c.match(u0);for(;v;){const E=v[1];try{const S=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Fe(new Sd(S)),c=c.slice(v[0].length),v=c.match(u0)}catch(S){throw new Error(`exception parsing stream chunk ${E}. ${S}`)}}}}finally{o.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=Q1+" "+this.clientOptions.userAgentExtra;return e[W1]=i,e[Cd]=i,e[J1]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[o,l]of Object.entries(e.headers))s.append(o,l);e.timeout&&e.timeout>0&&s.append(K1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const o={};i!=null&&(o.mimeType=i.mimeType,o.name=i.name,o.displayName=i.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);o.sizeBytes=String(c.size);const f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const h={file:o},p=this.getFileName(e),v=ie("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,p,h,i==null?void 0:i.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,i,s){var o;const l=this.clientOptions.uploader,c=await l.stat(i),f=String(c.size),h=(o=s==null?void 0:s.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),E={};s!=null&&s.customMetadata&&(E.customMetadata=s.customMetadata),s!=null&&s.chunkingConfig&&(E.chunkingConfig=s.chunkingConfig);const S=await this.fetchUploadUrl(p,f,h,v,E,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(i,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,o,l,c){var f;let h={};c?h=c:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},o?{"X-Goog-Upload-File-Name":o}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function c0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(s);throw i>=400&&i<600?new yl({message:o,status:i}):new Error(o)}}function n2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const f=Object.assign({},l);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const p=c[h],v=f[h];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[h]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[h]=p)}return f}const o=s(i,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i2="mcp_used/unknown";let r2=!1;function m_(t){for(const e of t)if(s2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return r2}function g_(t){var e;const i=(e=t[Cd])!==null&&e!==void 0?e:"";t[Cd]=(i+` ${i2}`).trimStart()}function s2(t){return t!==null&&typeof t=="object"&&t instanceof tf}function o2(t,e=100){return Qr(this,arguments,function*(){let s,o=0;for(;o<e;){const l=yield Fe(t.listTools({cursor:s}));for(const c of l.tools)yield yield Fe(c),o++;if(!l.nextCursor)break;s=l.nextCursor}})}class tf{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new tf(e,i)}async initialize(){var e,i,s,o;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,h=(i=void 0,fo(o2(v))),p;p=await h.next(),e=p.done,!e;f=!0){o=p.value,f=!1;const E=o;c.push(E);const S=E.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(E){i={error:E}}finally{try{!f&&!e&&(s=h.return)&&await s.call(h)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),dA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await o.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function a2(t,e,i){const s=new iA;let o;i.data instanceof Blob?o=JSON.parse(await i.data.text()):o=JSON.parse(i.data),Object.assign(s,o),e(s)}class l2{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=d2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),h=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(R=>{p=R}),E=e.callbacks,S=function(){p({})},w=this.apiClient,x={onopen:S,onmessage:R=>{a2(w,E.onmessage,R)},onerror:(i=E==null?void 0:E.onerror)!==null&&i!==void 0?i:function(R){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(R){}},C=this.webSocketFactory.create(h,c2(c),x);C.connect(),await v;const P={setup:{model:Ie(this.apiClient,e.model)}};return C.send(JSON.stringify(P)),new u2(C,this.apiClient)}}class u2{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=eN(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=ZR(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Kr.PLAY)}pause(){this.sendPlaybackControl(Kr.PAUSE)}stop(){this.sendPlaybackControl(Kr.STOP)}resetContext(){this.sendPlaybackControl(Kr.RESET_CONTEXT)}close(){this.conn.close()}}function c2(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function d2(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function h2(t,e,i){const s=new nA;let o;i.data instanceof Blob?o=await i.data.text():i.data instanceof ArrayBuffer?o=new TextDecoder().decode(i.data):o=i.data;const l=JSON.parse(o);if(t.isVertexAI()){const c=iN(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class p2{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new l2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,o,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&m_(e.config.tools)&&g_(E);const S=v2(E);if(this.apiClient.isVertexAI())v=`${h}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const K=this.apiClient.getApiKey();let W="BidiGenerateContent",Q="key";K!=null&&K.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),W="BidiGenerateContentConstrained",Q="access_token"),v=`${h}/ws/google.ai.generativelanguage.${p}.GenerativeService.${W}?${Q}=${K}`}let w=()=>{};const x=new Promise(K=>{w=K}),C=e.callbacks,A=function(){var K;(K=C==null?void 0:C.onopen)===null||K===void 0||K.call(C),w({})},k=this.apiClient,P={onopen:A,onmessage:K=>{h2(k,C.onmessage,K)},onerror:(i=C==null?void 0:C.onerror)!==null&&i!==void 0?i:function(K){},onclose:(s=C==null?void 0:C.onclose)!==null&&s!==void 0?s:function(K){}},R=this.webSocketFactory.create(v,y2(S),P);R.connect(),await x;let O=Ie(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const K=this.apiClient.getProject(),W=this.apiClient.getLocation();O=`projects/${K}/locations/${W}/`+O}let H={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ol.AUDIO]}:e.config.responseModalities=[ol.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],j=[];for(const K of F)if(this.isCallableTool(K)){const W=K;j.push(await W.tool())}else j.push(K);j.length>0&&(e.config.tools=j);const de={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=QR(this.apiClient,de):H=XR(this.apiClient,de),delete H.config,R.send(JSON.stringify(H)),new g2(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const m2={turnComplete:!0};class g2{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=nn(i.turns),e.isVertexAI()||(s=s.map(o=>vl(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(f2)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},m2),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:nN(e)}:i={realtimeInput:tN(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function y2(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function v2(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d0=10;function f0(t){var e,i,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const c of(i=t==null?void 0:t.tools)!==null&&i!==void 0?i:[])if(Zr(c)){o=!0;break}if(!o)return!0;const l=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Zr(t){return"callTool"in t&&typeof t.callTool=="function"}function _2(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(o=>Zr(o)))!==null&&s!==void 0?s:!1}function h0(t){var e;const i=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,o)=>{if(Zr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(o)}),i}function p0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E2 extends jn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,o,l,c,f;const h=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!_2(i)||f0(i.config))return await this.generateContentInternal(h);const p=h0(i);if(p.length>0){const C=p.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let v,E;const S=nn(h.contents),w=(l=(o=(s=h.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:d0;let x=0;for(;x<w&&(v=await this.generateContentInternal(h),!(!v.functionCalls||v.functionCalls.length===0));){const C=v.candidates[0].content,A=[];for(const k of(f=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(Zr(k)){const R=await k.callTool(v.functionCalls);A.push(...R)}x++,E={role:"user",parts:A},h.contents=nn(h.contents),h.contents.push(C),h.contents.push(E),p0(h.config)&&(S.push(C),S.push(E))}return p0(h.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),f0(i.config)){const o=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(o)}const s=h0(i);if(s.length>0){const o=s.map(l=>`tools[${l}]`).join(", ");throw new Error(`Incompatible tools found at ${o}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var o;let l;const c=[];if(s!=null&&s.generatedImages)for(const h of s.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((o=h==null?void 0:h.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:c.push(h);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new er(zn.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const o={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(o)},this.generateVideos=async i=>{var s,o,l,c,f,h;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((o=i.video)===null||o===void 0)&&o.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((h=(f=i.source)===null||f===void 0?void 0:f.video)===null||h===void 0)&&h.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,o;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async h=>Zr(h)?await h.tool():h)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&m_(e.config.tools)){const h=(o=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},h);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),g_(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var i,s,o;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(Zr(c)){const f=c,h=await f.tool();for(const p of(o=h.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var i,s,o;const l=(o=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:d0;let c=!1,f=0;const h=await this.initAfcToolsMap(e);return(function(p,v,E){var S,w;return Qr(this,arguments,function*(){for(var x,C,A,k;f<l;){c&&(f++,c=!1);const H=yield Fe(p.processParamsMaybeAddMcpUsage(E)),F=yield Fe(p.generateContentStreamInternal(H)),j=[],de=[];try{for(var P=!0,R=(C=void 0,fo(F)),O;O=yield Fe(R.next()),x=O.done,!x;P=!0){k=O.value,P=!1;const K=k;if(yield yield Fe(K),K.candidates&&(!((S=K.candidates[0])===null||S===void 0)&&S.content)){de.push(K.candidates[0].content);for(const W of(w=K.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(f<l&&W.functionCall){if(!W.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(W.functionCall.name)){const Q=yield Fe(v.get(W.functionCall.name).callTool([W.functionCall]));j.push(...Q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${W.functionCall.name}`)}}}}catch(K){C={error:K}}finally{try{!P&&!x&&(A=R.return)&&(yield Fe(A.call(R)))}finally{if(C)throw C.error}}if(j.length>0){c=!0;const K=new so;K.candidates=[{content:{role:"user",parts:j}}],yield yield Fe(K);const W=[];W.push(...de),W.push({role:"user",parts:j});const Q=nn(E.contents).concat(W);E.contents=Q}else break}})})(this,h,e)}async generateContentInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=o0(this.apiClient,e);return f=ie("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=l0(v),S=new so;return Object.assign(S,E),S})}else{const p=s0(this.apiClient,e);return f=ie("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=a0(v),S=new so;return Object.assign(S,E),S})}}async generateContentStreamInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=o0(this.apiClient,e);return f=ie("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(E){return Qr(this,arguments,function*(){var S,w,x,C;try{for(var A=!0,k=fo(E),P;P=yield Fe(k.next()),S=P.done,!S;A=!0){C=P.value,A=!1;const R=C,O=l0(yield Fe(R.json()));O.sdkHttpResponse={headers:R.headers};const H=new so;Object.assign(H,O),yield yield Fe(H)}}catch(R){w={error:R}}finally{try{!A&&!S&&(x=k.return)&&(yield Fe(x.call(k)))}finally{if(w)throw w.error}}})})}else{const p=s0(this.apiClient,e);return f=ie("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Qr(this,arguments,function*(){var S,w,x,C;try{for(var A=!0,k=fo(E),P;P=yield Fe(k.next()),S=P.done,!S;A=!0){C=P.value,A=!1;const R=C,O=a0(yield Fe(R.json()));O.sdkHttpResponse={headers:R.headers};const H=new so;Object.assign(H,O),yield yield Fe(H)}}catch(R){w={error:R}}finally{try{!A&&!S&&(x=k.return)&&(yield Fe(x.call(k)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=DN(this.apiClient,e);return f=ie("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=PN(v),S=new zy;return Object.assign(S,E),S})}else{const p=kN(this.apiClient,e);return f=ie("{model}:batchEmbedContents",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=UN(v),S=new zy;return Object.assign(S,E),S})}}async generateImagesInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=FN(this.apiClient,e);return f=ie("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=$N(v),S=new Fy;return Object.assign(S,E),S})}else{const p=zN(this.apiClient,e);return f=ie("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=jN(v),S=new Fy;return Object.assign(S,E),S})}}async editImageInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=RN(this.apiClient,e);return l=ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=NN(h),v=new jC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=G1(this.apiClient,e);return l=ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=V1(h),v=new $C;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=w1(this.apiClient,e);return l=ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=b1(h),v=new YC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=M1(this.apiClient,e);return l=ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=I1(h),v=new JC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=u1(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>xd(v))}else{const p=l1(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>bd(v))}}async listInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=g1(this.apiClient,e);return f=ie("{models_url}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=v1(v),S=new jy;return Object.assign(S,E),S})}else{const p=m1(this.apiClient,e);return f=ie("{models_url}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=y1(v),S=new jy;return Object.assign(S,E),S})}}async update(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=B1(this.apiClient,e);return f=ie("{model}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>xd(v))}else{const p=q1(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>bd(v))}}async delete(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=bN(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=CN(v),S=new $y;return Object.assign(S,E),S})}else{const p=wN(this.apiClient,e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=xN(v),S=new $y;return Object.assign(S,E),S})}}async countTokens(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=EN(this.apiClient,e);return f=ie("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=TN(v),S=new Yy;return Object.assign(S,E),S})}else{const p=_N(this.apiClient,e);return f=ie("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=SN(v),S=new Yy;return Object.assign(S,E),S})}}async computeTokens(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=fN(this.apiClient,e);return l=ie("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>{const p=hN(h),v=new KC;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=QN(this.apiClient,e);return f=ie("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const E=WN(v),S=new al;return Object.assign(S,E),S})}else{const p=XN(this.apiClient,e);return f=ie("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=KN(v),S=new al;return Object.assign(S,E),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S2 extends jn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:o,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:o,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=BC(e);return f=ie("{operationName}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=qC(e);return f=ie("{operationName}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=IC(e);return l=ie("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T2(t){const e={},i=d(t,["data"]);if(i!=null&&m(e,["data"],i),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function w2(t){const e={},i=d(t,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(l=>I2(l))),m(e,["parts"],o)}const s=d(t,["role"]);return s!=null&&m(e,["role"],s),e}function b2(t,e,i){const s={},o=d(e,["expireTime"]);i!==void 0&&o!=null&&m(i,["expireTime"],o);const l=d(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&m(i,["newSessionExpireTime"],l);const c=d(e,["uses"]);i!==void 0&&c!=null&&m(i,["uses"],c);const f=d(e,["liveConnectConstraints"]);i!==void 0&&f!=null&&m(i,["bidiGenerateContentSetup"],M2(t,f));const h=d(e,["lockAdditionalFields"]);return i!==void 0&&h!=null&&m(i,["fieldMask"],h),s}function x2(t,e){const i={},s=d(e,["config"]);return s!=null&&m(i,["config"],b2(t,s,i)),i}function C2(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(t,["fileUri"]);i!=null&&m(e,["fileUri"],i);const s=d(t,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}function A2(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(t,["enableWidget"]);return i!=null&&m(e,["enableWidget"],i),e}function R2(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(t,["timeRangeFilter"]);return i!=null&&m(e,["timeRangeFilter"],i),e}function N2(t,e){const i={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig"],s);const o=d(t,["responseModalities"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","responseModalities"],o);const l=d(t,["temperature"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","temperature"],l);const c=d(t,["topP"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topP"],c);const f=d(t,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(t,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","seed"],v);const E=d(t,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],ef(E));const S=d(t,["thinkingConfig"]);e!==void 0&&S!=null&&m(e,["setup","generationConfig","thinkingConfig"],S);const w=d(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const x=d(t,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],w2(Et(x)));const C=d(t,["tools"]);if(e!==void 0&&C!=null){let F=os(C);Array.isArray(F)&&(F=F.map(j=>D2(ss(j)))),m(e,["setup","tools"],F)}const A=d(t,["sessionResumption"]);e!==void 0&&A!=null&&m(e,["setup","sessionResumption"],k2(A));const k=d(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&m(e,["setup","inputAudioTranscription"],k);const P=d(t,["outputAudioTranscription"]);e!==void 0&&P!=null&&m(e,["setup","outputAudioTranscription"],P);const R=d(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&m(e,["setup","realtimeInputConfig"],R);const O=d(t,["contextWindowCompression"]);e!==void 0&&O!=null&&m(e,["setup","contextWindowCompression"],O);const H=d(t,["proactivity"]);return e!==void 0&&H!=null&&m(e,["setup","proactivity"],H),i}function M2(t,e){const i={},s=d(e,["model"]);s!=null&&m(i,["setup","model"],Ie(t,s));const o=d(e,["config"]);return o!=null&&m(i,["config"],N2(o,i)),i}function I2(t){const e={},i=d(t,["functionCall"]);i!=null&&m(e,["functionCall"],i);const s=d(t,["codeExecutionResult"]);s!=null&&m(e,["codeExecutionResult"],s);const o=d(t,["executableCode"]);o!=null&&m(e,["executableCode"],o);const l=d(t,["fileData"]);l!=null&&m(e,["fileData"],C2(l));const c=d(t,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=d(t,["inlineData"]);f!=null&&m(e,["inlineData"],T2(f));const h=d(t,["text"]);h!=null&&m(e,["text"],h);const p=d(t,["thought"]);p!=null&&m(e,["thought"],p);const v=d(t,["thoughtSignature"]);v!=null&&m(e,["thoughtSignature"],v);const E=d(t,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function k2(t){const e={},i=d(t,["handle"]);if(i!=null&&m(e,["handle"],i),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function D2(t){const e={},i=d(t,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(E=>E)),m(e,["functionDeclarations"],v)}if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(t,["googleSearchRetrieval"]);s!=null&&m(e,["googleSearchRetrieval"],s);const o=d(t,["computerUse"]);o!=null&&m(e,["computerUse"],o);const l=d(t,["fileSearch"]);l!=null&&m(e,["fileSearch"],l);const c=d(t,["codeExecution"]);if(c!=null&&m(e,["codeExecution"],c),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(t,["googleMaps"]);f!=null&&m(e,["googleMaps"],A2(f));const h=d(t,["googleSearch"]);h!=null&&m(e,["googleSearch"],R2(h));const p=d(t,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U2(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const o=Object.keys(s).map(l=>`${i}.${l}`);e.push(...o)}else e.push(i)}return e.join(",")}function P2(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(i){const l=U2(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(p=>c.includes(p)?`generationConfig.${p}`:p));const h=[];l&&h.push(l),f.length>0&&h.push(...f),h.length>0?t.fieldMask=h.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class O2 extends jn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=x2(this.apiClient,e);l=ie("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const h=P2(f,e.config);return o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),o.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L2(t,e){const i={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&m(e,["displayName"],s),i}function q2(t){const e={},i=d(t,["config"]);return i!=null&&L2(i,e),e}function B2(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),i}function H2(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&B2(s,e),e}function G2(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function V2(t,e){const i={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["customMetadata"],l)}const o=d(t,["chunkingConfig"]);return e!==void 0&&o!=null&&m(e,["chunkingConfig"],o),i}function z2(t){const e={},i=d(t,["name"]);i!=null&&m(e,["name"],i);const s=d(t,["metadata"]);s!=null&&m(e,["metadata"],s);const o=d(t,["done"]);o!=null&&m(e,["done"],o);const l=d(t,["error"]);l!=null&&m(e,["error"],l);const c=d(t,["response"]);return c!=null&&m(e,["response"],j2(c)),e}function F2(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const s=d(t,["fileName"]);s!=null&&m(e,["fileName"],s);const o=d(t,["config"]);return o!=null&&V2(o,e),e}function j2(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["parent"]);s!=null&&m(e,["parent"],s);const o=d(t,["documentName"]);return o!=null&&m(e,["documentName"],o),e}function $2(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function Y2(t){const e={},i=d(t,["config"]);return i!=null&&$2(i,e),e}function J2(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["fileSearchStores"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["fileSearchStores"],l)}return e}function K2(t,e){const i={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&m(e,["mimeType"],s);const o=d(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const l=d(t,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>h)),m(e,["customMetadata"],f)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&m(e,["chunkingConfig"],c),i}function W2(t){const e={},i=d(t,["fileSearchStoreName"]);i!=null&&m(e,["_url","file_search_store_name"],i);const s=d(t,["config"]);return s!=null&&K2(s,e),e}function X2(t){const e={},i=d(t,["sdkHttpResponse"]);return i!=null&&m(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q2(t,e){const i={},s=d(t,["force"]);return e!==void 0&&s!=null&&m(e,["_query","force"],s),i}function Z2(t){const e={},i=d(t,["name"]);i!=null&&m(e,["_url","name"],i);const s=d(t,["config"]);return s!=null&&Q2(s,e),e}function eM(t){const e={},i=d(t,["name"]);return i!=null&&m(e,["_url","name"],i),e}function tM(t,e){const i={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const o=d(t,["pageToken"]);return e!==void 0&&o!=null&&m(e,["_query","pageToken"],o),i}function nM(t){const e={},i=d(t,["parent"]);i!=null&&m(e,["_url","parent"],i);const s=d(t,["config"]);return s!=null&&tM(s,e),e}function iM(t){const e={},i=d(t,["sdkHttpResponse"]);i!=null&&m(e,["sdkHttpResponse"],i);const s=d(t,["nextPageToken"]);s!=null&&m(e,["nextPageToken"],s);const o=d(t,["documents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),m(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rM extends jn{constructor(e){super(),this.apiClient=e,this.list=async i=>new er(zn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=eM(e);return l=ie("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var i,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Z2(e);o=ie("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nM(e);return l=ie("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=iM(h),v=new WC;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sM extends jn{constructor(e,i=new rM(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new er(zn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=q2(e);return l=ie("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=G2(e);return l=ie("{name}",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var i,s;let o="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=H2(e);o=ie("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Y2(e);return l=ie("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=J2(h),v=new XC;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W2(e);return l=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=X2(h),v=new QC;return Object.assign(v,p),v})}}async importFile(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=F2(e);return l=ie("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const p=z2(h),v=new Kd;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oM(t,e){const i={},s=d(t,["name"]);return s!=null&&m(i,["_url","name"],s),i}function aM(t,e){const i={},s=d(t,["name"]);return s!=null&&m(i,["_url","name"],s),i}function lM(t,e,i){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&m(e,["displayName"],o),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(t,["epochCount"]);e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","epochCount"],l);const c=d(t,["learningRateMultiplier"]);if(c!=null&&m(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(t,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const h=d(t,["learningRate"]);if(e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","learningRate"],h),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function uM(t,e,i){const s={};let o=d(i,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec"],m0(w))}else if(o==="PREFERENCE_TUNING"){const w=d(t,["validationDataset"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec"],m0(w))}const l=d(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&m(e,["tunedModelDisplayName"],l);const c=d(t,["description"]);e!==void 0&&c!=null&&m(e,["description"],c);let f=d(i,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(t,["epochCount"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let p=d(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(p==="PREFERENCE_TUNING"){const w=d(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(v==="PREFERENCE_TUNING"){const w=d(t,["adapterSize"]);e!==void 0&&w!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=d(t,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const S=d(t,["beta"]);return e!==void 0&&S!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),s}function cM(t,e){const i={},s=d(t,["baseModel"]);s!=null&&m(i,["baseModel"],s);const o=d(t,["preTunedModel"]);o!=null&&m(i,["preTunedModel"],o);const l=d(t,["trainingDataset"]);l!=null&&SM(l);const c=d(t,["config"]);return c!=null&&lM(c,i),i}function dM(t,e){const i={},s=d(t,["baseModel"]);s!=null&&m(i,["baseModel"],s);const o=d(t,["preTunedModel"]);o!=null&&m(i,["preTunedModel"],o);const l=d(t,["trainingDataset"]);l!=null&&TM(l,i,e);const c=d(t,["config"]);return c!=null&&uM(c,i,e),i}function fM(t,e){const i={},s=d(t,["name"]);return s!=null&&m(i,["_url","name"],s),i}function hM(t,e){const i={},s=d(t,["name"]);return s!=null&&m(i,["_url","name"],s),i}function pM(t,e,i){const s={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),s}function mM(t,e,i){const s={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&m(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const c=d(t,["filter"]);return e!==void 0&&c!=null&&m(e,["_query","filter"],c),s}function gM(t,e){const i={},s=d(t,["config"]);return s!=null&&pM(s,i),i}function yM(t,e){const i={},s=d(t,["config"]);return s!=null&&mM(s,i),i}function vM(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&m(i,["sdkHttpResponse"],s);const o=d(t,["nextPageToken"]);o!=null&&m(i,["nextPageToken"],o);const l=d(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>y_(f))),m(i,["tuningJobs"],c)}return i}function _M(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&m(i,["sdkHttpResponse"],s);const o=d(t,["nextPageToken"]);o!=null&&m(i,["nextPageToken"],o);const l=d(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Ad(f))),m(i,["tuningJobs"],c)}return i}function EM(t,e){const i={},s=d(t,["name"]);s!=null&&m(i,["model"],s);const o=d(t,["name"]);return o!=null&&m(i,["endpoint"],o),i}function SM(t,e){const i={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(l=>l)),m(i,["examples","examples"],o)}return i}function TM(t,e,i){const s={};let o=d(i,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(o==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=d(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function y_(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&m(i,["sdkHttpResponse"],s);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["state"]);l!=null&&m(i,["state"],Qv(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["tuningTask","startTime"]);f!=null&&m(i,["startTime"],f);const h=d(t,["tuningTask","completeTime"]);h!=null&&m(i,["endTime"],h);const p=d(t,["updateTime"]);p!=null&&m(i,["updateTime"],p);const v=d(t,["description"]);v!=null&&m(i,["description"],v);const E=d(t,["baseModel"]);E!=null&&m(i,["baseModel"],E);const S=d(t,["_self"]);return S!=null&&m(i,["tunedModel"],EM(S)),i}function Ad(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&m(i,["sdkHttpResponse"],s);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["state"]);l!=null&&m(i,["state"],Qv(l));const c=d(t,["createTime"]);c!=null&&m(i,["createTime"],c);const f=d(t,["startTime"]);f!=null&&m(i,["startTime"],f);const h=d(t,["endTime"]);h!=null&&m(i,["endTime"],h);const p=d(t,["updateTime"]);p!=null&&m(i,["updateTime"],p);const v=d(t,["error"]);v!=null&&m(i,["error"],v);const E=d(t,["description"]);E!=null&&m(i,["description"],E);const S=d(t,["baseModel"]);S!=null&&m(i,["baseModel"],S);const w=d(t,["tunedModel"]);w!=null&&m(i,["tunedModel"],w);const x=d(t,["preTunedModel"]);x!=null&&m(i,["preTunedModel"],x);const C=d(t,["supervisedTuningSpec"]);C!=null&&m(i,["supervisedTuningSpec"],C);const A=d(t,["preferenceOptimizationSpec"]);A!=null&&m(i,["preferenceOptimizationSpec"],A);const k=d(t,["tuningDataStats"]);k!=null&&m(i,["tuningDataStats"],k);const P=d(t,["encryptionSpec"]);P!=null&&m(i,["encryptionSpec"],P);const R=d(t,["partnerModelTuningSpec"]);R!=null&&m(i,["partnerModelTuningSpec"],R);const O=d(t,["customBaseModel"]);O!=null&&m(i,["customBaseModel"],O);const H=d(t,["experiment"]);H!=null&&m(i,["experiment"],H);const F=d(t,["labels"]);F!=null&&m(i,["labels"],F);const j=d(t,["outputUri"]);j!=null&&m(i,["outputUri"],j);const de=d(t,["pipelineJob"]);de!=null&&m(i,["pipelineJob"],de);const K=d(t,["serviceAccount"]);K!=null&&m(i,["serviceAccount"],K);const W=d(t,["tunedModelDisplayName"]);W!=null&&m(i,["tunedModelDisplayName"],W);const Q=d(t,["veoTuningSpec"]);return Q!=null&&m(i,["veoTuningSpec"],Q),i}function wM(t,e){const i={},s=d(t,["sdkHttpResponse"]);s!=null&&m(i,["sdkHttpResponse"],s);const o=d(t,["name"]);o!=null&&m(i,["name"],o);const l=d(t,["metadata"]);l!=null&&m(i,["metadata"],l);const c=d(t,["done"]);c!=null&&m(i,["done"],c);const f=d(t,["error"]);return f!=null&&m(i,["error"],f),i}function m0(t,e){const i={},s=d(t,["gcsUri"]);s!=null&&m(i,["validationDatasetUri"],s);const o=d(t,["vertexDatasetResource"]);return o!=null&&m(i,["validationDatasetUri"],o),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bM extends jn{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new er(zn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const o={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(o.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:o});return l.baseModel=void 0,await this.tuneInternal(l)}else{const o=Object.assign({},i);return await this.tuneInternal(o)}else{const o=Object.assign({},i),l=await this.tuneMldevInternal(o);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Ed.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=hM(e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>Ad(v))}else{const p=fM(e);return f=ie("{name}",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>y_(v))}}async listInternal(e){var i,s,o,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const p=yM(e);return f=ie("tuningJobs",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=_M(v),S=new Jy;return Object.assign(S,E),S})}else{const p=gM(e);return f=ie("tunedModels",p._url),h=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const S=E;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const E=vM(v),S=new Jy;return Object.assign(S,E),S})}}async cancel(e){var i,s,o,l;let c="",f={};if(this.apiClient.isVertexAI()){const h=aM(e);c=ie("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const h=oM(e);c=ie("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI()){const f=dM(e,e);return l=ie("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>Ad(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let o,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cM(e);return l=ie("tunedModels",f._url),c=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:h.headers},v})),o.then(h=>wM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xM{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CM=1024*1024*8,AM=3,RM=1e3,NM=2,ul="x-goog-upload-status";async function MM(t,e,i){var s;const o=await v_(t,e,i),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[ul])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function IM(t,e,i){var s;const o=await v_(t,e,i),l=await(o==null?void 0:o.json());if(((s=o==null?void 0:o.headers)===null||s===void 0?void 0:s[ul])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=$v(l),f=new Wd;return Object.assign(f,c),f}async function v_(t,e,i){var s,o;let l=0,c=0,f=new Sd(new Response),h="upload";for(l=t.size;c<l;){const p=Math.min(CM,l-c),v=t.slice(c,c+p);c+p>=l&&(h+=", finalize");let E=0,S=RM;for(;E<AM&&(f=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[ul]));)E++,await DM(S),S=S*NM;if(c+=p,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[ul])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function kM(t){return{size:t.size,type:t.type}}function DM(t){return new Promise(e=>setTimeout(e,t))}class UM{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MM(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await IM(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await kM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PM{create(e,i,s){return new OM(e,i,s)}}class OM{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g0="x-goog-api-key";class LM{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(g0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(g0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qM="gl-node/";class BM{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=NC(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion;const o=new LM(this.apiKey);this.apiClient=new t2({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qM+"web",uploader:new UM,downloader:new xM}),this.models=new E2(this.apiClient),this.live=new p2(this.apiClient,o,new PM),this.batches=new eR(this.apiClient),this.chats=new kR(this.models,this.apiClient),this.caches=new NR(this.apiClient),this.files=new VR(this.apiClient),this.operations=new S2(this.apiClient),this.authTokens=new O2(this.apiClient),this.tunings=new bM(this.apiClient),this.fileSearchStores=new sM(this.apiClient)}}const ed={},ls=(ed==null?void 0:ed.VITE_API_KEY)??"AIzaSyCLgmI79zow9blya9UaJcqUYIsH5gBN_gE";ls||console.warn("VITE_API_KEY (or API_KEY) for Gemini is not set. AI features will not work.");const Sl=new BM({apiKey:ls}),nf="gemini-2.5-flash",HM="gemini-2.5-flash",GM=async(t,e)=>{if(!ls)return Promise.resolve([]);try{const s=(await Sl.models.generateContent({model:nf,contents:`Generate ${e} multiple-choice aptitude questions about "${t}". For each question, provide a question text, 4 options, the correct answer, and a brief explanation.`,config:{responseMimeType:"application/json",responseSchema:{type:Xe.ARRAY,items:{type:Xe.OBJECT,properties:{question:{type:Xe.STRING},options:{type:Xe.ARRAY,items:{type:Xe.STRING}},correctAnswer:{type:Xe.STRING},explanation:{type:Xe.STRING}},required:["question","options","correctAnswer","explanation"]}}}})).text.trim();return JSON.parse(s)}catch(i){return console.error("Error generating questions with Gemini:",i),[]}},VM=async(t,e,i)=>{if(!ls)return"Gemini API key is not configured. I can't help right now.";let s="You are AptiPro's AI Mentor. You are an expert in aptitude tests, including quantitative, logical, and verbal reasoning. Your tone is encouraging, helpful, and clear. Help users understand concepts and solve problems step-by-step. Do not answer questions outside of this scope.";i&&(s+=`

Additionally, use the user's past performance data to provide personalized advice and suggestions. Here is a summary of their performance:
${i}`);const o=Sl.chats.create({model:HM,config:{systemInstruction:s},history:e});try{return(await o.sendMessage({message:t})).text}catch(l){return console.error("Error getting AI mentor response:",l),"Sorry, I encountered an error. Please try again."}},zM=async(t,e,i)=>{if(!ls)return Promise.resolve([]);try{const o=(await Sl.models.generateContent({model:nf,contents:`Generate ${i} aptitude questions for a voice test on the topic "${t}" with ${e} difficulty. The questions should be clear and concise. The answers should be simple, one-or-two-word answers that are easy to say.`,config:{responseMimeType:"application/json",responseSchema:{type:Xe.ARRAY,items:{type:Xe.OBJECT,properties:{question:{type:Xe.STRING},answer:{type:Xe.STRING}},required:["question","answer"]}}}})).text.trim();return JSON.parse(o)}catch(s){return console.error("Error generating voice test questions:",s),[]}},FM=async(t,e,i)=>{if(!ls)return Promise.resolve({isCorrect:!1,feedback:"AI evaluation is unavailable."});try{const s=`Question: "${t}"
    Correct Answer: "${e}"
    User's Spoken Answer: "${i}"
    
    Is the user's spoken answer correct? Be flexible with minor variations (e.g., 'forty five' vs '45', extra words like 'the answer is...'). Respond in JSON format with two keys: "isCorrect" (boolean) and "feedback" (a brief string explaining why, or just confirming correctness).`,l=(await Sl.models.generateContent({model:nf,contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Xe.OBJECT,properties:{isCorrect:{type:Xe.BOOLEAN},feedback:{type:Xe.STRING}},required:["isCorrect","feedback"]}}})).text.trim();return JSON.parse(l)}catch(s){return console.error("Error evaluating answer:",s),i.toLowerCase().includes(e.toLowerCase())?{isCorrect:!0,feedback:"Correct!"}:{isCorrect:!1,feedback:`Sorry, an error occurred during evaluation. The expected answer is similar to "${e}".`}}},__=[{name:"Quantitative Aptitude",description:"Test your numerical and mathematical skills.",key:"quantitative-aptitude"},{name:"Logical Reasoning",description:"Assess your problem-solving abilities.",key:"logical-reasoning"},{name:"Verbal Ability",description:"Check your command over the English language.",key:"verbal-ability"},{name:"General Knowledge",description:"Evaluate your awareness of current affairs.",key:"general-knowledge"},{name:"Data Interpretation",description:"Analyze data from charts and graphs.",key:"data-interpretation"}],y0=()=>{const{topic:t}=P0(),e=fl(),{user:i,setProfile:s}=Sn(),[o,l]=M.useState("not-started"),[c,f]=M.useState([]),[h,p]=M.useState(0),[v,E]=M.useState([]),[S,w]=M.useState(!1),[x,C]=M.useState(300),[A,k]=M.useState(null),[P,R]=M.useState(!1),O=__.find(W=>W.key===t);M.useEffect(()=>{t&&O?F(O.name):K()},[t]),M.useEffect(()=>{if(o==="in-progress"&&x>0){const W=setTimeout(()=>C(x-1),1e3);return()=>clearTimeout(W)}x===0&&o==="in-progress"&&H()},[x,o]),M.useEffect(()=>{const W=()=>{document.hidden&&o==="in-progress"&&!P&&alert("Warning: Switching tabs during a test is not recommended. The timer is still running.")};return o==="in-progress"&&document.addEventListener("visibilitychange",W),()=>{document.removeEventListener("visibilitychange",W)}},[o,P]);const H=async()=>{if(o==="completed")return;l("completed");const W=v.filter((Q,Z)=>c[Z]&&Q===c[Z].correctAnswer).length;if(k(null),O&&i)try{const{error:Q}=await Je.from("test_results").insert({user_id:i.id,topic:O.name,score:W,total_questions:c.length});if(Q)throw Q;const Z=W*100;if(Z>0){const{error:ge}=await Je.rpc("increment_user_score",{increment_value:Z});if(ge)throw ge;s(we=>we?{...we,score:we.score+Z}:null)}}catch(Q){let Z;Q&&typeof Q=="object"&&"message"in Q&&typeof Q.message=="string"||Q instanceof Error?Z=Q.message:typeof Q=="string"?Z=Q:Z="An unexpected error occurred while saving your test results.",console.error("Failed to save performance data",Q),k(Z)}},F=async W=>{l("loading"),k(null);const Q=await GM(W,5);Q.length>0?(f(Q),E(new Array(Q.length).fill(null)),p(0),w(!1),C(300),l("in-progress")):(l("not-started"),alert("Could not load questions. Please try again."),e("/practice"))},j=W=>{const Q=[...v];Q[h]=W,E(Q),w(!0)},de=()=>{w(!1),h<c.length-1?p(h+1):H()},K=()=>{l("not-started"),f([]),R(!1),e("/practice")};if(!t||!O)return _.jsx(jM,{});if(o==="loading")return _.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[_.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-fire-orange-start rounded-full animate-spin"}),_.jsx("p",{className:"mt-4 text-lg",children:"Generating your test..."})]});if(o==="completed"){const W=v.filter((Q,Z)=>Q===c[Z].correctAnswer).length;return _.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in text-center",children:[_.jsx("h2",{className:"text-3xl font-bold text-fire-orange-start mb-4",children:"Test Completed!"}),_.jsx("p",{className:"text-xl mb-2",children:"You scored:"}),_.jsxs("p",{className:"text-5xl font-bold mb-2",children:[W," / ",c.length]}),A?_.jsxs("div",{className:"my-4 p-3 text-sm text-center text-red-800 bg-red-100 rounded-lg dark:bg-red-900 dark:text-red-300",children:[_.jsxs("p",{children:[_.jsx(gl,{className:"inline-block mr-2",size:16}),"Could not save your score. Your total XP might not be updated."]}),_.jsx("p",{className:"text-xs mt-1 opacity-70",children:A})]}):_.jsxs("p",{className:"text-lg font-semibold text-green-500 mb-6",children:["+",W*100," XP Earned"]}),_.jsx("button",{onClick:K,className:"px-6 py-2 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 transition-opacity",children:"Take Another Test"})]})}if(o==="in-progress"&&c.length>0){const W=c[h];return _.jsxs("div",{className:"relative p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in",children:[_.jsx("button",{onClick:()=>R(!0),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 z-20",children:_.jsx(Vv,{})}),P&&_.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-30 rounded-2xl",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl text-center w-11/12 max-w-sm",children:[_.jsx("h3",{className:"text-lg font-bold mb-2",children:"End Test?"}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure? Your progress will not be saved."}),_.jsxs("div",{className:"flex justify-center gap-4",children:[_.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-sm font-semibold",children:"Continue Test"}),_.jsx("button",{onClick:K,className:"px-4 py-2 rounded-lg bg-red-500 text-white text-sm font-semibold",children:"End Test"})]})]})}),_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsxs("button",{onClick:()=>R(!0),className:"flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-black dark:hover:text-white",children:[_.jsx(sC,{}),_.jsx("span",{className:"ml-2",children:"Back to Topics"})]}),_.jsxs("div",{className:"flex items-center text-lg font-semibold text-fire-red-end",children:[_.jsx(Fv,{}),_.jsxs("span",{className:"ml-2",children:[Math.floor(x/60),":",("0"+x%60).slice(-2)]})]})]}),_.jsxs("div",{className:"mb-4",children:[_.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Question ",h+1," of ",c.length]}),_.jsx("p",{className:"text-xl font-semibold mt-1",children:W.question})]}),_.jsx("div",{className:"space-y-3",children:W.options.map((Q,Z)=>{const ge=v[h]===Q,we=W.correctAnswer===Q;let ke="border-gray-300 dark:border-gray-600 hover:border-fire-orange-start hover:bg-orange-50 dark:hover:bg-gray-700";return S?we?ke="bg-green-100 border-green-500 text-green-800 dark:bg-green-900 dark:text-green-200 dark:border-green-700":ge&&!we&&(ke="bg-red-100 border-red-500 text-red-800 dark:bg-red-900 dark:text-red-200 dark:border-red-700"):ge&&(ke="border-fire-orange-start bg-orange-100 dark:bg-gray-700 dark:border-fire-orange-start"),_.jsx("button",{onClick:()=>j(Q),disabled:S,className:`w-full text-left p-4 border-2 rounded-lg transition-all ${ke}`,children:Q},Z)})}),S&&_.jsxs("div",{className:"mt-6 p-4 bg-orange-50 dark:bg-gray-700/50 rounded-lg animate-fade-in",children:[_.jsxs("div",{className:"flex items-start",children:[_.jsx(oC,{className:"text-yellow-500 mt-1"}),_.jsxs("div",{className:"ml-3",children:[_.jsx("h3",{className:"font-bold",children:"Explanation"}),_.jsx("p",{className:"text-sm mt-1",children:W.explanation})]})]}),_.jsx("button",{onClick:de,className:"mt-4 w-full px-6 py-2 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 transition-opacity",children:h<c.length-1?"Next Question":"Finish Test"})]})]})}return null},jM=()=>{const t=fl();return _.jsxs("div",{className:"animate-fade-in",children:[_.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Choose a Topic to Practice"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:__.map(e=>_.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all transform cursor-pointer",onClick:()=>t(`/practice/${e.key}`),children:[_.jsx("h2",{className:"text-xl font-bold text-fire-orange-start",children:e.name}),_.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:e.description})]},e.key))})]})},v0=30,$M=()=>{const[t,e]=M.useState("Quantitative Aptitude"),[i,s]=M.useState("Medium"),[o,l]=M.useState(5),[c,f]=M.useState("setup"),[h,p]=M.useState([]),[v,E]=M.useState(0),[S,w]=M.useState(0),[x,C]=M.useState(!1),[A,k]=M.useState(!1),[P,R]=M.useState(""),[O,H]=M.useState(!1),[F,j]=M.useState(null),[de,K]=M.useState(v0),W=M.useRef(null),Q=M.useRef(null),Z=M.useCallback(()=>{W.current&&(clearInterval(W.current),W.current=null)},[]),ge=M.useCallback(()=>{Z(),Q.current&&A&&Q.current.stop(),f("evaluating"),j({isCorrect:!1,feedback:"Time's up! You need to be quicker."}),f("in-progress")},[A,Z]),we=M.useCallback(()=>{Z(),K(v0),W.current=window.setInterval(()=>{K(ee=>ee<=1?(ge(),0):ee-1)},1e3)},[Z,ge]),ke=M.useCallback(async ee=>{Z(),f("evaluating");const ue=h[v],pe=await FM(ue.question,ue.answer,ee);j(pe),pe.isCorrect&&w(te=>te+1),f("in-progress")},[h,v,Z]);M.useEffect(()=>{const ee=window.SpeechRecognition||window.webkitSpeechRecognition;if(!ee){console.error("Speech Recognition API not supported in this browser.");return}Q.current=new ee;const ue=Q.current;ue.continuous=!1,ue.interimResults=!0,ue.lang="en-US",ue.onstart=()=>k(!0),ue.onend=()=>k(!1),ue.onerror=pe=>{console.error("Speech recognition error",pe.error),k(!1)},ue.onresult=pe=>{let te="",oe="";for(let ae=pe.resultIndex;ae<pe.results.length;++ae)pe.results[ae].isFinal?oe+=pe.results[ae][0].transcript:te+=pe.results[ae][0].transcript;R(oe||te),H(!!oe),oe&&ke(oe.trim())}},[ke]);const G=M.useCallback(ee=>{window.speechSynthesis.cancel();const ue=new SpeechSynthesisUtterance(ee);ue.rate=.9,ue.onend=()=>{we()},window.speechSynthesis.speak(ue)},[we]);M.useEffect(()=>{c==="in-progress"&&h.length>0&&!F&&G(h[v].question)},[v,c,h,G,F]);const X=async()=>{f("loading");const ee=await zM(t,i,o);ee&&ee.length>0?(p(ee),E(0),w(0),R(""),H(!1),j(null),f("in-progress")):(alert("Failed to generate questions. Please try again."),f("setup"))},re=()=>{!Q.current||A||F||de===0||(R(""),H(!1),j(null),window.speechSynthesis.cancel(),Q.current.start())},Ce=()=>{R(""),H(!1),j(null),Z(),v<h.length-1?E(ee=>ee+1):f("finished")},Re=()=>{R(""),H(!1),j(null),we(),Q.current&&!A&&Q.current.start()},D=()=>{Z(),C(!1),f("finished")},Y=()=>{window.speechSynthesis.cancel(),Z(),f("setup"),E(0),w(0),p([]),R(""),H(!1),j(null)};if(c==="setup")return _.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in",children:[_.jsx("h1",{className:"text-3xl font-bold text-center mb-6",children:"Voice Test Setup"}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Topic"}),_.jsxs("select",{value:t,onChange:ee=>e(ee.target.value),className:"w-full p-3 bg-gray-100 dark:bg-gray-700 border-transparent rounded-lg focus:outline-none focus:ring-2 focus:ring-fire-orange-start",children:[_.jsx("option",{children:"Quantitative Aptitude"}),_.jsx("option",{children:"Verbal Ability"}),_.jsx("option",{children:"General Knowledge"})]})]}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty"}),_.jsx("div",{className:"grid grid-cols-3 gap-2 rounded-lg bg-gray-100 dark:bg-gray-700 p-1",children:["Easy","Medium","Hard"].map(ee=>_.jsx("button",{onClick:()=>s(ee),className:`px-4 py-2 text-sm font-semibold rounded-md transition ${i===ee?"bg-white dark:bg-gray-900 text-fire-orange-start shadow":"text-gray-600 dark:text-gray-300"}`,children:ee},ee))})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Number of Questions: ",o]}),_.jsx("input",{type:"range",min:"2",max:"12",value:o,onChange:ee=>l(Number(ee.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700 accent-fire-orange-start"})]}),_.jsx("button",{onClick:X,className:"w-full px-6 py-3 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 transition-opacity",children:"Start Test"})]});if(c==="loading")return _.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[_.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-fire-orange-start rounded-full animate-spin"}),_.jsx("p",{className:"mt-4 text-lg",children:"Generating your voice test..."})]});if(c==="finished")return _.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in text-center",children:[_.jsx("h2",{className:"text-3xl font-bold text-fire-orange-start mb-4",children:"Test Finished!"}),_.jsx("p",{className:"text-xl mb-2",children:"Your final score:"}),_.jsxs("p",{className:"text-5xl font-bold mb-6",children:[S," / ",h.length]}),_.jsx("button",{onClick:Y,className:"px-6 py-2 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 transition-opacity",children:"Take Another Test"})]});const ne=h[v];return _.jsxs("div",{className:"max-w-2xl mx-auto p-4 sm:p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in relative",children:[_.jsx("button",{onClick:()=>C(!0),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 z-20",children:_.jsx(Vv,{})}),_.jsxs("div",{className:"absolute top-4 left-4 flex items-center text-lg font-semibold text-fire-red-end",children:[_.jsx(Fv,{}),_.jsxs("span",{className:"ml-2 w-10",children:[de,"s"]})]}),x&&_.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10 rounded-2xl",children:_.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl text-center w-11/12 max-w-sm",children:[_.jsx("h3",{className:"text-lg font-bold mb-2",children:"End Test?"}),_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Are you sure? Your progress will be lost."}),_.jsxs("div",{className:"flex justify-center gap-4",children:[_.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-600 text-sm font-semibold",children:"Continue Test"}),_.jsx("button",{onClick:D,className:"px-4 py-2 rounded-lg bg-red-500 text-white text-sm font-semibold",children:"End Test"})]})]})}),_.jsx("h1",{className:"text-2xl font-bold text-center mb-2 mt-8 sm:mt-0",children:"AI Voice Test"}),_.jsxs("p",{className:"text-center text-gray-500 dark:text-gray-400 mb-6",children:[t," - ",i]}),_.jsxs("div",{className:"p-6 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center min-h-[150px] flex flex-col justify-center",children:[_.jsxs("p",{className:"text-sm text-gray-500",children:["Question ",v+1," of ",h.length]}),_.jsx("p",{className:"text-xl font-semibold my-2",children:ne==null?void 0:ne.question}),_.jsxs("button",{onClick:()=>G(ne.question),className:"inline-flex items-center text-sm text-fire-orange-start font-medium hover:underline mx-auto",children:[_.jsx(uC,{})," ",_.jsx("span",{className:"ml-2",children:"Read Aloud Again"})]})]}),_.jsxs("div",{className:"flex flex-col items-center my-6",children:[_.jsx("button",{onClick:re,disabled:A||c==="evaluating"||F!==null||de===0,className:`w-24 h-24 rounded-full flex items-center justify-center transition-all duration-300 text-white
                        ${A?"bg-red-500 animate-pulse":"bg-green-500 hover:bg-green-600"}
                        disabled:bg-gray-400 disabled:cursor-not-allowed`,children:A?_.jsx(lC,{size:40}):_.jsx(aC,{size:40})}),_.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:c==="evaluating"?"Evaluating...":A?"Listening...":F?"Check your result below":de===0?"Time's up!":"Tap to Speak"})]}),(P||F)&&_.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg text-center min-h-[120px] flex flex-col justify-center",children:[P&&_.jsxs(_.Fragment,{children:[_.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You said:"}),_.jsxs("p",{className:`text-lg font-medium italic ${O?"text-gray-800 dark:text-gray-200":"text-gray-500"}`,children:['"',P,'"']})]}),c==="evaluating"&&!F&&_.jsx("div",{className:"mt-2 text-sm",children:"Checking answer..."}),F&&_.jsxs("div",{className:"mt-2 animate-fade-in",children:[_.jsx("p",{className:`font-semibold ${F.isCorrect?"text-green-500":"text-red-500"}`,children:F.feedback}),_.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[!F.isCorrect&&de>0&&_.jsx("button",{onClick:Re,className:"px-4 py-2 text-sm font-semibold bg-gray-200 dark:bg-gray-600 rounded-lg",children:"Try Again"}),_.jsx("button",{onClick:Ce,className:"px-4 py-2 text-sm font-semibold bg-fire-orange-start text-white rounded-lg",children:v<h.length-1?"Next Question":"Finish Test"})]})]})]})]})},Xi=({avatarUrl:t,name:e,size:i=40,className:s=""})=>{const o={width:`${i}px`,height:`${i}px`,fontSize:`${i/2.2}px`},l=typeof e=="string"&&e||"";if(t)return _.jsx("img",{src:t,alt:l||"User Avatar",className:`rounded-full object-cover bg-gray-200 ${s}`,style:o});const c=l?l.charAt(0).toUpperCase():"?",f=["from-red-500 to-orange-500","from-blue-500 to-teal-500","from-purple-500 to-indigo-500","from-green-500 to-lime-500","from-pink-500 to-rose-500","from-yellow-500 to-amber-500"],h=l?l.charCodeAt(0)%f.length:0;return _.jsx("div",{className:`bg-gradient-to-br ${f[h]} rounded-full flex items-center justify-center font-bold text-white uppercase ${s}`,style:o,children:_.jsx("span",{children:c})})},YM=()=>{const{user:t,profile:e}=Sn(),[i,s]=M.useState([]),[o,l]=M.useState(null),[c,f]=M.useState(!0),[h,p]=M.useState(null);M.useEffect(()=>{const S=async()=>{p(null);try{const{data:C,error:A}=await Je.from("profiles").select("id, username, avatar_url, score").order("score",{ascending:!1}).limit(10);if(A)throw A;if(C){const k=C.map((P,R)=>({...P,rank:R+1}));s(k)}if(e){const{count:k,error:P}=await Je.from("profiles").select("*",{count:"exact",head:!0}).gt("score",e.score);if(P)throw P;l((k??0)+1)}}catch(C){let A;C&&typeof C=="object"&&"message"in C&&typeof C.message=="string"||C instanceof Error?A=C.message:typeof C=="string"?A=C:A="An unexpected error occurred while loading the leaderboard.",console.error("Error fetching leaderboard:",C),p(A)}};(async()=>{f(!0),await S(),f(!1)})();const x=Je.channel("public:profiles:leaderboard").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},C=>{S()}).subscribe();return()=>{Je.removeChannel(x)}},[e]);const v=i.some(S=>S.id===(t==null?void 0:t.id)),E=typeof(e==null?void 0:e.username)=="string"?e.username:"Anonymous";return _.jsxs("div",{className:"animate-fade-in",children:[_.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Leaderboard"}),_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[_.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:[_.jsx("h2",{className:"text-xl font-bold",children:"Overall Rankings"}),_.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"See where you stand among the best."})]}),c?_.jsx("div",{className:"p-6 text-center",children:"Loading leaderboard..."}):h?_.jsx("div",{className:"p-4 sm:p-6",children:_.jsx(Yd,{feature:"leaderboard",error:h})}):i.length===0?_.jsx("div",{className:"p-6 text-center text-gray-500",children:"The leaderboard is empty. Be the first to set a score!"}):_.jsxs(_.Fragment,{children:[_.jsx("ul",{children:i.map((S,w)=>{const x=typeof S.username=="string"?S.username:"Anonymous";return _.jsx("li",{children:_.jsxs(Ti,{to:`/profile/${S.id}`,className:`flex items-center p-4 transition-colors cursor-pointer ${S.id===(t==null?void 0:t.id)?"bg-gradient-to-r from-orange-50 to-red-50 dark:from-gray-700/50 dark:to-gray-700/50":"hover:bg-gray-50 dark:hover:bg-gray-700/30"} ${w!==i.length-1?"border-b border-gray-200 dark:border-gray-700":""}`,children:[_.jsxs("div",{className:"flex items-center w-1/6",children:[_.jsx("span",{className:"font-bold text-lg text-gray-600 dark:text-gray-300 w-8 text-center",children:S.rank}),S.rank<=3&&_.jsx(rl,{className:S.rank===1?"text-yellow-400":S.rank===2?"text-gray-400":"text-yellow-600"})]}),_.jsxs("div",{className:"flex items-center w-3/6",children:[_.jsx(Xi,{avatarUrl:S.avatar_url,name:x,size:40,className:"mr-4"}),_.jsx("span",{className:`font-medium truncate ${S.id===(t==null?void 0:t.id)?"text-fire-orange-start font-bold":""}`,children:x})]}),_.jsxs("div",{className:"flex items-center justify-end w-2/6 text-right",children:[_.jsxs("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[S.score.toLocaleString()," XP"]}),_.jsx(vd,{className:"ml-2 text-orange-500"})]})]})},S.id)})}),!v&&e&&o&&_.jsx("div",{className:"border-t-4 border-dashed border-gray-200 dark:border-gray-700",children:_.jsxs("div",{className:"flex items-center p-4 bg-gradient-to-r from-orange-50 to-red-50 dark:from-gray-700/50 dark:to-gray-700/50",children:[_.jsx("div",{className:"flex items-center w-1/6",children:_.jsx("span",{className:"font-bold text-lg text-gray-600 dark:text-gray-300 w-8 text-center",children:o})}),_.jsxs("div",{className:"flex items-center w-3/6",children:[_.jsx(Xi,{avatarUrl:e.avatar_url,name:E,size:40,className:"mr-4"}),_.jsxs("span",{className:"font-medium truncate text-fire-orange-start font-bold",children:[E," (You)"]})]}),_.jsxs("div",{className:"flex items-center justify-end w-2/6 text-right",children:[_.jsxs("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:[e.score.toLocaleString()," XP"]}),_.jsx(vd,{className:"ml-2 text-orange-500"})]})]})})]})]})]})},JM=()=>{const{user:t,profile:e}=Sn(),[i,s]=M.useState([{role:"model",parts:[{text:"Hello! I'm your AI Mentor. How can I help you with your aptitude preparation today?"}]}]),[o,l]=M.useState(""),[c,f]=M.useState(!1),[h,p]=M.useState(""),v=M.useRef(null),E=()=>{var w;(w=v.current)==null||w.scrollIntoView({behavior:"smooth"})};M.useEffect(E,[i]),M.useEffect(()=>{try{const w=JSON.parse(localStorage.getItem("aptiProPerformance")||"{}");if(Object.keys(w).length>0){let x=`User Performance Summary:
`;for(const C in w){const A=w[C].total>0?w[C].correct/w[C].total*100:0;x+=`- ${C}: ${A.toFixed(0)}% accuracy (${w[C].correct}/${w[C].total} correct).
`}p(x)}}catch(w){console.error("Failed to load performance data",w)}},[]);const S=async()=>{if(!o.trim()||c)return;const w={role:"user",parts:[{text:o}]};s(k=>[...k,w]),l(""),f(!0);const x=i.slice(1),A={role:"model",parts:[{text:await VM(o,x,h)}]};s(k=>[...k,A]),f(!1)};return _.jsxs("div",{className:"flex flex-col h-full max-w-3xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-lg animate-fade-in",children:[_.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:_.jsx("h1",{className:"text-xl font-bold text-center",children:"AI Mentor"})}),_.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:_.jsxs("div",{className:"space-y-4",children:[i.map((w,x)=>_.jsxs("div",{className:`flex items-end gap-2 ${w.role==="user"?"justify-end":"justify-start"}`,children:[w.role==="model"&&_.jsx(Xi,{name:"AI",size:32}),_.jsx("div",{className:`max-w-sm md:max-w-md p-3 rounded-2xl ${w.role==="user"?"bg-gradient-to-r from-fire-orange-start to-fire-red-end text-white rounded-br-none":"bg-gray-200 dark:bg-gray-700 rounded-bl-none"}`,children:_.jsx("p",{style:{whiteSpace:"pre-wrap"},children:w.parts[0].text})}),w.role==="user"&&_.jsx(Xi,{avatarUrl:e==null?void 0:e.avatar_url,name:(e==null?void 0:e.username)||(t==null?void 0:t.email),size:32})]},x)),c&&_.jsxs("div",{className:"flex justify-start gap-2",children:[_.jsx(Xi,{name:"AI",size:32}),_.jsx("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700 rounded-bl-none",children:_.jsxs("div",{className:"flex items-center space-x-1",children:[_.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),_.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),_.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})})]}),_.jsx("div",{ref:v})]})}),_.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("input",{type:"text",value:o,onChange:w=>l(w.target.value),onKeyPress:w=>w.key==="Enter"&&S(),placeholder:"Ask me anything about aptitude...",className:"flex-1 w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-fire-orange-start",disabled:c}),_.jsx("button",{onClick:S,disabled:c||!o.trim(),className:"p-3 bg-gradient-to-r from-fire-orange-start to-fire-red-end text-white rounded-full hover:opacity-90 transition-opacity disabled:opacity-50",children:_.jsx(cC,{})})]})})]})};function mn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Qi(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const E_=6048e5,KM=864e5;let WM={};function Tl(){return WM}function yo(t,e){var f,h,p,v;const i=Tl(),s=(e==null?void 0:e.weekStartsOn)??((h=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:h.weekStartsOn)??i.weekStartsOn??((v=(p=i.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,o=mn(t),l=o.getDay(),c=(l<s?7:0)+l-s;return o.setDate(o.getDate()-c),o.setHours(0,0,0,0),o}function cl(t){return yo(t,{weekStartsOn:1})}function S_(t){const e=mn(t),i=e.getFullYear(),s=Qi(t,0);s.setFullYear(i+1,0,4),s.setHours(0,0,0,0);const o=cl(s),l=Qi(t,0);l.setFullYear(i,0,4),l.setHours(0,0,0,0);const c=cl(l);return e.getTime()>=o.getTime()?i+1:e.getTime()>=c.getTime()?i:i-1}function _0(t){const e=mn(t);return e.setHours(0,0,0,0),e}function E0(t){const e=mn(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),+t-+i}function XM(t,e){const i=_0(t),s=_0(e),o=+i-E0(i),l=+s-E0(s);return Math.round((o-l)/KM)}function QM(t){const e=S_(t),i=Qi(t,0);return i.setFullYear(e,0,4),i.setHours(0,0,0,0),cl(i)}function ZM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eI(t){if(!ZM(t)&&typeof t!="number")return!1;const e=mn(t);return!isNaN(Number(e))}function tI(t){const e=mn(t),i=Qi(t,0);return i.setFullYear(e.getFullYear(),0,1),i.setHours(0,0,0,0),i}const nI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},iI=(t,e,i)=>{let s;const o=nI[t];return typeof o=="string"?s=o:e===1?s=o.one:s=o.other.replace("{{count}}",e.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+s:s+" ago":s};function td(t){return(e={})=>{const i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}const rI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aI={date:td({formats:rI,defaultWidth:"full"}),time:td({formats:sI,defaultWidth:"full"}),dateTime:td({formats:oI,defaultWidth:"full"})},lI={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uI=(t,e,i,s)=>lI[t];function oo(t){return(e,i)=>{const s=i!=null&&i.context?String(i.context):"standalone";let o;if(s==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,f=i!=null&&i.width?String(i.width):c;o=t.formattingValues[f]||t.formattingValues[c]}else{const c=t.defaultWidth,f=i!=null&&i.width?String(i.width):t.defaultWidth;o=t.values[f]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(e):e;return o[l]}}const cI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},hI={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gI=(t,e)=>{const i=Number(t),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},yI={ordinalNumber:gI,era:oo({values:cI,defaultWidth:"wide"}),quarter:oo({values:dI,defaultWidth:"wide",argumentCallback:t=>t-1}),month:oo({values:fI,defaultWidth:"wide"}),day:oo({values:hI,defaultWidth:"wide"}),dayPeriod:oo({values:pI,defaultWidth:"wide",formattingValues:mI,defaultFormattingWidth:"wide"})};function ao(t){return(e,i={})=>{const s=i.width,o=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=e.match(o);if(!l)return null;const c=l[0],f=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(f)?_I(f,E=>E.test(c)):vI(f,E=>E.test(c));let p;p=t.valueCallback?t.valueCallback(h):h,p=i.valueCallback?i.valueCallback(p):p;const v=e.slice(c.length);return{value:p,rest:v}}}function vI(t,e){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}function _I(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}function EI(t){return(e,i={})=>{const s=e.match(t.matchPattern);if(!s)return null;const o=s[0],l=e.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=i.valueCallback?i.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}const SI=/^(\d+)(th|st|nd|rd)?/i,TI=/\d+/i,wI={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bI={any:[/^b/i,/^(a|c)/i]},xI={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},CI={any:[/1/i,/2/i,/3/i,/4/i]},AI={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},RI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NI={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},MI={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},II={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kI={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},DI={ordinalNumber:EI({matchPattern:SI,parsePattern:TI,valueCallback:t=>parseInt(t,10)}),era:ao({matchPatterns:wI,defaultMatchWidth:"wide",parsePatterns:bI,defaultParseWidth:"any"}),quarter:ao({matchPatterns:xI,defaultMatchWidth:"wide",parsePatterns:CI,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ao({matchPatterns:AI,defaultMatchWidth:"wide",parsePatterns:RI,defaultParseWidth:"any"}),day:ao({matchPatterns:NI,defaultMatchWidth:"wide",parsePatterns:MI,defaultParseWidth:"any"}),dayPeriod:ao({matchPatterns:II,defaultMatchWidth:"any",parsePatterns:kI,defaultParseWidth:"any"})},UI={code:"en-US",formatDistance:iI,formatLong:aI,formatRelative:uI,localize:yI,match:DI,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PI(t){const e=mn(t);return XM(e,tI(e))+1}function OI(t){const e=mn(t),i=+cl(e)-+QM(e);return Math.round(i/E_)+1}function T_(t,e){var v,E,S,w;const i=mn(t),s=i.getFullYear(),o=Tl(),l=(e==null?void 0:e.firstWeekContainsDate)??((E=(v=e==null?void 0:e.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??o.firstWeekContainsDate??((w=(S=o.locale)==null?void 0:S.options)==null?void 0:w.firstWeekContainsDate)??1,c=Qi(t,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const f=yo(c,e),h=Qi(t,0);h.setFullYear(s,0,l),h.setHours(0,0,0,0);const p=yo(h,e);return i.getTime()>=f.getTime()?s+1:i.getTime()>=p.getTime()?s:s-1}function LI(t,e){var f,h,p,v;const i=Tl(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(p=i.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,o=T_(t,e),l=Qi(t,0);return l.setFullYear(o,0,s),l.setHours(0,0,0,0),yo(l,e)}function qI(t,e){const i=mn(t),s=+yo(i,e)-+LI(i,e);return Math.round(s/E_)+1}function Oe(t,e){const i=t<0?"-":"",s=Math.abs(t).toString().padStart(e,"0");return i+s}const Ei={y(t,e){const i=t.getFullYear(),s=i>0?i:1-i;return Oe(e==="yy"?s%100:s,e.length)},M(t,e){const i=t.getMonth();return e==="M"?String(i+1):Oe(i+1,2)},d(t,e){return Oe(t.getDate(),e.length)},a(t,e){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(t,e){return Oe(t.getHours()%12||12,e.length)},H(t,e){return Oe(t.getHours(),e.length)},m(t,e){return Oe(t.getMinutes(),e.length)},s(t,e){return Oe(t.getSeconds(),e.length)},S(t,e){const i=e.length,s=t.getMilliseconds(),o=Math.trunc(s*Math.pow(10,i-3));return Oe(o,e.length)}},jr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},S0={G:function(t,e,i){const s=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});case"GGGG":default:return i.era(s,{width:"wide"})}},y:function(t,e,i){if(e==="yo"){const s=t.getFullYear(),o=s>0?s:1-s;return i.ordinalNumber(o,{unit:"year"})}return Ei.y(t,e)},Y:function(t,e,i,s){const o=T_(t,s),l=o>0?o:1-o;if(e==="YY"){const c=l%100;return Oe(c,2)}return e==="Yo"?i.ordinalNumber(l,{unit:"year"}):Oe(l,e.length)},R:function(t,e){const i=S_(t);return Oe(i,e.length)},u:function(t,e){const i=t.getFullYear();return Oe(i,e.length)},Q:function(t,e,i){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Oe(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,i){const s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Oe(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,i){const s=t.getMonth();switch(e){case"M":case"MM":return Ei.M(t,e);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,i){const s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return Oe(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,i,s){const o=qI(t,s);return e==="wo"?i.ordinalNumber(o,{unit:"week"}):Oe(o,e.length)},I:function(t,e,i){const s=OI(t);return e==="Io"?i.ordinalNumber(s,{unit:"week"}):Oe(s,e.length)},d:function(t,e,i){return e==="do"?i.ordinalNumber(t.getDate(),{unit:"date"}):Ei.d(t,e)},D:function(t,e,i){const s=PI(t);return e==="Do"?i.ordinalNumber(s,{unit:"dayOfYear"}):Oe(s,e.length)},E:function(t,e,i){const s=t.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});case"EEEE":default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,i,s){const o=t.getDay(),l=(o-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(l);case"ee":return Oe(l,2);case"eo":return i.ordinalNumber(l,{unit:"day"});case"eee":return i.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(o,{width:"short",context:"formatting"});case"eeee":default:return i.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,i,s){const o=t.getDay(),l=(o-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(l);case"cc":return Oe(l,e.length);case"co":return i.ordinalNumber(l,{unit:"day"});case"ccc":return i.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(o,{width:"narrow",context:"standalone"});case"cccccc":return i.day(o,{width:"short",context:"standalone"});case"cccc":default:return i.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,i){const s=t.getDay(),o=s===0?7:s;switch(e){case"i":return String(o);case"ii":return Oe(o,e.length);case"io":return i.ordinalNumber(o,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});case"iiii":default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,i){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,i){const s=t.getHours();let o;switch(s===12?o=jr.noon:s===0?o=jr.midnight:o=s/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,i){const s=t.getHours();let o;switch(s>=17?o=jr.evening:s>=12?o=jr.afternoon:s>=4?o=jr.morning:o=jr.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,i){if(e==="ho"){let s=t.getHours()%12;return s===0&&(s=12),i.ordinalNumber(s,{unit:"hour"})}return Ei.h(t,e)},H:function(t,e,i){return e==="Ho"?i.ordinalNumber(t.getHours(),{unit:"hour"}):Ei.H(t,e)},K:function(t,e,i){const s=t.getHours()%12;return e==="Ko"?i.ordinalNumber(s,{unit:"hour"}):Oe(s,e.length)},k:function(t,e,i){let s=t.getHours();return s===0&&(s=24),e==="ko"?i.ordinalNumber(s,{unit:"hour"}):Oe(s,e.length)},m:function(t,e,i){return e==="mo"?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ei.m(t,e)},s:function(t,e,i){return e==="so"?i.ordinalNumber(t.getSeconds(),{unit:"second"}):Ei.s(t,e)},S:function(t,e){return Ei.S(t,e)},X:function(t,e,i){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return w0(s);case"XXXX":case"XX":return $i(s);case"XXXXX":case"XXX":default:return $i(s,":")}},x:function(t,e,i){const s=t.getTimezoneOffset();switch(e){case"x":return w0(s);case"xxxx":case"xx":return $i(s);case"xxxxx":case"xxx":default:return $i(s,":")}},O:function(t,e,i){const s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+T0(s,":");case"OOOO":default:return"GMT"+$i(s,":")}},z:function(t,e,i){const s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+T0(s,":");case"zzzz":default:return"GMT"+$i(s,":")}},t:function(t,e,i){const s=Math.trunc(t.getTime()/1e3);return Oe(s,e.length)},T:function(t,e,i){const s=t.getTime();return Oe(s,e.length)}};function T0(t,e=""){const i=t>0?"-":"+",s=Math.abs(t),o=Math.trunc(s/60),l=s%60;return l===0?i+String(o):i+String(o)+e+Oe(l,2)}function w0(t,e){return t%60===0?(t>0?"-":"+")+Oe(Math.abs(t)/60,2):$i(t,e)}function $i(t,e=""){const i=t>0?"-":"+",s=Math.abs(t),o=Oe(Math.trunc(s/60),2),l=Oe(s%60,2);return i+o+e+l}const b0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},w_=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BI=(t,e)=>{const i=t.match(/(P+)(p+)?/)||[],s=i[1],o=i[2];if(!o)return b0(t,e);let l;switch(s){case"P":l=e.dateTime({width:"short"});break;case"PP":l=e.dateTime({width:"medium"});break;case"PPP":l=e.dateTime({width:"long"});break;case"PPPP":default:l=e.dateTime({width:"full"});break}return l.replace("{{date}}",b0(s,e)).replace("{{time}}",w_(o,e))},HI={p:w_,P:BI},GI=/^D+$/,VI=/^Y+$/,zI=["D","DD","YY","YYYY"];function FI(t){return GI.test(t)}function jI(t){return VI.test(t)}function $I(t,e,i){const s=YI(t,e,i);if(console.warn(s),zI.includes(t))throw new RangeError(s)}function YI(t,e,i){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${s} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,WI=/^'([^]*?)'?$/,XI=/''/g,QI=/[a-zA-Z]/;function ZI(t,e,i){var v,E,S,w;const s=Tl(),o=s.locale??UI,l=s.firstWeekContainsDate??((E=(v=s.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??1,c=s.weekStartsOn??((w=(S=s.locale)==null?void 0:S.options)==null?void 0:w.weekStartsOn)??0,f=mn(t);if(!eI(f))throw new RangeError("Invalid time value");let h=e.match(KI).map(x=>{const C=x[0];if(C==="p"||C==="P"){const A=HI[C];return A(x,o.formatLong)}return x}).join("").match(JI).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const C=x[0];if(C==="'")return{isToken:!1,value:ek(x)};if(S0[C])return{isToken:!0,value:x};if(C.match(QI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return{isToken:!1,value:x}});o.localize.preprocessor&&(h=o.localize.preprocessor(f,h));const p={firstWeekContainsDate:l,weekStartsOn:c,locale:o};return h.map(x=>{if(!x.isToken)return x.value;const C=x.value;(jI(C)||FI(C))&&$I(C,e,String(t));const A=S0[C[0]];return A(f,C,o.localize,p)}).join("")}function ek(t){const e=t.match(WI);return e?e[1].replace(XI,"'"):t}const tk=[{name:"Fire",class:"from-fire-orange-start to-fire-red-end"},{name:"Ocean",class:"from-blue-500 to-cyan-400"},{name:"Forest",class:"from-green-500 to-emerald-500"},{name:"Dusk",class:"from-purple-600 to-indigo-600"},{name:"Sunset",class:"from-yellow-400 to-orange-500"},{name:"Galaxy",class:"from-slate-800 to-slate-900"}],nd=160,nk=({achievement:t})=>_.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[_.jsx("div",{className:"flex-shrink-0 w-10 h-10 flex items-center justify-center bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full text-white",children:t.icon}),_.jsxs("div",{className:"ml-3",children:[_.jsx("p",{className:"font-semibold text-sm",children:t.name}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.description})]})]}),ik=({status:t})=>t==="saving"?_.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[_.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-t-transparent rounded-full animate-spin border-gray-400"}),"Saving..."]}):t==="success"?_.jsxs("div",{className:"flex items-center text-sm text-green-500",children:[_.jsx(sl,{size:16,className:"mr-1"})," Saved"]}):t==="error"?_.jsxs("div",{className:"flex items-center text-sm text-red-500",children:[_.jsx(gl,{size:16,className:"mr-1"})," Save failed"]}):t==="typing"?_.jsx("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:"..."}):_.jsxs("div",{className:"flex items-center text-sm text-gray-400 dark:text-gray-500",children:[_.jsx(sl,{size:16,className:"mr-1"})," Up to date"]}),x0=()=>{const{userId:t}=P0(),{user:e,profile:i,setProfile:s,signOut:o}=Sn(),[l,c]=M.useState(null),[f,h]=M.useState([]),[p,v]=M.useState([]),[E,S]=M.useState({testsTaken:0,overallAccuracy:0,bestTopic:null}),[w,x]=M.useState({username:"",bio:""}),[C,A]=M.useState(!0),[k,P]=M.useState(null),[R,O]=M.useState(null),[H,F]=M.useState("idle"),[j,de]=M.useState(!1),[K,W]=M.useState(!1),Q=!t||(e==null?void 0:e.id)===t,Z=M.useRef(null),ge=M.useRef(w),we=M.useRef(l),ke=M.useRef(H),G=M.useRef(null);M.useEffect(()=>{ge.current=w},[w]),M.useEffect(()=>{we.current=l},[l]),M.useEffect(()=>{ke.current=H},[H]);const X=(te,oe)=>{const ae=oe.length,at=oe.reduce((tt,gn)=>tt+gn.score,0),Qe=oe.reduce((tt,gn)=>tt+gn.total_questions,0),rn=Qe>0?Math.round(at/Qe*100):0,Nt={};oe.forEach(tt=>{Nt[tt.topic]||(Nt[tt.topic]={correct:0,total:0}),Nt[tt.topic].correct+=tt.score,Nt[tt.topic].total+=tt.total_questions});let Mt=null,tr=-1;for(const tt in Nt){const gn=Nt[tt].correct/Nt[tt].total;gn>tr&&(tr=gn,Mt=tt)}S({testsTaken:ae,overallAccuracy:rn,bestTopic:Mt});const sn=[],Yn=[{id:"welcome",name:"Welcome Aboard",description:"Joined the AptiPro community.",icon:_.jsx(ro,{size:20})},{id:"first_test",name:"First Steps",description:"Completed your first test.",icon:_.jsx(ro,{size:20})},{id:"novice_learner",name:"Novice Learner",description:"Earned over 1,000 XP.",icon:_.jsx(ro,{size:20})},{id:"challenger",name:"Consistent Challenger",description:"Completed 5 tests.",icon:_.jsx(ro,{size:20})},{id:"perfect_score",name:"Perfectionist",description:"Achieved a perfect score on a test.",icon:_.jsx(ro,{size:20})},{id:"apti_pro",name:"AptiPro",description:"Reached 10,000 XP. True dedication!",icon:_.jsx(rl,{size:20})}];te.score>=0&&sn.push(Yn[0]),oe.length>=1&&sn.push(Yn[1]),te.score>=1e3&&sn.push(Yn[2]),oe.length>=5&&sn.push(Yn[3]),oe.some(tt=>tt.score===tt.total_questions)&&sn.push(Yn[4]),te.score>=1e4&&sn.push(Yn[5]),v(sn)},re=M.useCallback(async te=>{if(!(!e||Object.keys(te).length===0)){F("saving");try{const{data:oe,error:ae}=await Je.from("profiles").update({...te,updated_at:new Date().toISOString()}).eq("id",e.id).select().single();if(ae)throw ae;if(!oe)throw new Error("Profile update failed. This may be due to security policies.");c(oe),s(oe),te.hasOwnProperty("banner_color")&&O(oe.banner_color||null),F("success"),setTimeout(()=>{ke.current==="success"&&F("idle")},2e3)}catch(oe){console.error("Error updating profile:",oe);let ae;if(oe&&typeof oe=="object"&&"message"in oe&&typeof oe.message=="string")ae=oe.message;else try{ae=JSON.stringify(oe)}catch{ae="An un-serializable error occurred during the update."}ae.includes('duplicate key value violates unique constraint "profiles_username_key"')&&(ae="This username is already taken. Please choose another one."),alert(`Error updating profile: ${ae}`),F("error"),we.current&&te.hasOwnProperty("banner_color")&&O(we.current.banner_color||null)}}},[e,s]);M.useEffect(()=>{(async()=>{const oe=t||(e==null?void 0:e.id);if(!oe){A(!1);return}A(!0),P(null);try{const ae=Je.from("profiles").select("*").eq("id",oe).single(),at=Je.from("test_results").select("*").eq("user_id",oe).order("created_at",{ascending:!1}),[{data:Qe,error:rn},{data:Nt,error:Mt}]=await Promise.all([ae,at]);if(rn)throw rn;if(Mt)throw Mt;if(Qe)c(Qe),x({username:Qe.username||"",bio:Qe.bio||""}),O(Qe.banner_color||null),h(Nt||[]),X(Qe,Nt||[]);else throw new Error("Profile not found.")}catch(ae){console.error("Error fetching profile data:",ae);let at;if(ae&&typeof ae=="object"&&"message"in ae&&typeof ae.message=="string")at=ae.message;else try{at=JSON.stringify(ae)}catch{at="An un-serializable error occurred while fetching the profile."}P(at)}finally{A(!1)}})()},[t,e]);const Ce=M.useCallback(()=>{Z.current&&clearTimeout(Z.current),Z.current=window.setTimeout(()=>{const te=ge.current,oe=we.current;if(!oe)return;const ae={},at=te.username.trim(),Qe=te.bio.trim().slice(0,nd);at!==(oe.username||"")&&(ae.username=at||null),Qe!==(oe.bio||"")&&(ae.bio=Qe||null),Object.keys(ae).length>0?re(ae):F("idle")},1500)},[re]),Re=te=>{F("typing"),x(oe=>({...oe,[te.target.name]:te.target.value})),Ce()},D=te=>{de(!1),te!==R&&(O(te),re({banner_color:te}))},Y=async te=>{if(!(!te.target.files||te.target.files.length===0||!e)){W(!0);try{const oe=te.target.files[0],ae=`${e.id}/${Math.random()}.${oe.name.split(".").pop()}`;await Je.storage.from("avatars").upload(ae,oe,{upsert:!0});const{data:{publicUrl:at}}=Je.storage.from("avatars").getPublicUrl(ae),{data:Qe,error:rn}=await Je.from("profiles").update({avatar_url:`${at}?t=${new Date().getTime()}`}).eq("id",e.id).select().single();if(rn)throw rn;Qe&&(s(Qe),c(Qe))}catch(oe){console.error("Error uploading avatar:",oe);let ae;if(oe&&typeof oe=="object"&&"message"in oe&&typeof oe.message=="string")ae=oe.message;else try{ae=JSON.stringify(oe)}catch{ae="An un-serializable error occurred during avatar upload."}alert(`Error uploading avatar: ${ae}`)}finally{W(!1)}}},ne=async()=>{window.confirm("Are you absolutely sure? This action is irreversible.")&&(alert("Account deletion initiated. A Supabase Edge Function is required for full implementation. Signing out as a placeholder."),o())},ee=te=>te>=1e4?"AptiPro Master":te>=5e3?"Expert Analyst":te>=2500?"Skilled Professional":te>=1e3?"Consistent Challenger":te>=500?"Rising Talent":"AptiPro Novice";if(C)return _.jsx("div",{className:"flex items-center justify-center h-full",children:_.jsx("div",{className:"w-12 h-12 border-4 border-t-transparent border-fire-orange-start rounded-full animate-spin"})});if(k)return _.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:_.jsx(Yd,{feature:"profile",error:k})});if(!l)return _.jsx("div",{className:"text-center p-10",children:"Profile not found."});const ue=typeof(l==null?void 0:l.username)=="string"&&l.username?l.username:"AptiPro User",pe="from-fire-orange-start to-fire-red-end";return _.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-6 pb-24",children:[_.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden",children:[_.jsx("div",{className:`relative h-32 bg-gradient-to-r ${Q?R||pe:l.banner_color||pe} transition-all`,children:Q&&_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"absolute top-3 right-3 z-20",children:_.jsx(ik,{status:H})}),_.jsx("button",{onClick:()=>de(!j),className:"absolute top-3 left-3 p-1.5 bg-black/30 rounded-full text-white hover:bg-black/50 backdrop-blur-sm transition-colors z-20","aria-label":"Edit banner",children:_.jsx(Yg,{size:16})}),j&&_.jsxs("div",{className:"absolute top-12 left-3 p-3 bg-white dark:bg-gray-900 rounded-lg shadow-xl animate-fade-in z-10 w-64",children:[_.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-700 dark:text-gray-300",children:"Choose Banner"}),_.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[tk.map(te=>_.jsx("button",{title:te.name,onClick:()=>D(te.class),className:`w-8 h-8 rounded-full bg-gradient-to-r ${te.class} ring-2 ring-offset-2 dark:ring-offset-gray-900 ${R===te.class?"ring-fire-orange-start":"ring-transparent"}`},te.name)),_.jsx("button",{title:"Default",onClick:()=>D(null),className:`w-8 h-8 rounded-full bg-gradient-to-r ${pe} ring-2 ring-offset-2 dark:ring-offset-gray-900 ${R?"ring-transparent":"ring-fire-orange-start"}`})]})]})]})}),_.jsx("div",{className:"p-6 -mt-16 relative",children:_.jsxs("div",{className:"relative w-28 h-28",children:[_.jsx(Xi,{avatarUrl:l==null?void 0:l.avatar_url,name:ue,size:112,className:"border-4 border-white dark:border-gray-800"}),Q&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>{var te;return(te=G.current)==null?void 0:te.click()},className:"absolute bottom-1 right-1 w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-white hover:bg-gray-900 transition-colors",disabled:K,"aria-label":"Upload profile picture",children:K?_.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin"}):_.jsx(Yg,{size:16})}),_.jsx("input",{type:"file",ref:G,onChange:Y,accept:"image/jpeg,image/png",className:"hidden",disabled:K})]})]})})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsx("div",{className:"md:col-span-1 space-y-6",children:_.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[Q?_.jsx("input",{type:"text",name:"username",value:w.username,onChange:Re,placeholder:"Enter your username",className:"text-2xl font-bold bg-transparent focus:outline-none w-full border-b-2 border-transparent focus:border-fire-orange-start transition-colors"}):_.jsx("h1",{className:"text-2xl font-bold",children:ue}),_.jsx("p",{className:"text-sm font-semibold text-fire-orange-start mt-1",children:ee(l.score)}),_.jsxs("div",{className:"flex items-center text-lg font-semibold text-gray-700 dark:text-gray-200 mt-4",children:[_.jsx(vd,{className:"text-orange-500 mr-2"}),_.jsxs("span",{children:[((l==null?void 0:l.score)||0).toLocaleString()," XP"]})]}),Q&&_.jsxs("p",{className:"flex items-center text-sm mt-2 text-gray-500 dark:text-gray-400",children:[_.jsx(dC,{className:"mr-2"}),e==null?void 0:e.email]}),_.jsxs("div",{className:"mt-6",children:[_.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Bio"}),Q?_.jsxs(_.Fragment,{children:[_.jsx("textarea",{name:"bio",value:w.bio,onChange:Re,className:"mt-1 w-full p-2 text-sm text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-fire-orange-start",rows:4,maxLength:nd,placeholder:"Tell us about yourself..."}),_.jsxs("div",{className:"text-right text-xs text-gray-500",children:[w.bio.length,"/",nd]})]}):_.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 italic mt-1",children:l.bio?`"${l.bio}"`:"This user hasn't added a bio yet."})]})]})}),_.jsxs("div",{className:"md:col-span-2 space-y-6",children:[_.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[_.jsx("h2",{className:"font-bold text-xl mb-4",children:"Performance Stats"}),_.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-center",children:[_.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[_.jsx(SC,{size:28,className:"mx-auto text-fire-orange-start"}),_.jsx("p",{className:"text-2xl font-bold mt-2",children:E.testsTaken}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tests Taken"})]}),_.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[_.jsx(EC,{size:28,className:"mx-auto text-fire-orange-start"}),_.jsxs("p",{className:"text-2xl font-bold mt-2",children:[E.overallAccuracy,"%"]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Accuracy"})]}),_.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg col-span-2 sm:col-span-1",children:[_.jsx(rl,{size:28,className:"mx-auto text-fire-orange-start"}),_.jsx("p",{className:"text-lg font-bold mt-2 truncate",children:E.bestTopic||"N/A"}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Best Topic"})]})]})]}),_.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[_.jsx("h2",{className:"font-bold text-xl mb-4",children:"Achievements"}),p.length>0?_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:p.map(te=>_.jsx(nk,{achievement:te},te.id))}):_.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Complete some tests to start earning achievements!"})]}),_.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-2xl shadow-lg",children:[_.jsx("h2",{className:"font-bold text-xl mb-4",children:"Recent Activity"}),f.length>0?_.jsx("ul",{className:"space-y-3",children:f.slice(0,5).map(te=>_.jsxs("li",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold",children:te.topic}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ZI(new Date(te.created_at),"MMM d, yyyy")})]}),_.jsxs("div",{className:"text-right",children:[_.jsxs("p",{className:"font-bold text-fire-orange-start",children:[te.score,"/",te.total_questions]}),_.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Score"})]})]},te.id))}):_.jsxs("p",{className:"text-sm text-gray-500 text-center py-4",children:["No recent activity. ",_.jsx(Ti,{to:"/practice",className:"text-fire-orange-start font-semibold",children:"Take a test!"})]})]})]})]}),Q&&_.jsxs("div",{className:"mt-6 p-6 bg-red-50 dark:bg-gray-800/20 border border-red-200 dark:border-red-500/30 rounded-2xl shadow-lg",children:[_.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Danger Zone"}),_.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400/80 mt-1",children:"This action is permanent and cannot be undone."}),_.jsx("div",{className:"mt-4",children:_.jsx("button",{onClick:ne,className:"px-4 py-2 bg-red-500 text-white font-semibold rounded-lg hover:bg-red-600 transition-colors",children:_.jsxs("span",{className:"flex items-center",children:[_.jsx(mC,{size:16,className:"mr-2"})," Delete My Account"]})})})]})]})},rk=()=>{const{setIsPasswordRecovery:t}=Sn(),[e,i]=M.useState(""),[s,o]=M.useState(""),[l,c]=M.useState(!1),[f,h]=M.useState(null),[p,v]=M.useState(null),E=async S=>{if(S.preventDefault(),e!==s){h("Passwords do not match.");return}if(e.length<6){h("Password should be at least 6 characters.");return}c(!0),h(null),v(null);try{const{error:w}=await Je.auth.updateUser({password:e});if(w)throw w;v("Your password has been updated successfully! Redirecting..."),setTimeout(()=>{t(!1)},2e3)}catch(w){let x;w&&typeof w=="object"&&"message"in w&&typeof w.message=="string"||w instanceof Error?x=w.message:typeof w=="string"?x=w:x="An unknown error occurred while updating your password.",h(x)}finally{c(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900 animate-fade-in p-4",children:_.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-fire-orange-start to-fire-red-end",children:"AptiPro"}),_.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Create a new password"})]}),f&&_.jsx("div",{className:"p-3 text-sm text-center text-red-800 bg-red-100 rounded-lg dark:bg-red-900 dark:text-red-300",children:f}),p&&_.jsx("div",{className:"p-3 text-sm text-center text-green-800 bg-green-100 rounded-lg dark:bg-green-900 dark:text-green-300",children:p}),_.jsxs("form",{className:"space-y-6",onSubmit:E,children:[_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"password",type:"password",value:e,onChange:S=>i(S.target.value),required:!0,className:"block w-full px-4 py-3 text-gray-900 bg-transparent border-2 border-gray-300 rounded-lg appearance-none dark:text-white dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-fire-orange-start peer",placeholder:" "}),_.jsx("label",{htmlFor:"password",className:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-800 px-2 peer-focus:px-2 peer-focus:text-fire-orange-start peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-2",children:"New Password"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{id:"confirmPassword",type:"password",value:s,onChange:S=>o(S.target.value),required:!0,className:"block w-full px-4 py-3 text-gray-900 bg-transparent border-2 border-gray-300 rounded-lg appearance-none dark:text-white dark:border-gray-600 focus:outline-none focus:ring-0 focus:border-fire-orange-start peer",placeholder:" "}),_.jsx("label",{htmlFor:"confirmPassword",className:"absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-4 scale-75 top-2 z-10 origin-[0] bg-white dark:bg-gray-800 px-2 peer-focus:px-2 peer-focus:text-fire-orange-start peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-2",children:"Confirm New Password"})]}),_.jsx("button",{type:"submit",disabled:l||!!p,className:"w-full px-4 py-3 font-semibold text-white bg-gradient-to-r from-fire-orange-start to-fire-red-end rounded-lg hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-fire-red-end transition-opacity disabled:opacity-50",children:l?"Updating...":"Update Password"})]})]})})},C0=`-- 
-- This script sets up all necessary tables, policies, and functions for the AptiPro app.
-- Run this entire script in your Supabase SQL Editor to get started.
--

-- =============================================
-- 1. PROFILES TABLE
-- Stores user data like username, score, etc.
-- =============================================
CREATE TABLE IF NOT EXISTS public.profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  username TEXT UNIQUE,
  avatar_url TEXT,
  bio TEXT,
  banner_color TEXT,
  score INT NOT NULL DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);

-- Add columns if they don't exist (for backward compatibility for users with old schemas)
-- This ensures that users who set up the database with an older version of this script get the new columns.
ALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS banner_color TEXT;
ALTER TABLE public.profiles ADD COLUMN IF NOT EXISTS updated_at TIMESTAMPTZ;

-- Enable Row Level Security
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

-- Policies for profiles table
DROP POLICY IF EXISTS "Profiles are viewable by everyone." ON public.profiles;
CREATE POLICY "Profiles are viewable by everyone."
ON public.profiles
FOR SELECT
USING (true);

DROP POLICY IF EXISTS "Users can insert their own profile." ON public.profiles;
CREATE POLICY "Users can insert their own profile."
ON public.profiles
FOR INSERT
WITH CHECK (auth.uid() = id);

DROP POLICY IF EXISTS "Users can update their own profile." ON public.profiles;
CREATE POLICY "Users can update their own profile."
ON public.profiles
FOR UPDATE
USING (auth.uid() = id)
WITH CHECK (auth.uid() = id);

-- =============================================
-- 2. HANDLE NEW USER FUNCTION & TRIGGER
-- Automatically creates a profile when a new user signs up.
-- =============================================
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS trigger AS $$
BEGIN
  INSERT INTO public.profiles (id, username)
  VALUES (
    NEW.id,
    NEW.email
  )
  ON CONFLICT (id) DO NOTHING;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Trigger to call the function on new user signup
DROP TRIGGER IF EXISTS on_auth_user_created ON auth.users;
CREATE TRIGGER on_auth_user_created
AFTER INSERT ON auth.users
FOR EACH ROW
EXECUTE FUNCTION public.handle_new_user();

-- =============================================
-- 3. TEST RESULTS TABLE
-- Stores scores from practice tests.
-- =============================================
CREATE TABLE IF NOT EXISTS public.test_results (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL,
  topic TEXT NOT NULL,
  score INT NOT NULL,
  total_questions INT NOT NULL,
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  CONSTRAINT test_results_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.profiles (id) ON DELETE CASCADE
);

-- Enable Row Level Security
ALTER TABLE public.test_results ENABLE ROW LEVEL SECURITY;

-- Policies for test_results table
DROP POLICY IF EXISTS "Users can view their own test results." ON public.test_results;
CREATE POLICY "Users can view their own test results."
ON public.test_results
FOR SELECT
USING (auth.uid() = user_id);

DROP POLICY IF EXISTS "Users can insert their own test results." ON public.test_results;
CREATE POLICY "Users can insert their own test results."
ON public.test_results
FOR INSERT
WITH CHECK (auth.uid() = user_id);

-- =============================================
-- 4. INCREMENT SCORE FUNCTION
-- A secure way to update a user's score.
-- =============================================
CREATE OR REPLACE FUNCTION public.increment_user_score(increment_value INT)
RETURNS void AS $$
BEGIN
  UPDATE public.profiles
  SET score = score + increment_value,
      updated_at = now()
  WHERE id = auth.uid();
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- =============================================
-- 5. STORAGE BUCKETS & POLICIES
-- =============================================

-- Create public bucket for avatars if it doesn't exist.
-- Adds file size and type restrictions for security.
INSERT INTO storage.buckets (id, name, public, file_size_limit, allowed_mime_types)
VALUES 
  ('avatars', 'avatars', true, 1048576, ARRAY['image/jpeg', 'image/png'])
ON CONFLICT (id) DO UPDATE 
SET public = EXCLUDED.public, file_size_limit = EXCLUDED.file_size_limit, allowed_mime_types = EXCLUDED.allowed_mime_types;

--
-- RLS POLICIES FOR storage.objects
-- Clean up old/conflicting policies before creating new ones.
--
DROP POLICY IF EXISTS "Public can view files in avatars" ON storage.objects;
DROP POLICY IF EXISTS "Authenticated users can upload their own avatars" ON storage.objects;
DROP POLICY IF EXISTS "Users can update their own avatars" ON storage.objects;
DROP POLICY IF EXISTS "Users can delete their own avatars" ON storage.objects;
-- Also dropping some older policy names just in case.
DROP POLICY IF EXISTS "Anyone can upload an avatar." ON storage.objects;
DROP POLICY IF EXISTS "Users can update their own avatar." ON storage.objects;

-- POLICY 1: Allow public read access to avatars.
CREATE POLICY "Public can view files in avatars"
ON storage.objects FOR SELECT
USING (bucket_id = 'avatars');

-- POLICY 2: Allow authenticated users to upload files into their own folder.
-- The file path must be in the format: {user_id}/{file_name}.
-- This prevents users from uploading files into other users' folders.
CREATE POLICY "Authenticated users can upload their own avatars"
ON storage.objects FOR INSERT
TO authenticated
WITH CHECK (
  bucket_id = 'avatars' AND
  auth.uid() = (storage.foldername(name))[1]::uuid
);

-- POLICY 3: Allow users to update their own files.
CREATE POLICY "Users can update their own avatars"
ON storage.objects FOR UPDATE
USING ( auth.uid() = owner )
WITH CHECK ( bucket_id = 'avatars' );

-- POLICY 4: Allow users to delete their own files.
CREATE POLICY "Users can delete their own avatars"
ON storage.objects FOR DELETE
USING ( auth.uid() = owner AND bucket_id = 'avatars' );

--
-- End of script.
--
`,sk=({children:t})=>_.jsx("pre",{className:"mt-2 p-4 bg-gray-100 dark:bg-gray-900 rounded-md text-sm text-left overflow-x-auto relative",children:_.jsx("code",{children:t})}),ok=()=>{const[t,e]=M.useState(!1),i=()=>{navigator.clipboard.writeText(C0),e(!0),setTimeout(()=>e(!1),2e3)};return _.jsxs("div",{className:"flex flex-col h-full max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 animate-fade-in",children:[_.jsxs("div",{className:"text-center",children:[_.jsx(pC,{className:"mx-auto text-fire-orange-start",size:48}),_.jsx("h1",{className:"text-3xl font-bold mt-4",children:"Database Setup Required"}),_.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"To use all features of AptiPro, you need to set up your Supabase database."}),_.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Copy the SQL script below and run it in your project's SQL Editor."})]}),_.jsxs("div",{className:"mt-6 relative",children:[_.jsx(sk,{children:C0}),_.jsx("button",{onClick:i,className:"absolute top-4 right-4 p-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:t?_.jsx(sl,{className:"text-green-500"}):_.jsx(jv,{})})]})]})},ak=()=>_.jsx(Wx,{children:_.jsx(Kx,{children:_.jsx(vw,{children:_.jsx(uk,{})})})}),lk=({code:t,...e})=>t===0?_.jsx(Gv,{...e}):t>=1&&t<=3?_.jsx(vC,{...e}):t>=51&&t<=67||t>=80&&t<=82||t>=95&&t<=99?_.jsx(_C,{...e}):_.jsx(yC,{...e}),uk=()=>{const{theme:t}=Hv(),{isPasswordRecovery:e,databaseError:i}=Sn();return M.useEffect(()=>{t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),i?_.jsx(ok,{}):e?_.jsx(rk,{}):_.jsx("div",{className:"min-h-screen font-sans text-gray-800 bg-gray-50 dark:bg-gray-900 dark:text-gray-200",children:_.jsxs(q0,{children:[_.jsx(en,{path:"/auth",element:_.jsx(bC,{})}),_.jsx(en,{path:"/*",element:_.jsx(ck,{children:_.jsx(dk,{})})})]})})},ck=({children:t})=>{const{session:e,loading:i}=Sn();return i?_.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900",children:_.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-fire-orange-start rounded-full animate-spin"})}):e?t:_.jsx(Pd,{to:"/auth",replace:!0})},dk=()=>{const[t,e]=M.useState(window.innerWidth>=768),[i,s]=M.useState(null),{user:o,profile:l,signOut:c}=Sn(),{theme:f,toggleTheme:h}=Hv();M.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async E=>{const{latitude:S,longitude:w}=E.coords;try{const C=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${S}&longitude=${w}&current=temperature_2m,weather_code`)).json();s({temp:Math.round(C.current.temperature_2m),code:C.current.weather_code})}catch(x){console.error("Failed to fetch weather data",x)}})},[]);const p=()=>{window.innerWidth<768?e(!1):e(!0)};M.useEffect(()=>(window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)),[]);const v=typeof(l==null?void 0:l.username)=="string"?l.username:"User";return _.jsxs("div",{className:"flex h-screen",children:[_.jsxs("aside",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-white dark:bg-gray-800 shadow-xl transform ${t?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out md:relative md:translate-x-0`,children:[_.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[_.jsx(Ti,{to:"/dashboard",className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-fire-orange-start to-fire-red-end",children:"AptiPro"}),_.jsx("button",{onClick:()=>e(!1),className:"md:hidden text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_.jsx(gC,{})})]}),_.jsxs("nav",{className:"py-4 flex flex-col h-[calc(100%-5rem)]",children:[_.jsxs("div",{className:"flex-grow px-4 space-y-2",children:[_.jsx($r,{to:"/dashboard",icon:_.jsx(eC,{}),children:"Dashboard"}),_.jsx($r,{to:"/practice",icon:_.jsx(zv,{}),children:"Practice"}),_.jsx($r,{to:"/leaderboard",icon:_.jsx(rl,{}),children:"Leaderboard"}),_.jsx($r,{to:"/voice-test",icon:_.jsx(tC,{}),children:"Voice Test"}),_.jsx($r,{to:"/ai-mentor",icon:_.jsx(nC,{}),children:"AI Mentor"}),_.jsx($r,{to:`/profile/${o==null?void 0:o.id}`,icon:_.jsx(iC,{}),children:"My Profile"})]}),_.jsx("div",{className:"px-4 mt-auto",children:_.jsxs("button",{onClick:c,className:"w-full flex items-center px-4 py-2 mt-2 text-sm font-medium text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[_.jsx(rC,{}),_.jsx("span",{className:"ml-3",children:"Sign Out"})]})})]})]}),_.jsxs("div",{className:"flex-1 flex flex-col",children:[_.jsxs("header",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-800 shadow-md md:shadow-none",children:[_.jsx("button",{onClick:()=>e(!0),className:"md:hidden text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_.jsx(Qx,{})}),_.jsxs("div",{className:"flex items-center ml-auto",children:[i&&_.jsxs("div",{className:"hidden sm:flex items-center mr-4 text-sm text-gray-600 dark:text-gray-400",children:[_.jsx(lk,{code:i.code,className:"mr-2"}),_.jsxs("span",{children:[i.temp,"C"]})]}),_.jsx("button",{onClick:h,className:"mr-4 p-2 rounded-full text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700",children:f==="light"?_.jsx(Xx,{}):_.jsx(Gv,{})}),_.jsxs(Ti,{to:`/profile/${o==null?void 0:o.id}`,className:"flex items-center",children:[_.jsx(Xi,{avatarUrl:l==null?void 0:l.avatar_url,name:(l==null?void 0:l.username)||(o==null?void 0:o.email),size:40}),_.jsxs("div",{className:"ml-3 hidden sm:block",children:[_.jsx("p",{className:"font-semibold text-sm",children:v}),_.jsxs("p",{className:"text-xs text-gray-500",children:[((l==null?void 0:l.score)||0).toLocaleString()," XP"]})]})]})]})]}),_.jsx("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto bg-gray-100 dark:bg-gray-900",children:_.jsxs(q0,{children:[_.jsx(en,{path:"/dashboard",element:_.jsx(xC,{})}),_.jsx(en,{path:"/practice",element:_.jsx(y0,{})}),_.jsx(en,{path:"/practice/:topic",element:_.jsx(y0,{})}),_.jsx(en,{path:"/leaderboard",element:_.jsx(YM,{})}),_.jsx(en,{path:"/voice-test",element:_.jsx($M,{})}),_.jsx(en,{path:"/ai-mentor",element:_.jsx(JM,{})}),_.jsx(en,{path:"/profile",element:_.jsx(x0,{})}),_.jsx(en,{path:"/profile/:userId",element:_.jsx(x0,{})}),_.jsx(en,{path:"*",element:_.jsx(Pd,{to:"/dashboard",replace:!0})})]})})]})]})},$r=({to:t,icon:e,children:i})=>{const o=Fn().pathname.startsWith(t);return _.jsxs(Ti,{to:t,className:`flex items-center px-4 py-2.5 text-sm font-medium rounded-lg transition-colors ${o?"bg-gradient-to-r from-orange-100 to-red-100 text-fire-orange-start dark:bg-gray-700":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[A0.cloneElement(e,{className:"w-5 h-5"}),_.jsx("span",{className:"ml-3",children:i})]})},b_=document.getElementById("root");if(!b_)throw new Error("Could not find root element to mount to");const fk=sT.createRoot(b_);fk.render(_.jsx(A0.StrictMode,{children:_.jsx(ak,{})}));
